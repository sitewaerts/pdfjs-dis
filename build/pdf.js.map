{"version":3,"sources":["webpack://pdfjs-dist/build/pdf/webpack/universalModuleDefinition","webpack://pdfjs-dist/build/pdf/webpack/bootstrap","webpack://pdfjs-dist/build/pdf/src/pdf.js","webpack://pdfjs-dist/build/pdf/src/display/display_utils.js","webpack://pdfjs-dist/build/pdf/src/shared/util.js","webpack://pdfjs-dist/build/pdf/src/shared/compatibility.js","webpack://pdfjs-dist/build/pdf/src/shared/is_node.js","webpack://pdfjs-dist/build/pdf/src/display/api.js","webpack://pdfjs-dist/build/pdf/src/display/font_loader.js","webpack://pdfjs-dist/build/pdf/src/display/node_utils.js","webpack://pdfjs-dist/build/pdf/src/display/annotation_storage.js","webpack://pdfjs-dist/build/pdf/src/display/api_compatibility.js","webpack://pdfjs-dist/build/pdf/src/display/canvas.js","webpack://pdfjs-dist/build/pdf/src/display/pattern_helper.js","webpack://pdfjs-dist/build/pdf/src/display/worker_options.js","webpack://pdfjs-dist/build/pdf/src/shared/message_handler.js","webpack://pdfjs-dist/build/pdf/src/display/metadata.js","webpack://pdfjs-dist/build/pdf/src/display/xml_parser.js","webpack://pdfjs-dist/build/pdf/src/display/optional_content_config.js","webpack://pdfjs-dist/build/pdf/src/display/transport_stream.js","webpack://pdfjs-dist/build/pdf/src/display/webgl.js","webpack://pdfjs-dist/build/pdf/src/display/annotation_layer.js","webpack://pdfjs-dist/build/pdf/src/display/text_layer.js","webpack://pdfjs-dist/build/pdf/src/display/svg.js","webpack://pdfjs-dist/build/pdf/src/display/node_stream.js","webpack://pdfjs-dist/build/pdf/src/display/network_utils.js","webpack://pdfjs-dist/build/pdf/src/display/content_disposition.js","webpack://pdfjs-dist/build/pdf/src/display/network.js","webpack://pdfjs-dist/build/pdf/src/display/fetch_stream.js"],"names":["pdfjsVersion","pdfjsBuild","isNodeJS","require","PDFNodeStream","setPDFNetworkStreamFactory","params","PDFNetworkStream","PDFFetchStream","isFetchSupported","isValidFetchUrl","url","DEFAULT_LINK_REL","SVG_NS","BaseCanvasFactory","constructor","unreachable","create","width","height","reset","canvasAndContext","canvas","Error","destroy","context","DOMCanvasFactory","ownerDocument","globalThis","document","_document","createElement","getContext","BaseCMapReaderFactory","baseUrl","isCompressed","fetch","name","compressionType","CMapCompressionType","BINARY","NONE","_fetchData","catch","reason","DOMCMapReaderFactory","baseURI","then","response","ok","statusText","cMapData","Uint8Array","arrayBuffer","stringToBytes","text","Promise","resolve","reject","request","XMLHttpRequest","open","responseType","onreadystatechange","readyState","DONE","status","responseText","send","DOMSVGFactory","assert","svg","createElementNS","setAttribute","type","PageViewport","viewBox","scale","rotation","offsetX","offsetY","dontFlip","centerX","centerY","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","Math","abs","transform","clone","slice","convertToViewportPoint","x","y","Util","applyTransform","convertToViewportRectangle","rect","topLeft","bottomRight","convertToPdfPoint","applyInverseTransform","RenderingCancelledException","BaseException","msg","LinkTarget","SELF","BLANK","PARENT","TOP","addLinkAttributes","link","target","rel","enabled","urlNullRemoved","removeNullCharacters","href","title","onclick","targetStr","getFilenameFromUrl","anchor","indexOf","query","end","min","length","substring","lastIndexOf","StatTimer","started","Object","times","time","warn","Date","now","timeEnd","push","start","toString","outBuf","longest","duration","padEnd","join","Response","prototype","ReadableStream","protocol","URL","ex","loadScript","src","script","onload","onerror","head","documentElement","appendChild","deprecated","details","console","log","pdfDateStringRegex","PDFDateString","toDateObject","input","isString","RegExp","matches","exec","year","parseInt","month","day","hour","minute","second","universalTimeRelation","offsetHour","offsetMinute","UTC","IDENTITY_MATRIX","FONT_IDENTITY_MATRIX","PermissionFlag","PRINT","MODIFY_CONTENTS","COPY","MODIFY_ANNOTATIONS","FILL_INTERACTIVE_FORMS","COPY_FOR_ACCESSIBILITY","ASSEMBLE","PRINT_HIGH_QUALITY","TextRenderingMode","FILL","STROKE","FILL_STROKE","INVISIBLE","FILL_ADD_TO_PATH","STROKE_ADD_TO_PATH","FILL_STROKE_ADD_TO_PATH","ADD_TO_PATH","FILL_STROKE_MASK","ADD_TO_PATH_FLAG","ImageKind","GRAYSCALE_1BPP","RGB_24BPP","RGBA_32BPP","AnnotationType","TEXT","LINK","FREETEXT","LINE","SQUARE","CIRCLE","POLYGON","POLYLINE","HIGHLIGHT","UNDERLINE","SQUIGGLY","STRIKEOUT","STAMP","CARET","INK","POPUP","FILEATTACHMENT","SOUND","MOVIE","WIDGET","SCREEN","PRINTERMARK","TRAPNET","WATERMARK","THREED","REDACT","AnnotationStateModelType","MARKED","REVIEW","AnnotationMarkedState","UNMARKED","AnnotationReviewState","ACCEPTED","REJECTED","CANCELLED","COMPLETED","AnnotationReplyType","GROUP","REPLY","AnnotationFlag","HIDDEN","NOZOOM","NOROTATE","NOVIEW","READONLY","LOCKED","TOGGLENOVIEW","LOCKEDCONTENTS","AnnotationFieldFlag","REQUIRED","NOEXPORT","MULTILINE","PASSWORD","NOTOGGLETOOFF","RADIO","PUSHBUTTON","COMBO","EDIT","SORT","FILESELECT","MULTISELECT","DONOTSPELLCHECK","DONOTSCROLL","COMB","RICHTEXT","RADIOSINUNISON","COMMITONSELCHANGE","AnnotationBorderStyleType","SOLID","DASHED","BEVELED","INSET","StreamType","UNKNOWN","FLATE","LZW","DCT","JPX","JBIG","A85","AHX","CCF","RLX","FontType","TYPE1","TYPE1C","CIDFONTTYPE0","CIDFONTTYPE0C","TRUETYPE","CIDFONTTYPE2","TYPE3","OPENTYPE","TYPE0","MMTYPE1","VerbosityLevel","ERRORS","WARNINGS","INFOS","STREAM","OPS","dependency","setLineWidth","setLineCap","setLineJoin","setMiterLimit","setDash","setRenderingIntent","setFlatness","setGState","save","restore","moveTo","lineTo","curveTo","curveTo2","curveTo3","closePath","rectangle","stroke","closeStroke","fill","eoFill","fillStroke","eoFillStroke","closeFillStroke","closeEOFillStroke","endPath","clip","eoClip","beginText","endText","setCharSpacing","setWordSpacing","setHScale","setLeading","setFont","setTextRenderingMode","setTextRise","moveText","setLeadingMoveText","setTextMatrix","nextLine","showText","showSpacedText","nextLineShowText","nextLineSetSpacingShowText","setCharWidth","setCharWidthAndBounds","setStrokeColorSpace","setFillColorSpace","setStrokeColor","setStrokeColorN","setFillColor","setFillColorN","setStrokeGray","setFillGray","setStrokeRGBColor","setFillRGBColor","setStrokeCMYKColor","setFillCMYKColor","shadingFill","beginInlineImage","beginImageData","endInlineImage","paintXObject","markPoint","markPointProps","beginMarkedContent","beginMarkedContentProps","endMarkedContent","beginCompat","endCompat","paintFormXObjectBegin","paintFormXObjectEnd","beginGroup","endGroup","beginAnnotations","endAnnotations","beginAnnotation","endAnnotation","paintJpegXObject","paintImageMaskXObject","paintImageMaskXObjectGroup","paintImageXObject","paintInlineImageXObject","paintInlineImageXObjectGroup","paintImageXObjectRepeat","paintImageMaskXObjectRepeat","paintSolidColorImageMask","constructPath","UNSUPPORTED_FEATURES","unknown","forms","javaScript","smask","shadingPattern","font","errorTilingPattern","errorExtGState","errorXObject","errorFontLoadType3","errorFontState","errorFontMissing","errorFontTranslate","errorColorSpace","errorOperatorList","errorFontToUnicode","errorFontLoadNative","errorFontGetPath","errorMarkedContent","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","verbosity","setVerbosityLevel","level","Number","isInteger","getVerbosityLevel","info","cond","isSameOrigin","otherUrl","base","origin","e","other","_isValidProtocol","createValidAbsoluteUrl","absoluteUrl","shadow","obj","prop","value","defineProperty","enumerable","configurable","writable","BaseExceptionClosure","message","PasswordException","code","UnknownErrorException","InvalidPDFException","MissingPDFException","UnexpectedResponseException","FormatError","AbortException","NullCharactersRegExp","str","replace","bytesToString","bytes","undefined","MAX_ARGUMENT_COUNT","String","fromCharCode","apply","strBuf","i","chunkEnd","chunk","subarray","charCodeAt","arrayByteLength","arr","byteLength","arraysToBytes","resultLength","pos","data","item","itemLength","set","string32","isLittleEndian","buffer8","view32","Uint32Array","buffer","IsLittleEndianCached","isEvalSupported","Function","IsEvalSupportedCached","rgbBuf","makeCssRgb","r","g","b","m1","m2","p","m","xt","yt","d","getAxialAlignedBoundingBox","p1","p2","p3","p4","max","inverseTransform","apply3dTransform","v","singularValueDecompose2dScale","transpose","a","c","first","sqrt","sx","sy","normalizeRect","intersect","rect1","rect2","compare","orderedX","sort","orderedY","result","PDFStringTranslateTable","stringToPDFString","charAt","escapeString","stringToUTF8String","decodeURIComponent","escape","utf8StringToString","unescape","encodeURIComponent","isBool","isNum","isArrayBuffer","isArrayEqual","arr1","arr2","every","element","index","getModificationDate","date","getUTCFullYear","getUTCMonth","padStart","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","createPromiseCapability","capability","isSettled","get","promise","createObjectURL","createObjectURLClosure","digits","contentType","forceDataSchema","blob","Blob","ii","b1","b2","b3","d1","d2","d3","d4","process","versions","nw","electron","DEFAULT_RANGE_CHUNK_SIZE","RENDERING_CANCELLED_TIMEOUT","DefaultCanvasFactory","NodeCanvasFactory","DefaultCMapReaderFactory","NodeCMapReaderFactory","createPDFNetworkStream","pdfNetworkStreamFactory","getDocument","task","PDFDocumentLoadingTask","source","PDFDataRangeTransport","range","rangeTransport","worker","key","window","location","pdfBytes","isNaN","rangeChunkSize","CMapReaderFactory","ignoreErrors","stopAtErrors","fontExtraProperties","pdfBug","maxImageSize","disableFontFace","apiCompatibilityParams","disableRange","disableStream","disableAutoFetch","workerParams","port","GlobalWorkerOptions","workerPort","PDFWorker","fromPort","_worker","docId","destroyed","workerIdPromise","_fetchDocument","networkStreamPromise","networkStream","PDFDataTransportStream","initialData","progressiveDone","httpHeaders","withCredentials","all","workerId","messageHandler","MessageHandler","postMessageTransfers","transport","WorkerTransport","_transport","_capability","pdfDataRangeTransport","sendWithPromise","apiVersion","password","docBaseUrl","PDFDocumentLoadingTaskClosure","nextDocumentId","onPassword","onProgress","onUnsupportedFeature","transportDestroyed","_rangeListeners","_progressListeners","_progressiveReadListeners","_progressiveDoneListeners","_readyCapability","addRangeListener","listener","addProgressListener","addProgressiveReadListener","addProgressiveDoneListener","onDataRange","begin","onDataProgress","loaded","total","onDataProgressiveRead","onDataProgressiveDone","transportReady","requestDataRange","abort","PDFDocumentProxy","pdfInfo","_pdfInfo","annotationStorage","AnnotationStorage","numPages","fingerprint","getPage","pageNumber","getPageIndex","ref","getDestinations","getDestination","id","getPageLabels","getPageLayout","getPageMode","getViewerPreferences","getOpenAction","getAttachments","getJavaScript","getOutline","getOptionalContentConfig","getPermissions","getMetadata","getData","getDownloadInfo","downloadInfoCapability","getStats","cleanup","startCleanup","loadingTask","loadingParams","saveDocument","PDFPageProxy","pageIndex","pageInfo","_pageIndex","_pageInfo","_ownerDocument","_stats","_pdfBug","commonObjs","objs","PDFObjects","cleanupAfterRender","pendingCleanup","_intentStates","Map","rotate","userUnit","view","getViewport","getAnnotations","intent","annotationsPromise","annotationsIntent","render","canvasContext","viewport","enableWebGL","renderInteractiveForms","imageLayer","canvasFactory","background","optionalContentConfigPromise","renderingIntent","intentState","streamReaderCancelTimeout","clearTimeout","canvasFactoryInstance","webGLContext","WebGLContext","enable","displayReadyCapability","operatorList","fnArray","argsArray","lastChunk","_pumpOperatorList","getAll","complete","error","renderTasks","internalRenderTask","splice","_tryCleanup","_abortOperatorList","InternalRenderTask","callback","useRequestAnimationFrame","renderTask","transparency","optionalContentConfig","initializeGraphics","operatorListChanged","getOperatorList","opListReadCapability","opListTask","streamTextContent","normalizeWhitespace","disableCombineTextItems","TEXT_CONTENT_CHUNK_SIZE","sendWithStream","combineTextItems","highWaterMark","size","textContent","items","getTextContent","readableStream","pump","reader","read","done","assign","styles","getReader","_destroy","pageCache","waitOn","force","completed","cancel","clear","resetStats","values","_startRenderPage","_renderPageChunk","operatorListChunk","args","streamReader","setTimeout","curIntentState","delete","stats","LoopbackPort","defer","_listeners","_defer","_deferred","postMessage","transfers","cloneValue","cloned","has","transferable","includes","byteOffset","Array","isArray","desc","getOwnPropertyDescriptor","getPrototypeOf","hasOwnProperty","forEach","call","WeakMap","addEventListener","removeEventListener","terminate","PDFWorkerClosure","pdfWorkerPorts","isWorkerDisabled","fallbackWorkerSrc","nextFakeWorkerId","fakeWorkerCapability","__non_webpack_require__","pdfjsFilePath","currentScript","getWorkerSrc","workerSrc","getMainThreadWorkerMessageHandler","mainWorkerMessageHandler","pdfjsWorker","WorkerMessageHandler","setupFakeWorkerGlobal","loader","eval","createCDNWrapper","wrapper","_port","_webWorker","_messageHandler","_initializeFromPort","_initialize","on","Worker","terminateEarly","onWorkerError","_setupFakeWorker","supportTransfers","sendTest","testObj","workerHandler","setup","fontLoader","FontLoader","_onUnsupportedFeature","bind","_params","cMapUrl","cMapPacked","destroyCapability","_passwordCapability","_networkStream","_fullReader","_lastProgress","pagePromises","setupMessageHandler","page","terminated","cancelAllRequests","sink","getFullReader","evt","onPull","close","enqueue","onCancel","ready","readyReason","headersCapability","fullReader","headersReady","isStreamingSupported","isRangeSupported","contentLength","rangeReader","getRangeReader","_numPages","exception","updatePassword","exportedData","exportedError","fontRegistry","FontInspector","registerFont","fontAdded","FontFaceObject","finally","imageData","pageProxy","MAX_IMAGE_SIZE_TO_STORE","fetched","builtInCMap","featureId","filename","resetModified","results","OptionalContentConfig","metadata","Metadata","contentDispositionFilename","cleanupSuccessful","_objs","_ensureObj","objId","resolved","RenderTask","_internalRenderTask","onContinue","InternalRenderTaskClosure","canvasInRendering","WeakSet","operatorListIdx","running","graphicsReadyCallback","graphicsReady","_useRequestAnimationFrame","cancelled","_continueBound","_continue","_scheduleNextBound","_scheduleNext","_nextBound","_next","_canvas","add","StepperManager","stepper","init","nextBreakPoint","getNextBreakPoint","gfx","CanvasGraphics","beginDrawing","endDrawing","updateOperatorList","requestAnimationFrame","executeOperatorList","version","build","BaseFontLoader","nativeFontFaces","styleElement","addNativeFontFace","nativeFontFace","fonts","insertRule","rule","getElementsByTagName","styleSheet","sheet","cssRules","remove","attached","missingFile","isFontLoadingAPISupported","createNativeFontFace","family","createFontFaceRule","isSyncFontLoadingSupported","_queueLoadingCallback","_prepareFontLoadEvent","supported","_loadTestFont","rules","fontsToLoad","GenericFontLoader","loadingContext","requests","nextRequestId","loadTestFontId","navigator","userAgent","completeRequest","otherRequest","shift","getLoadTestFont","atob","int32","offset","spliceString","s","insert","chunk1","chunk2","ctx","called","isFontReady","fillText","getImageData","COMMENT_OFFSET","CFF_CHECKSUM_OFFSET","XXXX_VALUE","checksum","btoa","names","loadedName","div","style","visibility","position","top","left","span","fontFamily","body","removeChild","translatedData","compiledGlyphs","FontFace","mimetype","getPathGenerator","character","cmds","current","js","cmd","Canvas","createCanvas","fs","readFile","_storage","_modified","onSetModified","onResetModified","getOrCreateValue","defaultValue","setValue","_setModified","fromEntries","compatibilityParams","checkFontFace","freeze","MIN_FONT_SIZE","MAX_FONT_SIZE","MAX_GROUP_SIZE","MIN_WIDTH_FACTOR","COMPILE_TYPE3_GLYPHS","MAX_SIZE_TO_COMPILE","FULL_CHUNK_HEIGHT","addContextCurrentTransform","mozCurrentTransform","_originalSave","_originalRestore","_originalRotate","_originalScale","_originalTranslate","translate","_originalTransform","_originalSetTransform","setTransform","_transformMatrix","_transformStack","getCurrentTransform","getCurrentTransformInverse","f","ad_bc","bc_ad","ctxSave","old","ctxRestore","prev","pop","ctxTranslate","ctxScale","ctxTransform","ctxSetTransform","ctxRotate","angle","cosValue","cos","sinValue","sin","CachedCanvases","CachedCanvasesClosure","cache","getCanvas","CachedCanvases_getCanvas","trackTransform","canvasEntry","compileType3Glyph","imgData","POINT_TO_PROCESS_LIMIT","j","j0","width1","points","POINT_TYPES","lineSize","data0","mask","elem","count","sum","steps","Int32Array","outlines","coords","p0","pp","step","drawOutline","beginPath","k","kk","o","l","ll","CanvasExtraState","CanvasExtraStateClosure","alphaIsShape","fontSize","fontSizeScale","textMatrix","textMatrixScale","fontMatrix","leading","lineX","lineY","charSpacing","wordSpacing","textHScale","textRenderingMode","textRise","fillColor","strokeColor","patternFill","fillAlpha","strokeAlpha","lineWidth","activeSMask","resumeSMaskCtx","transferMaps","CanvasExtraState_clone","setCurrentPoint","CanvasExtraState_setCurrentPoint","CanvasGraphicsClosure","EXECUTION_TIME","EXECUTION_STEPS","canvasCtx","stateStack","pendingClip","pendingEOFill","res","xobjs","groupStack","processingType3","baseTransform","baseTransformStack","groupLevel","smaskStack","smaskCounter","tempSMask","contentVisible","markedContentStack","cachedCanvases","_cachedGetSinglePixelWidth","putBinaryImageData","ImageData","putImageData","partialChunkHeight","fullChunks","totalChunks","chunkImgData","createImageData","srcPos","destPos","dest","thisChunkHeight","elemsInThisChunk","transferMapRed","transferMapGreen","transferMapBlue","transferMapGray","kind","srcLength","dest32","dest32DataLength","fullSrcDiff","white","black","srcDiff","kEnd","kEndUnrolled","srcByte","hasTransferMaps","putBinaryImageMask","copyCtxState","sourceCtx","destCtx","properties","property","setLineDash","getLineDash","lineDashOffset","resetCtxToDefault","strokeStyle","fillStyle","fillRule","globalAlpha","lineCap","lineJoin","miterLimit","globalCompositeOperation","composeSMaskBackdrop","r0","g0","b0","alpha","alpha_","composeSMaskAlpha","maskData","layerData","transferMap","composeSMaskLuminosity","genericComposeSMask","maskCtx","layerCtx","subtype","backdrop","hasBackdrop","composeFn","PIXELS_TO_PROCESS","chunkSize","ceil","row","chunkHeight","composeSMask","scaleX","scaleY","isEnabled","composed","layer","drawImage","LINE_CAP_STYLES","LINE_JOIN_STYLES","NORMAL_CLIP","EO_CLIP","fillRect","transparentCanvas","compositeCtx","beginLayout","CanvasGraphics_executeOperatorList","executionStartIdx","continueCallback","argsArrayLen","chunkOperations","endTime","fnId","breakIt","depObjId","objsPool","startsWith","CanvasGraphics_endDrawing","endSMaskGroup","endLayout","CanvasGraphics_setLineWidth","CanvasGraphics_setLineCap","CanvasGraphics_setLineJoin","CanvasGraphics_setMiterLimit","limit","CanvasGraphics_setDash","dashArray","dashPhase","flatness","CanvasGraphics_setGState","states","state","suspendSMaskGroup","beginSMaskGroup","CanvasGraphics_beginSMaskGroup","drawnWidth","drawnHeight","cacheId","scratchCanvas","currentCtx","currentTransform","groupCtx","startTransformInverse","mozCurrentTransformInverse","CanvasGraphics_endSMaskGroup","deltaTransform","clearRect","resumeSMaskGroup","CanvasGraphics_save","CanvasGraphics_restore","CanvasGraphics_transform","CanvasGraphics_constructPath","ops","getSinglePixelWidth","xw","yh","bezierCurveTo","CanvasGraphics_closePath","CanvasGraphics_stroke","consumePath","getPattern","CanvasGraphics_closeStroke","CanvasGraphics_fill","isPatternFill","needRestore","CanvasGraphics_eoFill","CanvasGraphics_fillStroke","CanvasGraphics_eoFillStroke","CanvasGraphics_closeFillStroke","CanvasGraphics_closeEOFillStroke","CanvasGraphics_endPath","CanvasGraphics_clip","CanvasGraphics_eoClip","CanvasGraphics_beginText","CanvasGraphics_endText","paths","pendingTextPaths","path","addToPath","CanvasGraphics_setCharSpacing","spacing","CanvasGraphics_setWordSpacing","CanvasGraphics_setHScale","CanvasGraphics_setLeading","CanvasGraphics_setFont","fontRefName","fontObj","fontDirection","isType3Font","bold","italic","typeface","fallbackName","browserFontSize","CanvasGraphics_setTextRenderingMode","mode","CanvasGraphics_setTextRise","rise","CanvasGraphics_moveText","CanvasGraphics_setLeadingMoveText","CanvasGraphics_setTextMatrix","CanvasGraphics_nextLine","paintChar","patternTransform","fillStrokeMode","isAddToPathSet","strokeText","isFontSubpixelAAEnabled","CanvasGraphics_showText","glyphs","showType3Text","glyphsLength","vertical","spacingDir","defaultVMetrics","widthAdvanceScale","simpleFillText","pattern","glyph","restoreNeeded","isSpace","fontChar","accent","scaledX","scaledY","scaledAccentX","scaledAccentY","vmetric","vx","vy","remeasure","measuredWidth","measureText","characterScaleX","isInFont","charWidth","CanvasGraphics_showType3Text","isTextInvisible","spacingLength","charProcOperatorList","operatorListId","transformed","CanvasGraphics_setCharWidth","xWidth","yWidth","CanvasGraphics_setCharWidthAndBounds","llx","lly","urx","ury","getColorN_Pattern","CanvasGraphics_getColorN_Pattern","IR","color","canvasGraphicsFactory","createCanvasGraphics","TilingPattern","getShadingPatternFromIR","CanvasGraphics_setStrokeColorN","arguments","CanvasGraphics_setFillColorN","CanvasGraphics_setStrokeRGBColor","CanvasGraphics_setFillRGBColor","CanvasGraphics_shadingFill","patternIR","inv","bl","br","ul","ur","x0","y0","x1","y1","CanvasGraphics_beginInlineImage","CanvasGraphics_beginImageData","CanvasGraphics_paintFormXObjectBegin","matrix","bbox","CanvasGraphics_paintFormXObjectEnd","CanvasGraphics_beginGroup","group","isolated","knockout","bounds","canvasBounds","floor","CanvasGraphics_endGroup","imageSmoothingEnabled","mozImageSmoothingEnabled","CanvasGraphics_beginAnnotations","CanvasGraphics_endAnnotations","CanvasGraphics_beginAnnotation","CanvasGraphics_endAnnotation","CanvasGraphics_paintImageMaskXObject","img","compiled","maskCanvas","skewX","skewY","positions","CanvasGraphics_paintImageMaskXObjectGroup","images","image","CanvasGraphics_paintImageXObject","CanvasGraphics_paintImageXObjectRepeat","map","w","h","CanvasGraphics_paintInlineImageXObject","widthScale","heightScale","imgToPaint","tmpCanvas","HTMLElement","tmpCtx","paintWidth","paintHeight","tmpCanvasId","newWidth","newHeight","getCanvasPosition","appendImage","CanvasGraphics_paintInlineImageXObjectGroup","entry","CanvasGraphics_paintSolidColorImageMask","CanvasGraphics_markPoint","tag","CanvasGraphics_markPointProps","CanvasGraphics_beginMarkedContent","visible","CanvasGraphics_beginMarkedContentProps","isVisible","isContentVisible","CanvasGraphics_endMarkedContent","CanvasGraphics_beginCompat","CanvasGraphics_endCompat","CanvasGraphics_consumePath","inverse","CanvasGraphics_getCanvasPosition","CanvasGraphics_isContentVisible","op","ShadingIRs","applyBoundingBox","Path2D","region","RadialAxial","fromIR","RadialAxial_fromIR","raw","colorStops","r1","RadialAxial_getPattern","grad","createLinearGradient","createRadialGradient","addColorStop","createMeshCanvas","createMeshCanvasClosure","drawTriangle","c1","c2","c3","colors","rowSize","tmp","x2","y2","x3","y3","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","minY","round","maxY","xa","car","cag","cab","xb","cbr","cbg","cbb","x1_","x2_","drawFigure","figure","ps","cs","verticesPerRow","rows","cols","q","combinesScale","figures","backgroundColor","EXPECTED_SCALE","MAX_PATTERN_SIZE","BORDER_SIZE","boundsWidth","boundsHeight","paddedWidth","paddedHeight","drawFigures","Mesh","Mesh_fromIR","Mesh_getPattern","owner","matrixScale","temporaryPatternCanvas","createPattern","Dummy","Dummy_fromIR","Dummy_fromIR_getPattern","shadingIR","TilingPatternClosure","PaintType","COLORED","UNCOLORED","xstep","ystep","paintType","tilingType","createPatternCanvas","TilinPattern_createPatternCanvas","curMatrixScale","combinedScale","dimx","getSizeAndScale","dimy","graphics","setFillAndStrokeStyleToContext","clipBbox","TilingPattern_getSizeAndScale","realOutputSize","maxSize","bboxWidth","bboxHeight","cssColor","TilingPattern_getPattern","CallbackKind","DATA","ERROR","StreamKind","CANCEL","CANCEL_COMPLETE","CLOSE","ENQUEUE","PULL","PULL_COMPLETE","START_COMPLETE","wrapReason","sourceName","targetName","comObj","callbackId","streamId","streamSinks","streamControllers","callbackCapabilities","actionHandler","_onComObjOnMessage","event","stream","_processStreamMessage","action","cbSourceName","cbTargetName","_createStreamSink","actionName","handler","ah","_postMessage","queueingStrategy","controller","startCapability","startCall","pullCall","cancelCall","isClosed","desiredSize","pull","pullCapability","cancelCapability","self","streamSink","isCancelled","lastDesiredSize","sinkCapability","success","_deleteStreamController","allSettled","_repair","parser","SimpleXMLParser","xmlDocument","parseFromString","_metadataMap","_parse","codes","chars","rdf","nodeName","toLowerCase","firstChild","nextSibling","hasChildNodes","children","childNodes","jj","trim","XMLParserErrorCode","NoError","EndOfDocument","UnterminatedCdat","UnterminatedXmlDeclaration","UnterminatedDoctypeDeclaration","UnterminatedComment","MalformedElement","OutOfMemory","UnterminatedAttributeValue","UnterminatedElement","ElementNeverBegun","isWhitespace","ch","isWhitespaceString","XMLParserBase","_resolveEntities","entity","onResolveEntity","_parseContent","attributes","skipWs","attrName","attrValue","attrEndChar","attrEndIndex","parsed","_parseProcessingInstruction","attrStart","parseXml","ch2","onError","onEndElement","pi","onPi","onComment","onCdata","q2","complexDoctype","doctypeContent","onDoctype","content","onBeginElement","onText","isEmpty","SimpleDOMNode","nodeValue","parentNode","child","_currentFragment","_stack","_errorCode","node","lastElement","OptionalContentGroup","creator","_order","_groups","order","groups","baseState","off","expression","policy","ids","setVisibility","getOrder","from","keys","getGroups","getGroup","_queuedChunks","_progressiveDone","_pdfDataRangeTransport","_isStreamingSupported","_isRangeSupported","_contentLength","_fullRequestReader","_rangeReaders","_onReceiveData","_onProgress","_onProgressiveDone","_enqueue","found","some","_begin","_progressiveDataLength","_loaded","firstReader","_removeRangeReader","queuedChunks","PDFDataTransportStreamReader","PDFDataTransportStreamRangeReader","readers","_stream","_done","_filename","_requests","_headersReady","requestCapability","_end","_queuedChunk","requestsCapability","_enabled","WebGLUtils","tryInitGL","WebGLUtilsClosure","loadShader","gl","shaderType","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","errorMsg","getShaderInfoLog","createVertexShader","VERTEX_SHADER","createFragmentShader","FRAGMENT_SHADER","createProgram","shaders","program","attachShader","linkProgram","linked","getProgramParameter","LINK_STATUS","getProgramInfoLog","createTexture","textureId","activeTexture","texture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","texImage2D","RGBA","UNSIGNED_BYTE","currentGL","currentCanvas","generateGL","premultipliedalpha","smaskVertexShaderCode","smaskFragmentShaderCode","smaskCache","initSmaskGL","vertexShader","fragmentShader","useProgram","resolutionLocation","getUniformLocation","positionLocation","getAttribLocation","backdropLocation","subtypeLocation","texCoordLocation","texLayerLocation","texMaskLocation","texCoordBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","enableVertexAttribArray","vertexAttribPointer","FLOAT","uniform1i","drawingBufferWidth","drawingBufferHeight","uniform2f","uniform4f","TEXTURE0","maskTexture","TEXTURE1","clearColor","BLEND","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","COLOR_BUFFER_BIT","drawArrays","TRIANGLES","flush","deleteTexture","deleteBuffer","figuresVertexShaderCode","figuresFragmentShaderCode","figuresCache","initFiguresGL","scaleLocation","offsetLocation","colorLocation","coordsMap","colorsMap","pIndex","cIndex","col","coordsBuffer","colorsBuffer","AnnotationElementFactory","parameters","annotationType","LinkAnnotationElement","TextAnnotationElement","fieldType","TextWidgetAnnotationElement","radioButton","RadioButtonWidgetAnnotationElement","checkBox","CheckboxWidgetAnnotationElement","PushButtonWidgetAnnotationElement","ChoiceWidgetAnnotationElement","WidgetAnnotationElement","PopupAnnotationElement","FreeTextAnnotationElement","LineAnnotationElement","SquareAnnotationElement","CircleAnnotationElement","PolylineAnnotationElement","CaretAnnotationElement","InkAnnotationElement","PolygonAnnotationElement","HighlightAnnotationElement","UnderlineAnnotationElement","SquigglyAnnotationElement","StrikeOutAnnotationElement","StampAnnotationElement","FileAttachmentAnnotationElement","AnnotationElement","isRenderable","ignoreBorder","linkService","downloadManager","imageResourcesPath","svgFactory","container","_createContainer","transformOrigin","borderStyle","borderWidth","horizontalRadius","horizontalCornerRadius","verticalRadius","verticalCornerRadius","radius","borderRadius","borderBottomStyle","borderColor","_createPopup","trigger","popupElement","PopupElement","modificationDate","contents","hideWrapper","popup","className","newWindow","externalLinkTarget","externalLinkRel","externalLinkEnabled","_bindNamedAction","_bindLink","destination","getDestinationHash","navigateTo","getAnchorUrl","executeNamedAction","hasPopup","alt","dataset","l10nId","l10nArgs","JSON","stringify","hasAppearance","fieldValue","TEXT_ALIGNMENT","storage","multiLine","disabled","readOnly","fieldName","maxLen","maxLength","comb","fieldWidth","combWidth","classList","letterSpacing","verticalAlign","display","_setTextStyle","textAlignment","textAlign","direction","fontWeight","fontStyle","checked","buttonValue","radio","getElementsByName","getAttribute","selectElement","combo","options","multiSelect","multiple","option","optionElement","displayValue","exportValue","selectedIndex","IGNORE_TYPES","parentType","selector","parentId","parentElement","querySelector","parentLeft","parseFloat","parentWidth","pinned","BACKGROUND_ENLIGHT","hideElement","dateObject","toLocaleDateString","toLocaleTimeString","_formatContents","_toggle","_show","_hide","lines","split","line","createTextNode","pin","hasAttribute","removeAttribute","zIndex","unpin","lineCoordinates","append","square","circle","containerClassName","svgElementName","coordinate","vertices","polyline","inkList","inkLists","file","eventBus","dispatch","_download","downloadData","AnnotationLayer","sortedAnnotations","popupAnnotations","annotations","update","renderTextLayer","renderTextLayerClosure","MAX_TEXT_DIVS_TO_RENDER","NonWhitespaceRegexp","isAllWhitespace","test","appendText","geom","textDiv","textDivProperties","canvasWidth","originalTransform","paddingBottom","paddingLeft","paddingRight","paddingTop","_textDivs","_textDivProperties","tx","_viewport","atan2","fontName","PI","fontHeight","fontAscent","ascent","descent","_fontInspectorEnabled","shouldScaleText","absScaleX","absScaleY","_textContentStream","_layoutText","_enhanceTextSelection","angleCos","angleSin","divWidth","divHeight","_bounds","right","bottom","_canceled","textDivs","textDivsLength","_renderingDone","findPositiveMin","ts","t","expand","expanded","expandBounds","divProperties","Float64Array","boxScale","boxes","box","x1New","x2New","expandBoundsLTR","fakeBoundary","Infinity","horizon","boundary","horizonPart","affectedBoundary","maxXNew","xNew","changedHorizon","lastBoundary","useBoundary","unshift","used","concat","TextLayerRenderTask","textContentStream","textContentItemsStr","enhanceTextSelection","_textContent","_container","_textContentItemsStr","_reader","_layoutTextLastFontSize","_layoutTextLastFontFamily","_layoutTextCtx","_renderTimer","TextLayer_cancel","_processItems","styleCache","len","_render","TextLayer_render","timeout","mozOpaque","textItems","textStyles","expandTextDivs","TextLayer_expandTextDivs","expandDivs","transformBuf","paddingBuf","divProps","padding","renderParameters","SVGGraphics","SVG_DEFAULTS","XML_NS","XLINK_NS","convertImgDataToPng","PNG_HEADER","CHUNK_WRAPPER_SIZE","crcTable","crc32","crc","writePngChunk","adler32","deflateSync","literals","deflateSyncUncompressed","Buffer","output","maxBlockLength","deflateBlocks","idat","adler","encode","isMask","bitDepth","colorType","offsetLiterals","offsetBytes","ihdr","pngLength","SVGExtraState","dependencies","activeClipUrl","clipGroup","maskId","opListToTree","opList","opTree","opListElement","fn","pf","toFixed","pm","acos","clipCount","maskCount","shadingCount","transformMatrix","transformStack","extraStack","embedFonts","embeddedFonts","cssStyle","_operatorIdMapping","tgrp","executeOpTree","loadDependencies","getSVG","svgElement","convertOpList","operatorIdMapping","opTreeElement","lineMatrix","xcoords","ycoords","tspan","setAttributeNS","txtElement","txtgrp","lineWidthScale","_setStrokeAttributes","_ensureTransformGroup","addFontStyle","defs","setStrokeAlpha","setFillAlpha","_makeColorN_Pattern","_makeShadingPattern","_makeTilingPattern","tilingId","tx0","ty0","tx1","ty1","xscale","yscale","txstep","tystep","tiling","shadingId","gradient","point0","point1","focalPoint","circlePoint","focalRadius","circleRadius","colorStop","stop","getAttributeNS","clipId","clipPath","clipElement","cloneNode","imgSrc","cliprect","imgEl","definitions","rootGroup","_ensureClipGroup","http","https","fileUriRegex","parseUrl","sourceUrl","parsedUrl","parse","host","isHttp","isFsUrl","_rangeRequestReaders","PDFNodeStreamFsFullReader","PDFNodeStreamFullReader","PDFNodeStreamFsRangeReader","PDFNodeStreamRangeReader","BaseFullReader","_url","_storedError","_disableRange","_rangeChunkSize","_readableStream","_readCapability","_headersCapability","_error","_setReadableStream","BaseRangeReader","createRequestOptions","headers","auth","hostname","method","handleResponse","statusCode","getResponseHeader","allowRangeRequests","suggestedLength","validateRangeRequestCapabilities","extractFilenameFromHeader","_request","_httpHeaders","Range","lstat","stat","createReadStream","returnValues","contentEncoding","contentDisposition","getFilenameFromContentDispositionHeader","createResponseStatusError","validateResponseStatus","needsEncodingFixup","toParamRegExp","rfc2616unquote","rfc5987decode","rfc2047decode","fixupEncoding","rfc2231getparam","attributePattern","flags","textdecode","encoding","decoder","TextDecoder","fatal","decode","err","contentDispositionStr","match","iter","n","quot","part","parts","quotindex","extvalue","encodingend","langvalue","charset","hex","OK_RESPONSE","PARTIAL_CONTENT_RESPONSE","getArrayBuffer","xhr","array","NetworkManager","getXhr","NetworkManager_getXhr","currXhrId","pendingRequests","requestRange","listeners","requestFull","xhrId","pendingRequest","setRequestHeader","expectedStatus","onStateChange","onprogress","onHeadersReceived","onDone","xhrStatus","ok_response_on_range_request","rangeHeader","getRequestXhr","isPendingRequest","abortRequest","_source","_manager","_onRangeRequestReaderClosed","PDFNetworkStreamFullRequestReader","PDFNetworkStreamRangeRequestReader","onClosed","manager","_onHeadersReceived","_onDone","_onError","_fullRequestId","_headersReceivedCapability","_cachedChunks","fullRequestXhrId","fullRequestXhr","lengthComputable","_requestId","_close","createFetchOptions","abortController","signal","credentials","redirect","createHeaders","Headers","PDFFetchStreamReader","PDFFetchStreamRangeReader","_withCredentials","AbortController","_abortController","_headers"],"mappings":"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","file":"pdf.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"pdfjs-dist/build/pdf\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"pdfjs-dist/build/pdf\"] = factory();\n\telse\n\t\troot[\"pdfjs-dist/build/pdf\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __w_pdfjs_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __w_pdfjs_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__w_pdfjs_require__.m = modules;\n\n \t// expose the module cache\n \t__w_pdfjs_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__w_pdfjs_require__.d = function(exports, name, getter) {\n \t\tif(!__w_pdfjs_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__w_pdfjs_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__w_pdfjs_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __w_pdfjs_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__w_pdfjs_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __w_pdfjs_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__w_pdfjs_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__w_pdfjs_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__w_pdfjs_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__w_pdfjs_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __w_pdfjs_require__(__w_pdfjs_require__.s = 0);\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  addLinkAttributes,\n  getFilenameFromUrl,\n  isFetchSupported,\n  isValidFetchUrl,\n  LinkTarget,\n  loadScript,\n  PDFDateString,\n  RenderingCancelledException,\n} from \"./display/display_utils.js\";\nimport {\n  build,\n  getDocument,\n  LoopbackPort,\n  PDFDataRangeTransport,\n  PDFWorker,\n  setPDFNetworkStreamFactory,\n  version,\n} from \"./display/api.js\";\nimport {\n  CMapCompressionType,\n  createObjectURL,\n  createPromiseCapability,\n  createValidAbsoluteUrl,\n  InvalidPDFException,\n  MissingPDFException,\n  OPS,\n  PasswordResponses,\n  PermissionFlag,\n  removeNullCharacters,\n  shadow,\n  UnexpectedResponseException,\n  UNSUPPORTED_FEATURES,\n  Util,\n  VerbosityLevel,\n} from \"./shared/util.js\";\nimport { AnnotationLayer } from \"./display/annotation_layer.js\";\nimport { apiCompatibilityParams } from \"./display/api_compatibility.js\";\nimport { GlobalWorkerOptions } from \"./display/worker_options.js\";\nimport { renderTextLayer } from \"./display/text_layer.js\";\nimport { SVGGraphics } from \"./display/svg.js\";\n\n/* eslint-disable-next-line no-unused-vars */\nconst pdfjsVersion =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_VERSION\") : void 0;\n/* eslint-disable-next-line no-unused-vars */\nconst pdfjsBuild =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_BUILD\") : void 0;\n\nif (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"PRODUCTION\")) {\n  const streamsPromise = Promise.all([\n    import(\"pdfjs/display/network.js\"),\n    import(\"pdfjs/display/fetch_stream.js\"),\n  ]);\n  setPDFNetworkStreamFactory(params => {\n    return streamsPromise.then(streams => {\n      const [{ PDFNetworkStream }, { PDFFetchStream }] = streams;\n      if (isFetchSupported() && isValidFetchUrl(params.url)) {\n        return new PDFFetchStream(params);\n      }\n      return new PDFNetworkStream(params);\n    });\n  });\n} else if (PDFJSDev.test(\"GENERIC\")) {\n  const { isNodeJS } = require(\"./shared/is_node.js\");\n  if (isNodeJS) {\n    const PDFNodeStream = require(\"./display/node_stream.js\").PDFNodeStream;\n    setPDFNetworkStreamFactory(params => {\n      return new PDFNodeStream(params);\n    });\n  } else {\n    const PDFNetworkStream = require(\"./display/network.js\").PDFNetworkStream;\n    let PDFFetchStream;\n    if (isFetchSupported()) {\n      PDFFetchStream = require(\"./display/fetch_stream.js\").PDFFetchStream;\n    }\n    setPDFNetworkStreamFactory(params => {\n      if (PDFFetchStream && isValidFetchUrl(params.url)) {\n        return new PDFFetchStream(params);\n      }\n      return new PDFNetworkStream(params);\n    });\n  }\n} else if (PDFJSDev.test(\"CHROME\")) {\n  const PDFNetworkStream = require(\"./display/network.js\").PDFNetworkStream;\n  let PDFFetchStream;\n  const isChromeWithFetchCredentials = function () {\n    // fetch does not include credentials until Chrome 61.0.3138.0 and later.\n    // https://chromium.googlesource.com/chromium/src/+/2e231cf052ca5e68e22baf0008ac9e5e29121707\n    try {\n      // Indexed properties on window are read-only in Chrome 61.0.3151.0+\n      // https://chromium.googlesource.com/chromium/src.git/+/58ab4a971b06dec13e4edf9de8382ca6847f6190\n      window[999] = 123; // should throw. Note: JS strict mode MUST be enabled.\n      delete window[999];\n      return false;\n    } catch (e) {\n      return true;\n    }\n  };\n  if (isFetchSupported() && isChromeWithFetchCredentials()) {\n    PDFFetchStream = require(\"./display/fetch_stream.js\").PDFFetchStream;\n  }\n  setPDFNetworkStreamFactory(params => {\n    if (PDFFetchStream && isValidFetchUrl(params.url)) {\n      return new PDFFetchStream(params);\n    }\n    return new PDFNetworkStream(params);\n  });\n}\n\nexport {\n  // From \"./display/display_utils.js\":\n  addLinkAttributes,\n  getFilenameFromUrl,\n  LinkTarget,\n  loadScript,\n  PDFDateString,\n  RenderingCancelledException,\n  // From \"./display/api.js\":\n  build,\n  getDocument,\n  LoopbackPort,\n  PDFDataRangeTransport,\n  PDFWorker,\n  version,\n  // From \"./shared/util.js\":\n  CMapCompressionType,\n  createObjectURL,\n  createPromiseCapability,\n  createValidAbsoluteUrl,\n  InvalidPDFException,\n  MissingPDFException,\n  OPS,\n  PasswordResponses,\n  PermissionFlag,\n  removeNullCharacters,\n  shadow,\n  UnexpectedResponseException,\n  UNSUPPORTED_FEATURES,\n  Util,\n  VerbosityLevel,\n  // From \"./display/annotation_layer.js\":\n  AnnotationLayer,\n  // From \"./display/api_compatibility.js\":\n  apiCompatibilityParams,\n  // From \"./display/worker_options.js\":\n  GlobalWorkerOptions,\n  // From \"./display/text_layer.js\":\n  renderTextLayer,\n  // From \"./display/svg.js\":\n  SVGGraphics,\n};\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint no-var: error */\n\nimport {\n  assert,\n  BaseException,\n  CMapCompressionType,\n  isString,\n  removeNullCharacters,\n  stringToBytes,\n  unreachable,\n  Util,\n  warn,\n} from \"../shared/util.js\";\n\nconst DEFAULT_LINK_REL = \"noopener noreferrer nofollow\";\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\n\nclass BaseCanvasFactory {\n  constructor() {\n    if (this.constructor === BaseCanvasFactory) {\n      unreachable(\"Cannot initialize BaseCanvasFactory.\");\n    }\n  }\n\n  create(width, height) {\n    unreachable(\"Abstract method `create` called.\");\n  }\n\n  reset(canvasAndContext, width, height) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n\n  destroy(canvasAndContext) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    // Zeroing the width and height cause Firefox to release graphics\n    // resources immediately, which can greatly reduce memory consumption.\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n}\n\nclass DOMCanvasFactory extends BaseCanvasFactory {\n  constructor({ ownerDocument = globalThis.document } = {}) {\n    super();\n    this._document = ownerDocument;\n  }\n\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    const canvas = this._document.createElement(\"canvas\");\n    const context = canvas.getContext(\"2d\");\n    canvas.width = width;\n    canvas.height = height;\n    return {\n      canvas,\n      context,\n    };\n  }\n}\n\nclass BaseCMapReaderFactory {\n  constructor({ baseUrl = null, isCompressed = false }) {\n    if (this.constructor === BaseCMapReaderFactory) {\n      unreachable(\"Cannot initialize BaseCMapReaderFactory.\");\n    }\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n\n  async fetch({ name }) {\n    if (!this.baseUrl) {\n      throw new Error(\n        'The CMap \"baseUrl\" parameter must be specified, ensure that ' +\n          'the \"cMapUrl\" and \"cMapPacked\" API parameters are provided.'\n      );\n    }\n    if (!name) {\n      throw new Error(\"CMap name must be specified.\");\n    }\n    const url = this.baseUrl + name + (this.isCompressed ? \".bcmap\" : \"\");\n    const compressionType = this.isCompressed\n      ? CMapCompressionType.BINARY\n      : CMapCompressionType.NONE;\n\n    return this._fetchData(url, compressionType).catch(reason => {\n      throw new Error(\n        `Unable to load ${this.isCompressed ? \"binary \" : \"\"}CMap at: ${url}`\n      );\n    });\n  }\n\n  /**\n   * @private\n   */\n  _fetchData(url, compressionType) {\n    unreachable(\"Abstract method `_fetchData` called.\");\n  }\n}\n\nclass DOMCMapReaderFactory extends BaseCMapReaderFactory {\n  _fetchData(url, compressionType) {\n    if (\n      (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n      (isFetchSupported() && isValidFetchUrl(url, document.baseURI))\n    ) {\n      return fetch(url).then(async response => {\n        if (!response.ok) {\n          throw new Error(response.statusText);\n        }\n        let cMapData;\n        if (this.isCompressed) {\n          cMapData = new Uint8Array(await response.arrayBuffer());\n        } else {\n          cMapData = stringToBytes(await response.text());\n        }\n        return { cMapData, compressionType };\n      });\n    }\n\n    // The Fetch API is not supported.\n    return new Promise((resolve, reject) => {\n      const request = new XMLHttpRequest();\n      request.open(\"GET\", url, true);\n\n      if (this.isCompressed) {\n        request.responseType = \"arraybuffer\";\n      }\n      request.onreadystatechange = () => {\n        if (request.readyState !== XMLHttpRequest.DONE) {\n          return;\n        }\n        if (request.status === 200 || request.status === 0) {\n          let cMapData;\n          if (this.isCompressed && request.response) {\n            cMapData = new Uint8Array(request.response);\n          } else if (!this.isCompressed && request.responseText) {\n            cMapData = stringToBytes(request.responseText);\n          }\n          if (cMapData) {\n            resolve({ cMapData, compressionType });\n            return;\n          }\n        }\n        reject(new Error(request.statusText));\n      };\n\n      request.send(null);\n    });\n  }\n}\n\nclass DOMSVGFactory {\n  create(width, height) {\n    assert(width > 0 && height > 0, \"Invalid SVG dimensions\");\n\n    const svg = document.createElementNS(SVG_NS, \"svg:svg\");\n    svg.setAttribute(\"version\", \"1.1\");\n    svg.setAttribute(\"width\", width + \"px\");\n    svg.setAttribute(\"height\", height + \"px\");\n    svg.setAttribute(\"preserveAspectRatio\", \"none\");\n    svg.setAttribute(\"viewBox\", \"0 0 \" + width + \" \" + height);\n\n    return svg;\n  }\n\n  createElement(type) {\n    assert(typeof type === \"string\", \"Invalid SVG element type\");\n\n    return document.createElementNS(SVG_NS, type);\n  }\n}\n\n/**\n * @typedef {Object} PageViewportParameters\n * @property {Array<number>} viewBox - The xMin, yMin, xMax and\n *   yMax coordinates.\n * @property {number} scale - The scale of the viewport.\n * @property {number} rotation - The rotation, in degrees, of the viewport.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset. The\n *   default value is `0`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset. The\n *   default value is `0`.\n * @property {boolean} [dontFlip] - If true, the y-axis will not be flipped.\n *   The default value is `false`.\n */\n\n/**\n * @typedef {Object} PageViewportCloneParameters\n * @property {number} [scale] - The scale, overriding the one in the cloned\n *   viewport. The default value is `this.scale`.\n * @property {number} [rotation] - The rotation, in degrees, overriding the one\n *   in the cloned viewport. The default value is `this.rotation`.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset.\n *   The default value is `this.offsetX`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset.\n *   The default value is `this.offsetY`.\n * @property {boolean} [dontFlip] - If true, the x-axis will not be flipped.\n *   The default value is `false`.\n */\n\n/**\n * PDF page viewport created based on scale, rotation and offset.\n */\nclass PageViewport {\n  /**\n   * @param {PageViewportParameters}\n   */\n  constructor({\n    viewBox,\n    scale,\n    rotation,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false,\n  }) {\n    this.viewBox = viewBox;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n\n    // creating transform to convert pdf coordinate system to the normal\n    // canvas like coordinates taking in account scale and rotation\n    const centerX = (viewBox[2] + viewBox[0]) / 2;\n    const centerY = (viewBox[3] + viewBox[1]) / 2;\n    let rotateA, rotateB, rotateC, rotateD;\n    rotation = rotation % 360;\n    rotation = rotation < 0 ? rotation + 360 : rotation;\n    switch (rotation) {\n      case 180:\n        rotateA = -1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0;\n        rotateB = 1;\n        rotateC = 1;\n        rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0;\n        rotateB = -1;\n        rotateC = -1;\n        rotateD = 0;\n        break;\n      case 0:\n        rotateA = 1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = -1;\n        break;\n      default:\n        throw new Error(\n          \"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\"\n        );\n    }\n\n    if (dontFlip) {\n      rotateC = -rotateC;\n      rotateD = -rotateD;\n    }\n\n    let offsetCanvasX, offsetCanvasY;\n    let width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = Math.abs(viewBox[3] - viewBox[1]) * scale;\n      height = Math.abs(viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = Math.abs(viewBox[2] - viewBox[0]) * scale;\n      height = Math.abs(viewBox[3] - viewBox[1]) * scale;\n    }\n    // creating transform for the following operations:\n    // translate(-centerX, -centerY), rotate and flip vertically,\n    // scale, and translate(offsetCanvasX, offsetCanvasY)\n    this.transform = [\n      rotateA * scale,\n      rotateB * scale,\n      rotateC * scale,\n      rotateD * scale,\n      offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY,\n      offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY,\n    ];\n\n    this.width = width;\n    this.height = height;\n  }\n\n  /**\n   * Clones viewport, with optional additional properties.\n   * @param {PageViewportCloneParameters} [params]\n   * @returns {PageViewport} Cloned viewport.\n   */\n  clone({\n    scale = this.scale,\n    rotation = this.rotation,\n    offsetX = this.offsetX,\n    offsetY = this.offsetY,\n    dontFlip = false,\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.viewBox.slice(),\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip,\n    });\n  }\n\n  /**\n   * Converts PDF point to the viewport coordinates. For examples, useful for\n   * converting PDF location into canvas pixel coordinates.\n   * @param {number} x - The x-coordinate.\n   * @param {number} y - The y-coordinate.\n   * @returns {Object} Object containing `x` and `y` properties of the\n   *   point in the viewport coordinate space.\n   * @see {@link convertToPdfPoint}\n   * @see {@link convertToViewportRectangle}\n   */\n  convertToViewportPoint(x, y) {\n    return Util.applyTransform([x, y], this.transform);\n  }\n\n  /**\n   * Converts PDF rectangle to the viewport coordinates.\n   * @param {Array} rect - The xMin, yMin, xMax and yMax coordinates.\n   * @returns {Array} Array containing corresponding coordinates of the\n   *   rectangle in the viewport coordinate space.\n   * @see {@link convertToViewportPoint}\n   */\n  convertToViewportRectangle(rect) {\n    const topLeft = Util.applyTransform([rect[0], rect[1]], this.transform);\n    const bottomRight = Util.applyTransform([rect[2], rect[3]], this.transform);\n    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n  }\n\n  /**\n   * Converts viewport coordinates to the PDF location. For examples, useful\n   * for converting canvas pixel location into PDF one.\n   * @param {number} x - The x-coordinate.\n   * @param {number} y - The y-coordinate.\n   * @returns {Object} Object containing `x` and `y` properties of the\n   *   point in the PDF coordinate space.\n   * @see {@link convertToViewportPoint}\n   */\n  convertToPdfPoint(x, y) {\n    return Util.applyInverseTransform([x, y], this.transform);\n  }\n}\n\nclass RenderingCancelledException extends BaseException {\n  constructor(msg, type) {\n    super(msg);\n    this.type = type;\n  }\n}\n\nconst LinkTarget = {\n  NONE: 0, // Default value.\n  SELF: 1,\n  BLANK: 2,\n  PARENT: 3,\n  TOP: 4,\n};\n\n/**\n * @typedef ExternalLinkParameters\n * @typedef {Object} ExternalLinkParameters\n * @property {string} url - An absolute URL.\n * @property {LinkTarget} [target] - The link target. The default value is\n *   `LinkTarget.NONE`.\n * @property {string} [rel] - The link relationship. The default value is\n *   `DEFAULT_LINK_REL`.\n * @property {boolean} [enabled] - Whether the link should be enabled. The\n *   default value is true.\n */\n\n/**\n * Adds various attributes (href, title, target, rel) to hyperlinks.\n * @param {HTMLLinkElement} link - The link element.\n * @param {ExternalLinkParameters} params\n */\nfunction addLinkAttributes(link, { url, target, rel, enabled = true } = {}) {\n  assert(\n    url && typeof url === \"string\",\n    'addLinkAttributes: A valid \"url\" parameter must provided.'\n  );\n\n  const urlNullRemoved = removeNullCharacters(url);\n  if (enabled) {\n    link.href = link.title = urlNullRemoved;\n  } else {\n    link.href = \"\";\n    link.title = `Disabled: ${urlNullRemoved}`;\n    link.onclick = () => {\n      return false;\n    };\n  }\n\n  let targetStr = \"\"; // LinkTarget.NONE\n  switch (target) {\n    case LinkTarget.NONE:\n      break;\n    case LinkTarget.SELF:\n      targetStr = \"_self\";\n      break;\n    case LinkTarget.BLANK:\n      targetStr = \"_blank\";\n      break;\n    case LinkTarget.PARENT:\n      targetStr = \"_parent\";\n      break;\n    case LinkTarget.TOP:\n      targetStr = \"_top\";\n      break;\n  }\n  link.target = targetStr;\n\n  link.rel = typeof rel === \"string\" ? rel : DEFAULT_LINK_REL;\n}\n\n/**\n * Gets the file name from a given URL.\n * @param {string} url\n */\nfunction getFilenameFromUrl(url) {\n  const anchor = url.indexOf(\"#\");\n  const query = url.indexOf(\"?\");\n  const end = Math.min(\n    anchor > 0 ? anchor : url.length,\n    query > 0 ? query : url.length\n  );\n  return url.substring(url.lastIndexOf(\"/\", end) + 1, end);\n}\n\nclass StatTimer {\n  constructor() {\n    this.started = Object.create(null);\n    this.times = [];\n  }\n\n  time(name) {\n    if (name in this.started) {\n      warn(`Timer is already running for ${name}`);\n    }\n    this.started[name] = Date.now();\n  }\n\n  timeEnd(name) {\n    if (!(name in this.started)) {\n      warn(`Timer has not been started for ${name}`);\n    }\n    this.times.push({\n      name,\n      start: this.started[name],\n      end: Date.now(),\n    });\n    // Remove timer from started so it can be called again.\n    delete this.started[name];\n  }\n\n  toString() {\n    // Find the longest name for padding purposes.\n    const outBuf = [];\n    let longest = 0;\n    for (const time of this.times) {\n      const name = time.name;\n      if (name.length > longest) {\n        longest = name.length;\n      }\n    }\n    for (const time of this.times) {\n      const duration = time.end - time.start;\n      outBuf.push(`${time.name.padEnd(longest)} ${duration}ms\\n`);\n    }\n    return outBuf.join(\"\");\n  }\n}\n\nfunction isFetchSupported() {\n  return (\n    typeof fetch !== \"undefined\" &&\n    typeof Response !== \"undefined\" &&\n    \"body\" in Response.prototype &&\n    typeof ReadableStream !== \"undefined\"\n  );\n}\n\nfunction isValidFetchUrl(url, baseUrl) {\n  try {\n    const { protocol } = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    // The Fetch API only supports the http/https protocols, and not file/ftp.\n    return protocol === \"http:\" || protocol === \"https:\";\n  } catch (ex) {\n    return false; // `new URL()` will throw on incorrect data.\n  }\n}\n\n/**\n * @param {string} src\n * @returns {Promise<void>}\n */\nfunction loadScript(src) {\n  return new Promise((resolve, reject) => {\n    const script = document.createElement(\"script\");\n    script.src = src;\n\n    script.onload = resolve;\n    script.onerror = function () {\n      reject(new Error(`Cannot load script at: ${script.src}`));\n    };\n    (document.head || document.documentElement).appendChild(script);\n  });\n}\n\n// Deprecated API function -- display regardless of the `verbosity` setting.\nfunction deprecated(details) {\n  console.log(\"Deprecated API usage: \" + details);\n}\n\nlet pdfDateStringRegex;\n\nclass PDFDateString {\n  /**\n   * Convert a PDF date string to a JavaScript `Date` object.\n   *\n   * The PDF date string format is described in section 7.9.4 of the official\n   * PDF 32000-1:2008 specification. However, in the PDF 1.7 reference (sixth\n   * edition) Adobe describes the same format including a trailing apostrophe.\n   * This syntax in incorrect, but Adobe Acrobat creates PDF files that contain\n   * them. We ignore all apostrophes as they are not necessary for date parsing.\n   *\n   * Moreover, Adobe Acrobat doesn't handle changing the date to universal time\n   * and doesn't use the user's time zone (effectively ignoring the HH' and mm'\n   * parts of the date string).\n   *\n   * @param {string} input\n   * @returns {Date|null}\n   */\n  static toDateObject(input) {\n    if (!input || !isString(input)) {\n      return null;\n    }\n\n    // Lazily initialize the regular expression.\n    if (!pdfDateStringRegex) {\n      pdfDateStringRegex = new RegExp(\n        \"^D:\" + // Prefix (required)\n        \"(\\\\d{4})\" + // Year (required)\n        \"(\\\\d{2})?\" + // Month (optional)\n        \"(\\\\d{2})?\" + // Day (optional)\n        \"(\\\\d{2})?\" + // Hour (optional)\n        \"(\\\\d{2})?\" + // Minute (optional)\n        \"(\\\\d{2})?\" + // Second (optional)\n        \"([Z|+|-])?\" + // Universal time relation (optional)\n        \"(\\\\d{2})?\" + // Offset hour (optional)\n        \"'?\" + // Splitting apostrophe (optional)\n        \"(\\\\d{2})?\" + // Offset minute (optional)\n          \"'?\" // Trailing apostrophe (optional)\n      );\n    }\n\n    // Optional fields that don't satisfy the requirements from the regular\n    // expression (such as incorrect digit counts or numbers that are out of\n    // range) will fall back the defaults from the specification.\n    const matches = pdfDateStringRegex.exec(input);\n    if (!matches) {\n      return null;\n    }\n\n    // JavaScript's `Date` object expects the month to be between 0 and 11\n    // instead of 1 and 12, so we have to correct for that.\n    const year = parseInt(matches[1], 10);\n    let month = parseInt(matches[2], 10);\n    month = month >= 1 && month <= 12 ? month - 1 : 0;\n    let day = parseInt(matches[3], 10);\n    day = day >= 1 && day <= 31 ? day : 1;\n    let hour = parseInt(matches[4], 10);\n    hour = hour >= 0 && hour <= 23 ? hour : 0;\n    let minute = parseInt(matches[5], 10);\n    minute = minute >= 0 && minute <= 59 ? minute : 0;\n    let second = parseInt(matches[6], 10);\n    second = second >= 0 && second <= 59 ? second : 0;\n    const universalTimeRelation = matches[7] || \"Z\";\n    let offsetHour = parseInt(matches[8], 10);\n    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n    let offsetMinute = parseInt(matches[9], 10) || 0;\n    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n\n    // Universal time relation 'Z' means that the local time is equal to the\n    // universal time, whereas the relations '+'/'-' indicate that the local\n    // time is later respectively earlier than the universal time. Every date\n    // is normalized to universal time.\n    if (universalTimeRelation === \"-\") {\n      hour += offsetHour;\n      minute += offsetMinute;\n    } else if (universalTimeRelation === \"+\") {\n      hour -= offsetHour;\n      minute -= offsetMinute;\n    }\n\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n  }\n}\n\nexport {\n  PageViewport,\n  RenderingCancelledException,\n  addLinkAttributes,\n  getFilenameFromUrl,\n  LinkTarget,\n  DEFAULT_LINK_REL,\n  BaseCanvasFactory,\n  DOMCanvasFactory,\n  BaseCMapReaderFactory,\n  DOMCMapReaderFactory,\n  DOMSVGFactory,\n  StatTimer,\n  isFetchSupported,\n  isValidFetchUrl,\n  loadScript,\n  deprecated,\n  PDFDateString,\n};\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint no-var: error */\n\nimport \"./compatibility.js\";\n\nconst IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0];\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\n\n// Permission flags from Table 22, Section 7.6.3.2 of the PDF specification.\nconst PermissionFlag = {\n  PRINT: 0x04,\n  MODIFY_CONTENTS: 0x08,\n  COPY: 0x10,\n  MODIFY_ANNOTATIONS: 0x20,\n  FILL_INTERACTIVE_FORMS: 0x100,\n  COPY_FOR_ACCESSIBILITY: 0x200,\n  ASSEMBLE: 0x400,\n  PRINT_HIGH_QUALITY: 0x800,\n};\n\nconst TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4,\n};\n\nconst ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3,\n};\n\nconst AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26,\n};\n\nconst AnnotationStateModelType = {\n  MARKED: \"Marked\",\n  REVIEW: \"Review\",\n};\n\nconst AnnotationMarkedState = {\n  MARKED: \"Marked\",\n  UNMARKED: \"Unmarked\",\n};\n\nconst AnnotationReviewState = {\n  ACCEPTED: \"Accepted\",\n  REJECTED: \"Rejected\",\n  CANCELLED: \"Cancelled\",\n  COMPLETED: \"Completed\",\n  NONE: \"None\",\n};\n\nconst AnnotationReplyType = {\n  GROUP: \"Group\",\n  REPLY: \"R\",\n};\n\nconst AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200,\n};\n\nconst AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000,\n};\n\nconst AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5,\n};\n\nconst StreamType = {\n  UNKNOWN: \"UNKNOWN\",\n  FLATE: \"FLATE\",\n  LZW: \"LZW\",\n  DCT: \"DCT\",\n  JPX: \"JPX\",\n  JBIG: \"JBIG\",\n  A85: \"A85\",\n  AHX: \"AHX\",\n  CCF: \"CCF\",\n  RLX: \"RLX\", // PDF short name is 'RL', but telemetry requires three chars.\n};\n\nconst FontType = {\n  UNKNOWN: \"UNKNOWN\",\n  TYPE1: \"TYPE1\",\n  TYPE1C: \"TYPE1C\",\n  CIDFONTTYPE0: \"CIDFONTTYPE0\",\n  CIDFONTTYPE0C: \"CIDFONTTYPE0C\",\n  TRUETYPE: \"TRUETYPE\",\n  CIDFONTTYPE2: \"CIDFONTTYPE2\",\n  TYPE3: \"TYPE3\",\n  OPENTYPE: \"OPENTYPE\",\n  TYPE0: \"TYPE0\",\n  MMTYPE1: \"MMTYPE1\",\n};\n\nconst VerbosityLevel = {\n  ERRORS: 0,\n  WARNINGS: 1,\n  INFOS: 5,\n};\n\nconst CMapCompressionType = {\n  NONE: 0,\n  BINARY: 1,\n  STREAM: 2,\n};\n\n// All the possible operations for an operator list.\nconst OPS = {\n  // Intentionally start from 1 so it is easy to spot bad operators that will be\n  // 0's.\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  beginAnnotations: 78,\n  endAnnotations: 79,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  paintJpegXObject: 82,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91,\n};\n\nconst UNSUPPORTED_FEATURES = {\n  /** @deprecated unused */\n  unknown: \"unknown\",\n  forms: \"forms\",\n  javaScript: \"javaScript\",\n  smask: \"smask\",\n  shadingPattern: \"shadingPattern\",\n  /** @deprecated unused */\n  font: \"font\",\n  errorTilingPattern: \"errorTilingPattern\",\n  errorExtGState: \"errorExtGState\",\n  errorXObject: \"errorXObject\",\n  errorFontLoadType3: \"errorFontLoadType3\",\n  errorFontState: \"errorFontState\",\n  errorFontMissing: \"errorFontMissing\",\n  errorFontTranslate: \"errorFontTranslate\",\n  errorColorSpace: \"errorColorSpace\",\n  errorOperatorList: \"errorOperatorList\",\n  errorFontToUnicode: \"errorFontToUnicode\",\n  errorFontLoadNative: \"errorFontLoadNative\",\n  errorFontGetPath: \"errorFontGetPath\",\n  errorMarkedContent: \"errorMarkedContent\",\n};\n\nconst PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2,\n};\n\nlet verbosity = VerbosityLevel.WARNINGS;\n\nfunction setVerbosityLevel(level) {\n  if (Number.isInteger(level)) {\n    verbosity = level;\n  }\n}\n\nfunction getVerbosityLevel() {\n  return verbosity;\n}\n\n// A notice for devs. These are good for things that are helpful to devs, such\n// as warning that Workers were disabled, which is important to devs but not\n// end users.\nfunction info(msg) {\n  if (verbosity >= VerbosityLevel.INFOS) {\n    console.log(`Info: ${msg}`);\n  }\n}\n\n// Non-fatal warnings.\nfunction warn(msg) {\n  if (verbosity >= VerbosityLevel.WARNINGS) {\n    console.log(`Warning: ${msg}`);\n  }\n}\n\nfunction unreachable(msg) {\n  throw new Error(msg);\n}\n\nfunction assert(cond, msg) {\n  if (!cond) {\n    unreachable(msg);\n  }\n}\n\n// Checks if URLs have the same origin. For non-HTTP based URLs, returns false.\nfunction isSameOrigin(baseUrl, otherUrl) {\n  let base;\n  try {\n    base = new URL(baseUrl);\n    if (!base.origin || base.origin === \"null\") {\n      return false; // non-HTTP url\n    }\n  } catch (e) {\n    return false;\n  }\n\n  const other = new URL(otherUrl, base);\n  return base.origin === other.origin;\n}\n\n// Checks if URLs use one of the allowed protocols, e.g. to avoid XSS.\nfunction _isValidProtocol(url) {\n  if (!url) {\n    return false;\n  }\n  switch (url.protocol) {\n    case \"http:\":\n    case \"https:\":\n    case \"ftp:\":\n    case \"mailto:\":\n    case \"tel:\":\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * Attempts to create a valid absolute URL.\n *\n * @param {URL|string} url - An absolute, or relative, URL.\n * @param {URL|string} baseUrl - An absolute URL.\n * @returns Either a valid {URL}, or `null` otherwise.\n */\nfunction createValidAbsoluteUrl(url, baseUrl) {\n  if (!url) {\n    return null;\n  }\n  try {\n    const absoluteUrl = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    if (_isValidProtocol(absoluteUrl)) {\n      return absoluteUrl;\n    }\n  } catch (ex) {\n    /* `new URL()` will throw on incorrect data. */\n  }\n  return null;\n}\n\nfunction shadow(obj, prop, value) {\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: true,\n    configurable: true,\n    writable: false,\n  });\n  return value;\n}\n\n/**\n * @type {any}\n */\nconst BaseException = (function BaseExceptionClosure() {\n  // eslint-disable-next-line no-shadow\n  function BaseException(message) {\n    if (this.constructor === BaseException) {\n      unreachable(\"Cannot initialize BaseException.\");\n    }\n    this.message = message;\n    this.name = this.constructor.name;\n  }\n  BaseException.prototype = new Error();\n  BaseException.constructor = BaseException;\n\n  return BaseException;\n})();\n\nclass PasswordException extends BaseException {\n  constructor(msg, code) {\n    super(msg);\n    this.code = code;\n  }\n}\n\nclass UnknownErrorException extends BaseException {\n  constructor(msg, details) {\n    super(msg);\n    this.details = details;\n  }\n}\n\nclass InvalidPDFException extends BaseException {}\n\nclass MissingPDFException extends BaseException {}\n\nclass UnexpectedResponseException extends BaseException {\n  constructor(msg, status) {\n    super(msg);\n    this.status = status;\n  }\n}\n\n/**\n * Error caused during parsing PDF data.\n */\nclass FormatError extends BaseException {}\n\n/**\n * Error used to indicate task cancellation.\n */\nclass AbortException extends BaseException {}\n\nconst NullCharactersRegExp = /\\x00/g;\n\n/**\n * @param {string} str\n */\nfunction removeNullCharacters(str) {\n  if (typeof str !== \"string\") {\n    warn(\"The argument for removeNullCharacters must be a string.\");\n    return str;\n  }\n  return str.replace(NullCharactersRegExp, \"\");\n}\n\nfunction bytesToString(bytes) {\n  assert(\n    bytes !== null && typeof bytes === \"object\" && bytes.length !== undefined,\n    \"Invalid argument for bytesToString\"\n  );\n  const length = bytes.length;\n  const MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  const strBuf = [];\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    const chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join(\"\");\n}\n\nfunction stringToBytes(str) {\n  assert(typeof str === \"string\", \"Invalid argument for stringToBytes\");\n  const length = str.length;\n  const bytes = new Uint8Array(length);\n  for (let i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xff;\n  }\n  return bytes;\n}\n\n/**\n * Gets length of the array (Array, Uint8Array, or string) in bytes.\n * @param {Array<any>|Uint8Array|string} arr\n * @returns {number}\n */\nfunction arrayByteLength(arr) {\n  if (arr.length !== undefined) {\n    return arr.length;\n  }\n  assert(arr.byteLength !== undefined, \"arrayByteLength - invalid argument.\");\n  return arr.byteLength;\n}\n\n/**\n * Combines array items (arrays) into single Uint8Array object.\n * @param {Array<Array<any>|Uint8Array|string>} arr - the array of the arrays\n *   (Array, Uint8Array, or string).\n * @returns {Uint8Array}\n */\nfunction arraysToBytes(arr) {\n  const length = arr.length;\n  // Shortcut: if first and only item is Uint8Array, return it.\n  if (length === 1 && arr[0] instanceof Uint8Array) {\n    return arr[0];\n  }\n  let resultLength = 0;\n  for (let i = 0; i < length; i++) {\n    resultLength += arrayByteLength(arr[i]);\n  }\n  let pos = 0;\n  const data = new Uint8Array(resultLength);\n  for (let i = 0; i < length; i++) {\n    let item = arr[i];\n    if (!(item instanceof Uint8Array)) {\n      if (typeof item === \"string\") {\n        item = stringToBytes(item);\n      } else {\n        item = new Uint8Array(item);\n      }\n    }\n    const itemLength = item.byteLength;\n    data.set(item, pos);\n    pos += itemLength;\n  }\n  return data;\n}\n\nfunction string32(value) {\n  return String.fromCharCode(\n    (value >> 24) & 0xff,\n    (value >> 16) & 0xff,\n    (value >> 8) & 0xff,\n    value & 0xff\n  );\n}\n\n// Checks the endianness of the platform.\nfunction isLittleEndian() {\n  const buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return view32[0] === 1;\n}\nconst IsLittleEndianCached = {\n  get value() {\n    return shadow(this, \"value\", isLittleEndian());\n  },\n};\n\n// Checks if it's possible to eval JS expressions.\nfunction isEvalSupported() {\n  try {\n    new Function(\"\"); // eslint-disable-line no-new, no-new-func\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nconst IsEvalSupportedCached = {\n  get value() {\n    return shadow(this, \"value\", isEvalSupported());\n  },\n};\n\nconst rgbBuf = [\"rgb(\", 0, \",\", 0, \",\", 0, \")\"];\n\nclass Util {\n  // makeCssRgb() can be called thousands of times. Using ´rgbBuf` avoids\n  // creating many intermediate strings.\n  static makeCssRgb(r, g, b) {\n    rgbBuf[1] = r;\n    rgbBuf[3] = g;\n    rgbBuf[5] = b;\n    return rgbBuf.join(\"\");\n  }\n\n  // Concatenates two transformation matrices together and returns the result.\n  static transform(m1, m2) {\n    return [\n      m1[0] * m2[0] + m1[2] * m2[1],\n      m1[1] * m2[0] + m1[3] * m2[1],\n      m1[0] * m2[2] + m1[2] * m2[3],\n      m1[1] * m2[2] + m1[3] * m2[3],\n      m1[0] * m2[4] + m1[2] * m2[5] + m1[4],\n      m1[1] * m2[4] + m1[3] * m2[5] + m1[5],\n    ];\n  }\n\n  // For 2d affine transforms\n  static applyTransform(p, m) {\n    const xt = p[0] * m[0] + p[1] * m[2] + m[4];\n    const yt = p[0] * m[1] + p[1] * m[3] + m[5];\n    return [xt, yt];\n  }\n\n  static applyInverseTransform(p, m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    const xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    const yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n    return [xt, yt];\n  }\n\n  // Applies the transform to the rectangle and finds the minimum axially\n  // aligned bounding box.\n  static getAxialAlignedBoundingBox(r, m) {\n    const p1 = Util.applyTransform(r, m);\n    const p2 = Util.applyTransform(r.slice(2, 4), m);\n    const p3 = Util.applyTransform([r[0], r[3]], m);\n    const p4 = Util.applyTransform([r[2], r[1]], m);\n    return [\n      Math.min(p1[0], p2[0], p3[0], p4[0]),\n      Math.min(p1[1], p2[1], p3[1], p4[1]),\n      Math.max(p1[0], p2[0], p3[0], p4[0]),\n      Math.max(p1[1], p2[1], p3[1], p4[1]),\n    ];\n  }\n\n  static inverseTransform(m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    return [\n      m[3] / d,\n      -m[1] / d,\n      -m[2] / d,\n      m[0] / d,\n      (m[2] * m[5] - m[4] * m[3]) / d,\n      (m[4] * m[1] - m[5] * m[0]) / d,\n    ];\n  }\n\n  // Apply a generic 3d matrix M on a 3-vector v:\n  //   | a b c |   | X |\n  //   | d e f | x | Y |\n  //   | g h i |   | Z |\n  // M is assumed to be serialized as [a,b,c,d,e,f,g,h,i],\n  // with v as [X,Y,Z]\n  static apply3dTransform(m, v) {\n    return [\n      m[0] * v[0] + m[1] * v[1] + m[2] * v[2],\n      m[3] * v[0] + m[4] * v[1] + m[5] * v[2],\n      m[6] * v[0] + m[7] * v[1] + m[8] * v[2],\n    ];\n  }\n\n  // This calculation uses Singular Value Decomposition.\n  // The SVD can be represented with formula A = USV. We are interested in the\n  // matrix S here because it represents the scale values.\n  static singularValueDecompose2dScale(m) {\n    const transpose = [m[0], m[2], m[1], m[3]];\n\n    // Multiply matrix m with its transpose.\n    const a = m[0] * transpose[0] + m[1] * transpose[2];\n    const b = m[0] * transpose[1] + m[1] * transpose[3];\n    const c = m[2] * transpose[0] + m[3] * transpose[2];\n    const d = m[2] * transpose[1] + m[3] * transpose[3];\n\n    // Solve the second degree polynomial to get roots.\n    const first = (a + d) / 2;\n    const second = Math.sqrt((a + d) * (a + d) - 4 * (a * d - c * b)) / 2;\n    const sx = first + second || 1;\n    const sy = first - second || 1;\n\n    // Scale values are the square roots of the eigenvalues.\n    return [Math.sqrt(sx), Math.sqrt(sy)];\n  }\n\n  // Normalize rectangle rect=[x1, y1, x2, y2] so that (x1,y1) < (x2,y2)\n  // For coordinate systems whose origin lies in the bottom-left, this\n  // means normalization to (BL,TR) ordering. For systems with origin in the\n  // top-left, this means (TL,BR) ordering.\n  static normalizeRect(rect) {\n    const r = rect.slice(0); // clone rect\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  }\n\n  // Returns a rectangle [x1, y1, x2, y2] corresponding to the\n  // intersection of rect1 and rect2. If no intersection, returns 'false'\n  // The rectangle coordinates of rect1, rect2 should be [x1, y1, x2, y2]\n  static intersect(rect1, rect2) {\n    function compare(a, b) {\n      return a - b;\n    }\n\n    // Order points along the axes\n    const orderedX = [rect1[0], rect1[2], rect2[0], rect2[2]].sort(compare);\n    const orderedY = [rect1[1], rect1[3], rect2[1], rect2[3]].sort(compare);\n    const result = [];\n\n    rect1 = Util.normalizeRect(rect1);\n    rect2 = Util.normalizeRect(rect2);\n\n    // X: first and second points belong to different rectangles?\n    if (\n      (orderedX[0] === rect1[0] && orderedX[1] === rect2[0]) ||\n      (orderedX[0] === rect2[0] && orderedX[1] === rect1[0])\n    ) {\n      // Intersection must be between second and third points\n      result[0] = orderedX[1];\n      result[2] = orderedX[2];\n    } else {\n      return null;\n    }\n\n    // Y: first and second points belong to different rectangles?\n    if (\n      (orderedY[0] === rect1[1] && orderedY[1] === rect2[1]) ||\n      (orderedY[0] === rect2[1] && orderedY[1] === rect1[1])\n    ) {\n      // Intersection must be between second and third points\n      result[1] = orderedY[1];\n      result[3] = orderedY[2];\n    } else {\n      return null;\n    }\n\n    return result;\n  }\n}\n\n// prettier-ignore\nconst PDFStringTranslateTable = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0x2D8, 0x2C7, 0x2C6, 0x2D9, 0x2DD, 0x2DB, 0x2DA, 0x2DC, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014,\n  0x2013, 0x192, 0x2044, 0x2039, 0x203A, 0x2212, 0x2030, 0x201E, 0x201C,\n  0x201D, 0x2018, 0x2019, 0x201A, 0x2122, 0xFB01, 0xFB02, 0x141, 0x152, 0x160,\n  0x178, 0x17D, 0x131, 0x142, 0x153, 0x161, 0x17E, 0, 0x20AC\n];\n\nfunction stringToPDFString(str) {\n  const length = str.length,\n    strBuf = [];\n  if (str[0] === \"\\xFE\" && str[1] === \"\\xFF\") {\n    // UTF16BE BOM\n    for (let i = 2; i < length; i += 2) {\n      strBuf.push(\n        String.fromCharCode((str.charCodeAt(i) << 8) | str.charCodeAt(i + 1))\n      );\n    }\n  } else if (str[0] === \"\\xFF\" && str[1] === \"\\xFE\") {\n    // UTF16LE BOM\n    for (let i = 2; i < length; i += 2) {\n      strBuf.push(\n        String.fromCharCode((str.charCodeAt(i + 1) << 8) | str.charCodeAt(i))\n      );\n    }\n  } else {\n    for (let i = 0; i < length; ++i) {\n      const code = PDFStringTranslateTable[str.charCodeAt(i)];\n      strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n    }\n  }\n  return strBuf.join(\"\");\n}\n\nfunction escapeString(str) {\n  // replace \"(\", \")\" and \"\\\" by \"\\(\", \"\\)\" and \"\\\\\"\n  // in order to write it in a PDF file.\n  return str.replace(/([\\(\\)\\\\])/g, \"\\\\$1\");\n}\n\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\n\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\n\nfunction isBool(v) {\n  return typeof v === \"boolean\";\n}\n\nfunction isNum(v) {\n  return typeof v === \"number\";\n}\n\nfunction isString(v) {\n  return typeof v === \"string\";\n}\n\nfunction isArrayBuffer(v) {\n  return typeof v === \"object\" && v !== null && v.byteLength !== undefined;\n}\n\nfunction isArrayEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  return arr1.every(function (element, index) {\n    return element === arr2[index];\n  });\n}\n\nfunction getModificationDate(date = new Date(Date.now())) {\n  const buffer = [\n    date.getUTCFullYear().toString(),\n    (date.getUTCMonth() + 1).toString().padStart(2, \"0\"),\n    (date.getUTCDate() + 1).toString().padStart(2, \"0\"),\n    date.getUTCHours().toString().padStart(2, \"0\"),\n    date.getUTCMinutes().toString().padStart(2, \"0\"),\n    date.getUTCSeconds().toString().padStart(2, \"0\"),\n  ];\n\n  return buffer.join(\"\");\n}\n\n/**\n * Promise Capability object.\n *\n * @typedef {Object} PromiseCapability\n * @property {Promise<any>} promise - A Promise object.\n * @property {boolean} settled - If the Promise has been fulfilled/rejected.\n * @property {function} resolve - Fulfills the Promise.\n * @property {function} reject - Rejects the Promise.\n */\n\n/**\n * Creates a promise capability object.\n * @alias createPromiseCapability\n *\n * @returns {PromiseCapability}\n */\nfunction createPromiseCapability() {\n  const capability = Object.create(null);\n  let isSettled = false;\n\n  Object.defineProperty(capability, \"settled\", {\n    get() {\n      return isSettled;\n    },\n  });\n  capability.promise = new Promise(function (resolve, reject) {\n    capability.resolve = function (data) {\n      isSettled = true;\n      resolve(data);\n    };\n    capability.reject = function (reason) {\n      isSettled = true;\n      reject(reason);\n    };\n  });\n  return capability;\n}\n\nconst createObjectURL = (function createObjectURLClosure() {\n  // Blob/createObjectURL is not available, falling back to data schema.\n  const digits =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\n  // eslint-disable-next-line no-shadow\n  return function createObjectURL(data, contentType, forceDataSchema = false) {\n    if (!forceDataSchema && URL.createObjectURL) {\n      const blob = new Blob([data], { type: contentType });\n      return URL.createObjectURL(blob);\n    }\n\n    let buffer = `data:${contentType};base64,`;\n    for (let i = 0, ii = data.length; i < ii; i += 3) {\n      const b1 = data[i] & 0xff;\n      const b2 = data[i + 1] & 0xff;\n      const b3 = data[i + 2] & 0xff;\n      const d1 = b1 >> 2,\n        d2 = ((b1 & 3) << 4) | (b2 >> 4);\n      const d3 = i + 1 < ii ? ((b2 & 0xf) << 2) | (b3 >> 6) : 64;\n      const d4 = i + 2 < ii ? b3 & 0x3f : 64;\n      buffer += digits[d1] + digits[d2] + digits[d3] + digits[d4];\n    }\n    return buffer;\n  };\n})();\n\nexport {\n  BaseException,\n  FONT_IDENTITY_MATRIX,\n  IDENTITY_MATRIX,\n  OPS,\n  VerbosityLevel,\n  UNSUPPORTED_FEATURES,\n  AnnotationBorderStyleType,\n  AnnotationFieldFlag,\n  AnnotationFlag,\n  AnnotationMarkedState,\n  AnnotationReplyType,\n  AnnotationReviewState,\n  AnnotationStateModelType,\n  AnnotationType,\n  FontType,\n  ImageKind,\n  CMapCompressionType,\n  AbortException,\n  InvalidPDFException,\n  MissingPDFException,\n  PasswordException,\n  PasswordResponses,\n  PermissionFlag,\n  StreamType,\n  TextRenderingMode,\n  UnexpectedResponseException,\n  UnknownErrorException,\n  Util,\n  FormatError,\n  arrayByteLength,\n  arraysToBytes,\n  assert,\n  bytesToString,\n  createPromiseCapability,\n  createObjectURL,\n  escapeString,\n  getModificationDate,\n  getVerbosityLevel,\n  info,\n  isArrayBuffer,\n  isArrayEqual,\n  isBool,\n  isNum,\n  isString,\n  isSameOrigin,\n  createValidAbsoluteUrl,\n  IsLittleEndianCached,\n  IsEvalSupportedCached,\n  removeNullCharacters,\n  setVerbosityLevel,\n  shadow,\n  string32,\n  stringToBytes,\n  stringToPDFString,\n  stringToUTF8String,\n  utf8StringToString,\n  warn,\n  unreachable,\n};\n","/* Copyright 2017 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint no-var: error */\n\nimport { isNodeJS } from \"./is_node.js\";\n\n// Skip compatibility checks for modern builds and if we already ran the module.\nif (\n  (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"SKIP_BABEL\")) &&\n  (typeof globalThis === \"undefined\" || !globalThis._pdfjsCompatibilityChecked)\n) {\n  // Provides support for globalThis in legacy browsers.\n  // Support: IE11/Edge, Opera\n  if (typeof globalThis === \"undefined\" || globalThis.Math !== Math) {\n    // eslint-disable-next-line no-global-assign\n    globalThis = require(\"core-js/es/global-this\");\n  }\n  globalThis._pdfjsCompatibilityChecked = true;\n\n  const hasDOM = typeof window === \"object\" && typeof document === \"object\";\n  const userAgent =\n    (typeof navigator !== \"undefined\" && navigator.userAgent) || \"\";\n  const isIE = /Trident/.test(userAgent);\n\n  // Support: Node.js\n  (function checkNodeBtoa() {\n    if (globalThis.btoa || !isNodeJS) {\n      return;\n    }\n    globalThis.btoa = function (chars) {\n      // eslint-disable-next-line no-undef\n      return Buffer.from(chars, \"binary\").toString(\"base64\");\n    };\n  })();\n\n  // Support: Node.js\n  (function checkNodeAtob() {\n    if (globalThis.atob || !isNodeJS) {\n      return;\n    }\n    globalThis.atob = function (input) {\n      // eslint-disable-next-line no-undef\n      return Buffer.from(input, \"base64\").toString(\"binary\");\n    };\n  })();\n\n  // Provides support for ChildNode.remove in legacy browsers.\n  // Support: IE.\n  (function checkChildNodeRemove() {\n    if (!hasDOM) {\n      return;\n    }\n    if (typeof Element.prototype.remove !== \"undefined\") {\n      return;\n    }\n    Element.prototype.remove = function () {\n      if (this.parentNode) {\n        // eslint-disable-next-line mozilla/avoid-removeChild\n        this.parentNode.removeChild(this);\n      }\n    };\n  })();\n\n  // Provides support for DOMTokenList.prototype.{add, remove}, with more than\n  // one parameter, in legacy browsers.\n  // Support: IE\n  (function checkDOMTokenListAddRemove() {\n    if (!hasDOM || isNodeJS) {\n      return;\n    }\n    const div = document.createElement(\"div\");\n    div.classList.add(\"testOne\", \"testTwo\");\n\n    if (\n      div.classList.contains(\"testOne\") === true &&\n      div.classList.contains(\"testTwo\") === true\n    ) {\n      return;\n    }\n    const OriginalDOMTokenListAdd = DOMTokenList.prototype.add;\n    const OriginalDOMTokenListRemove = DOMTokenList.prototype.remove;\n\n    DOMTokenList.prototype.add = function (...tokens) {\n      for (const token of tokens) {\n        OriginalDOMTokenListAdd.call(this, token);\n      }\n    };\n    DOMTokenList.prototype.remove = function (...tokens) {\n      for (const token of tokens) {\n        OriginalDOMTokenListRemove.call(this, token);\n      }\n    };\n  })();\n\n  // Provides support for DOMTokenList.prototype.toggle, with the optional\n  // \"force\" parameter, in legacy browsers.\n  // Support: IE\n  (function checkDOMTokenListToggle() {\n    if (!hasDOM || isNodeJS) {\n      return;\n    }\n    const div = document.createElement(\"div\");\n    if (div.classList.toggle(\"test\", 0) === false) {\n      return;\n    }\n\n    DOMTokenList.prototype.toggle = function (token) {\n      const force =\n        arguments.length > 1 ? !!arguments[1] : !this.contains(token);\n      return this[force ? \"add\" : \"remove\"](token), force;\n    };\n  })();\n\n  // Provides support for window.history.{pushState, replaceState}, with the\n  // `url` parameter set to `undefined`, without breaking the document URL.\n  // Support: IE\n  (function checkWindowHistoryPushStateReplaceState() {\n    if (!hasDOM || !isIE) {\n      return;\n    }\n    const OriginalPushState = window.history.pushState;\n    const OriginalReplaceState = window.history.replaceState;\n\n    window.history.pushState = function (state, title, url) {\n      const args = url === undefined ? [state, title] : [state, title, url];\n      OriginalPushState.apply(this, args);\n    };\n    window.history.replaceState = function (state, title, url) {\n      const args = url === undefined ? [state, title] : [state, title, url];\n      OriginalReplaceState.apply(this, args);\n    };\n  })();\n\n  // Provides support for String.prototype.startsWith in legacy browsers.\n  // Support: IE, Chrome<41\n  (function checkStringStartsWith() {\n    if (String.prototype.startsWith) {\n      return;\n    }\n    require(\"core-js/es/string/starts-with.js\");\n  })();\n\n  // Provides support for String.prototype.endsWith in legacy browsers.\n  // Support: IE, Chrome<41\n  (function checkStringEndsWith() {\n    if (String.prototype.endsWith) {\n      return;\n    }\n    require(\"core-js/es/string/ends-with.js\");\n  })();\n\n  // Provides support for String.prototype.includes in legacy browsers.\n  // Support: IE, Chrome<41\n  (function checkStringIncludes() {\n    if (String.prototype.includes) {\n      return;\n    }\n    require(\"core-js/es/string/includes.js\");\n  })();\n\n  // Provides support for Array.prototype.includes in legacy browsers.\n  // Support: IE, Chrome<47\n  (function checkArrayIncludes() {\n    if (Array.prototype.includes) {\n      return;\n    }\n    require(\"core-js/es/array/includes.js\");\n  })();\n\n  // Provides support for Array.from in legacy browsers.\n  // Support: IE\n  (function checkArrayFrom() {\n    if (Array.from) {\n      return;\n    }\n    require(\"core-js/es/array/from.js\");\n  })();\n\n  // Provides support for Object.assign in legacy browsers.\n  // Support: IE\n  (function checkObjectAssign() {\n    if (Object.assign) {\n      return;\n    }\n    require(\"core-js/es/object/assign.js\");\n  })();\n\n  // Provides support for Object.fromEntries in legacy browsers.\n  // Support: IE, Chrome<73\n  (function checkObjectFromEntries() {\n    if (Object.fromEntries) {\n      return;\n    }\n    require(\"core-js/es/object/from-entries.js\");\n  })();\n\n  // Provides support for Math.log2 in legacy browsers.\n  // Support: IE, Chrome<38\n  (function checkMathLog2() {\n    if (Math.log2) {\n      return;\n    }\n    Math.log2 = require(\"core-js/es/math/log2.js\");\n  })();\n\n  // Provides support for Number.isNaN in legacy browsers.\n  // Support: IE.\n  (function checkNumberIsNaN() {\n    if (Number.isNaN) {\n      return;\n    }\n    Number.isNaN = require(\"core-js/es/number/is-nan.js\");\n  })();\n\n  // Provides support for Number.isInteger in legacy browsers.\n  // Support: IE, Chrome<34\n  (function checkNumberIsInteger() {\n    if (Number.isInteger) {\n      return;\n    }\n    Number.isInteger = require(\"core-js/es/number/is-integer.js\");\n  })();\n\n  // Provides support for TypedArray.prototype.slice in legacy browsers.\n  // Support: IE\n  (function checkTypedArraySlice() {\n    if (Uint8Array.prototype.slice) {\n      return;\n    }\n    require(\"core-js/es/typed-array/slice\");\n  })();\n\n  // Support: IE, Safari<11, Chrome<63\n  (function checkPromise() {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"IMAGE_DECODERS\")) {\n      // The current image decoders are synchronous, hence `Promise` shouldn't\n      // need to be polyfilled for the IMAGE_DECODERS build target.\n      return;\n    }\n    if (globalThis.Promise && globalThis.Promise.allSettled) {\n      return;\n    }\n    globalThis.Promise = require(\"core-js/es/promise/index.js\");\n  })();\n\n  // Support: IE\n  (function checkURL() {\n    if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"PRODUCTION\")) {\n      // Prevent \"require is not a function\" errors in development mode,\n      // since the `URL` constructor should be available in modern browers.\n      return;\n    } else if (!PDFJSDev.test(\"GENERIC\")) {\n      // The `URL` constructor is assumed to be available in the extension\n      // builds.\n      return;\n    } else if (PDFJSDev.test(\"IMAGE_DECODERS\")) {\n      // The current image decoders don't use the `URL` constructor, so it\n      // doesn't need to be polyfilled for the IMAGE_DECODERS build target.\n      return;\n    }\n    globalThis.URL = require(\"core-js/web/url.js\");\n  })();\n\n  // Support: IE, Node.js\n  (function checkReadableStream() {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"IMAGE_DECODERS\")) {\n      // The current image decoders are synchronous, hence `ReadableStream`\n      // shouldn't need to be polyfilled for the IMAGE_DECODERS build target.\n      return;\n    }\n    let isReadableStreamSupported = false;\n\n    if (typeof ReadableStream !== \"undefined\") {\n      // MS Edge may say it has ReadableStream but they are not up to spec yet.\n      try {\n        // eslint-disable-next-line no-new\n        new ReadableStream({\n          start(controller) {\n            controller.close();\n          },\n        });\n        isReadableStreamSupported = true;\n      } catch (e) {\n        // The ReadableStream constructor cannot be used.\n      }\n    }\n    if (isReadableStreamSupported) {\n      return;\n    }\n    globalThis.ReadableStream = require(\"web-streams-polyfill/dist/ponyfill.js\").ReadableStream;\n  })();\n\n  // We want to support Map iteration, but it doesn't seem possible to easily\n  // test for that specifically; hence using a similarly unsupported property.\n  // Support: IE11\n  (function checkMapEntries() {\n    if (globalThis.Map && globalThis.Map.prototype.entries) {\n      return;\n    }\n    globalThis.Map = require(\"core-js/es/map/index.js\");\n  })();\n\n  // We want to support Set iteration, but it doesn't seem possible to easily\n  // test for that specifically; hence using a similarly unsupported property.\n  // Support: IE11\n  (function checkSetEntries() {\n    if (globalThis.Set && globalThis.Set.prototype.entries) {\n      return;\n    }\n    globalThis.Set = require(\"core-js/es/set/index.js\");\n  })();\n\n  // Support: IE<11, Safari<8, Chrome<36\n  (function checkWeakMap() {\n    if (globalThis.WeakMap) {\n      return;\n    }\n    globalThis.WeakMap = require(\"core-js/es/weak-map/index.js\");\n  })();\n\n  // Support: IE11\n  (function checkWeakSet() {\n    if (globalThis.WeakSet) {\n      return;\n    }\n    globalThis.WeakSet = require(\"core-js/es/weak-set/index.js\");\n  })();\n\n  // Provides support for String.codePointAt in legacy browsers.\n  // Support: IE11.\n  (function checkStringCodePointAt() {\n    if (String.prototype.codePointAt) {\n      return;\n    }\n    require(\"core-js/es/string/code-point-at.js\");\n  })();\n\n  // Provides support for String.fromCodePoint in legacy browsers.\n  // Support: IE11.\n  (function checkStringFromCodePoint() {\n    if (String.fromCodePoint) {\n      return;\n    }\n    String.fromCodePoint = require(\"core-js/es/string/from-code-point.js\");\n  })();\n\n  // Support: IE\n  (function checkSymbol() {\n    if (globalThis.Symbol) {\n      return;\n    }\n    require(\"core-js/es/symbol/index.js\");\n  })();\n\n  // Provides support for String.prototype.padStart in legacy browsers.\n  // Support: IE, Chrome<57\n  (function checkStringPadStart() {\n    if (String.prototype.padStart) {\n      return;\n    }\n    require(\"core-js/es/string/pad-start.js\");\n  })();\n\n  // Provides support for String.prototype.padEnd in legacy browsers.\n  // Support: IE, Chrome<57\n  (function checkStringPadEnd() {\n    if (String.prototype.padEnd) {\n      return;\n    }\n    require(\"core-js/es/string/pad-end.js\");\n  })();\n\n  // Provides support for Object.values in legacy browsers.\n  // Support: IE, Chrome<54\n  (function checkObjectValues() {\n    if (Object.values) {\n      return;\n    }\n    Object.values = require(\"core-js/es/object/values.js\");\n  })();\n\n  // Provides support for Object.entries in legacy browsers.\n  // Support: IE, Chrome<54\n  (function checkObjectEntries() {\n    if (Object.entries) {\n      return;\n    }\n    Object.entries = require(\"core-js/es/object/entries.js\");\n  })();\n}\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals process */\n\n// NW.js / Electron is a browser context, but copies some Node.js objects; see\n// http://docs.nwjs.io/en/latest/For%20Users/Advanced/JavaScript%20Contexts%20in%20NW.js/#access-nodejs-and-nwjs-api-in-browser-context\n// https://www.electronjs.org/docs/api/process#processversionselectron-readonly\n// https://www.electronjs.org/docs/api/process#processtype-readonly\nconst isNodeJS =\n  typeof process === \"object\" &&\n  process + \"\" === \"[object process]\" &&\n  !process.versions.nw &&\n  !(process.versions.electron && process.type && process.type !== \"browser\");\n\nexport { isNodeJS };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint no-var: error */\n\n/**\n * @module pdfjsLib\n */\n\nimport {\n  AbortException,\n  assert,\n  createPromiseCapability,\n  getVerbosityLevel,\n  info,\n  InvalidPDFException,\n  isArrayBuffer,\n  isSameOrigin,\n  MissingPDFException,\n  PasswordException,\n  setVerbosityLevel,\n  shadow,\n  stringToBytes,\n  UnexpectedResponseException,\n  UnknownErrorException,\n  unreachable,\n  warn,\n} from \"../shared/util.js\";\nimport {\n  deprecated,\n  DOMCanvasFactory,\n  DOMCMapReaderFactory,\n  loadScript,\n  PageViewport,\n  RenderingCancelledException,\n  StatTimer,\n} from \"./display_utils.js\";\nimport { FontFaceObject, FontLoader } from \"./font_loader.js\";\nimport { NodeCanvasFactory, NodeCMapReaderFactory } from \"./node_utils.js\";\nimport { AnnotationStorage } from \"./annotation_storage.js\";\nimport { apiCompatibilityParams } from \"./api_compatibility.js\";\nimport { CanvasGraphics } from \"./canvas.js\";\nimport { GlobalWorkerOptions } from \"./worker_options.js\";\nimport { isNodeJS } from \"../shared/is_node.js\";\nimport { MessageHandler } from \"../shared/message_handler.js\";\nimport { Metadata } from \"./metadata.js\";\nimport { OptionalContentConfig } from \"./optional_content_config.js\";\nimport { PDFDataTransportStream } from \"./transport_stream.js\";\nimport { WebGLContext } from \"./webgl.js\";\n\nconst DEFAULT_RANGE_CHUNK_SIZE = 65536; // 2^16 = 65536\nconst RENDERING_CANCELLED_TIMEOUT = 100; // ms\n\nconst DefaultCanvasFactory =\n  (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) && isNodeJS\n    ? NodeCanvasFactory\n    : DOMCanvasFactory;\nconst DefaultCMapReaderFactory =\n  (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) && isNodeJS\n    ? NodeCMapReaderFactory\n    : DOMCMapReaderFactory;\n\n/**\n * @typedef {function} IPDFStreamFactory\n * @param {DocumentInitParameters} params - The document initialization\n *   parameters. The \"url\" key is always present.\n * @returns {Promise} A promise, which is resolved with an instance of\n *   {IPDFStream}.\n * @ignore\n */\n\n/**\n * @type IPDFStreamFactory\n * @private\n */\nlet createPDFNetworkStream;\n\n/**\n * Sets the function that instantiates an {IPDFStream} as an alternative PDF\n * data transport.\n *\n * @param {IPDFStreamFactory} pdfNetworkStreamFactory - The factory function\n *   that takes document initialization parameters (including a \"url\") and\n *   returns a promise which is resolved with an instance of {IPDFStream}.\n * @ignore\n */\nfunction setPDFNetworkStreamFactory(pdfNetworkStreamFactory) {\n  createPDFNetworkStream = pdfNetworkStreamFactory;\n}\n\n/**\n * @typedef { Int8Array | Uint8Array | Uint8ClampedArray |\n *            Int16Array | Uint16Array |\n *            Int32Array | Uint32Array | Float32Array |\n *            Float64Array\n * } TypedArray\n */\n\n/**\n * Document initialization / loading parameters object.\n *\n * @typedef {Object} DocumentInitParameters\n * @property {string} [url] - The URL of the PDF.\n * @property {TypedArray|Array<number>|string} [data] - Binary PDF data. Use\n *    typed arrays (Uint8Array) to improve the memory usage. If PDF data is\n *    BASE64-encoded, use `atob()` to convert it to a binary string first.\n * @property {Object} [httpHeaders] - Basic authentication headers.\n * @property {boolean} [withCredentials] - Indicates whether or not\n *   cross-site Access-Control requests should be made using credentials such\n *   as cookies or authorization headers. The default is `false`.\n * @property {string} [password] - For decrypting password-protected PDFs.\n * @property {TypedArray} [initialData] - A typed array with the first portion\n *   or all of the pdf data. Used by the extension since some data is already\n *   loaded before the switch to range requests.\n * @property {number} [length] - The PDF file length. It's used for progress\n *   reports and range requests operations.\n * @property {PDFDataRangeTransport} [range] - Allows for using a custom range\n *   transport implementation.\n * @property {number} [rangeChunkSize] - Specify maximum number of bytes fetched\n *   per range request. The default value is {@link DEFAULT_RANGE_CHUNK_SIZE}.\n * @property {PDFWorker} [worker] - The worker that will be used for loading and\n *   parsing the PDF data.\n * @property {number} [verbosity] - Controls the logging level; the constants\n *   from {@link VerbosityLevel} should be used.\n * @property {string} [docBaseUrl] - The base URL of the document, used when\n *   attempting to recover valid absolute URLs for annotations, and outline\n *   items, that (incorrectly) only specify relative URLs.\n * @property {string} [cMapUrl] - The URL where the predefined Adobe CMaps are\n *   located. Include the trailing slash.\n * @property {boolean} [cMapPacked] - Specifies if the Adobe CMaps are binary\n *   packed or not.\n * @property {Object} [CMapReaderFactory] - The factory that will be used when\n *   reading built-in CMap files. Providing a custom factory is useful for\n *   environments without Fetch API or `XMLHttpRequest` support, such as\n *   Node.js. The default value is {DOMCMapReaderFactory}.\n * @property {boolean} [stopAtErrors] - Reject certain promises, e.g.\n *   `getOperatorList`, `getTextContent`, and `RenderTask`, when the associated\n *   PDF data cannot be successfully parsed, instead of attempting to recover\n *   whatever possible of the data. The default value is `false`.\n * @property {number} [maxImageSize] - The maximum allowed image size in total\n *   pixels, i.e. width * height. Images above this value will not be rendered.\n *   Use -1 for no limit, which is also the default value.\n * @property {boolean} [isEvalSupported] - Determines if we can evaluate strings\n *   as JavaScript. Primarily used to improve performance of font rendering, and\n *   when parsing PDF functions. The default value is `true`.\n * @property {boolean} [disableFontFace] - By default fonts are converted to\n *   OpenType fonts and loaded via `@font-face` rules. If disabled, fonts will\n *   be rendered using a built-in font renderer that constructs the glyphs with\n *   primitive path commands. The default value is `false`.\n * @property {boolean} [fontExtraProperties] - Include additional properties,\n *   which are unused during rendering of PDF documents, when exporting the\n *   parsed font data from the worker-thread. This may be useful for debugging\n *   purposes (and backwards compatibility), but note that it will lead to\n *   increased memory usage. The default value is `false`.\n * @property {HTMLDocument} [ownerDocument] - Specify an explicit document\n *   context to create elements with and to load resources, such as fonts,\n *   into. Defaults to the current document.\n * @property {boolean} [disableRange] - Disable range request loading of PDF\n *   files. When enabled, and if the server supports partial content requests,\n *   then the PDF will be fetched in chunks. The default value is `false`.\n * @property {boolean} [disableStream] - Disable streaming of PDF file data.\n *   By default PDF.js attempts to load PDF files in chunks. The default value\n *   is `false`.\n * @property {boolean} [disableAutoFetch] - Disable pre-fetching of PDF file\n *   data. When range requests are enabled PDF.js will automatically keep\n *   fetching more data even if it isn't needed to display the current page.\n *   The default value is `false`.\n *\n *   NOTE: It is also necessary to disable streaming, see above, in order for\n *   disabling of pre-fetching to work correctly.\n * @property {boolean} [pdfBug] - Enables special hooks for debugging PDF.js\n *   (see `web/debugger.js`). The default value is `false`.\n */\n\n/**\n * @typedef {Object} PDFDocumentStats\n * @property {Object<string, boolean>} streamTypes - Used stream types in the\n *   document (an item is set to true if specific stream ID was used in the\n *   document).\n * @property {Object<string, boolean>} fontTypes - Used font types in the\n *   document (an item is set to true if specific font ID was used in the\n *   document).\n */\n\n/**\n * This is the main entry point for loading a PDF and interacting with it.\n *\n * NOTE: If a URL is used to fetch the PDF data a standard Fetch API call (or\n * XHR as fallback) is used, which means it must follow same origin rules,\n * e.g. no cross-domain requests without CORS.\n *\n * @param {string|TypedArray|DocumentInitParameters|PDFDataRangeTransport} src -\n *   Can be a URL to where a PDF file is located, a typed array (Uint8Array)\n *   already populated with data or parameter object.\n * @returns {PDFDocumentLoadingTask}\n */\nfunction getDocument(src) {\n  const task = new PDFDocumentLoadingTask();\n\n  let source;\n  if (typeof src === \"string\") {\n    source = { url: src };\n  } else if (isArrayBuffer(src)) {\n    source = { data: src };\n  } else if (src instanceof PDFDataRangeTransport) {\n    source = { range: src };\n  } else {\n    if (typeof src !== \"object\") {\n      throw new Error(\n        \"Invalid parameter in getDocument, \" +\n          \"need either Uint8Array, string or a parameter object\"\n      );\n    }\n    if (!src.url && !src.data && !src.range) {\n      throw new Error(\n        \"Invalid parameter object: need either .data, .range or .url\"\n      );\n    }\n    source = src;\n  }\n  const params = Object.create(null);\n  let rangeTransport = null,\n    worker = null;\n\n  for (const key in source) {\n    if (key === \"url\" && typeof window !== \"undefined\") {\n      // The full path is required in the 'url' field.\n      params[key] = new URL(source[key], window.location).href;\n      continue;\n    } else if (key === \"range\") {\n      rangeTransport = source[key];\n      continue;\n    } else if (key === \"worker\") {\n      worker = source[key];\n      continue;\n    } else if (key === \"data\" && !(source[key] instanceof Uint8Array)) {\n      // Converting string or array-like data to Uint8Array.\n      const pdfBytes = source[key];\n      if (typeof pdfBytes === \"string\") {\n        params[key] = stringToBytes(pdfBytes);\n      } else if (\n        typeof pdfBytes === \"object\" &&\n        pdfBytes !== null &&\n        !isNaN(pdfBytes.length)\n      ) {\n        params[key] = new Uint8Array(pdfBytes);\n      } else if (isArrayBuffer(pdfBytes)) {\n        params[key] = new Uint8Array(pdfBytes);\n      } else {\n        throw new Error(\n          \"Invalid PDF binary data: either typed array, \" +\n            \"string or array-like object is expected in the \" +\n            \"data property.\"\n        );\n      }\n      continue;\n    }\n    params[key] = source[key];\n  }\n\n  params.rangeChunkSize = params.rangeChunkSize || DEFAULT_RANGE_CHUNK_SIZE;\n  params.CMapReaderFactory =\n    params.CMapReaderFactory || DefaultCMapReaderFactory;\n  params.ignoreErrors = params.stopAtErrors !== true;\n  params.fontExtraProperties = params.fontExtraProperties === true;\n  params.pdfBug = params.pdfBug === true;\n\n  if (!Number.isInteger(params.maxImageSize)) {\n    params.maxImageSize = -1;\n  }\n  if (typeof params.isEvalSupported !== \"boolean\") {\n    params.isEvalSupported = true;\n  }\n  if (typeof params.disableFontFace !== \"boolean\") {\n    params.disableFontFace = apiCompatibilityParams.disableFontFace || false;\n  }\n  if (typeof params.ownerDocument === \"undefined\") {\n    params.ownerDocument = globalThis.document;\n  }\n\n  if (typeof params.disableRange !== \"boolean\") {\n    params.disableRange = false;\n  }\n  if (typeof params.disableStream !== \"boolean\") {\n    params.disableStream = false;\n  }\n  if (typeof params.disableAutoFetch !== \"boolean\") {\n    params.disableAutoFetch = false;\n  }\n\n  // Set the main-thread verbosity level.\n  setVerbosityLevel(params.verbosity);\n\n  if (!worker) {\n    const workerParams = {\n      verbosity: params.verbosity,\n      port: GlobalWorkerOptions.workerPort,\n    };\n    // Worker was not provided -- creating and owning our own. If message port\n    // is specified in global worker options, using it.\n    worker = workerParams.port\n      ? PDFWorker.fromPort(workerParams)\n      : new PDFWorker(workerParams);\n    task._worker = worker;\n  }\n  const docId = task.docId;\n  worker.promise\n    .then(function () {\n      if (task.destroyed) {\n        throw new Error(\"Loading aborted\");\n      }\n\n      const workerIdPromise = _fetchDocument(\n        worker,\n        params,\n        rangeTransport,\n        docId\n      );\n      const networkStreamPromise = new Promise(function (resolve) {\n        let networkStream;\n        if (rangeTransport) {\n          networkStream = new PDFDataTransportStream(\n            {\n              length: params.length,\n              initialData: params.initialData,\n              progressiveDone: params.progressiveDone,\n              disableRange: params.disableRange,\n              disableStream: params.disableStream,\n            },\n            rangeTransport\n          );\n        } else if (!params.data) {\n          networkStream = createPDFNetworkStream({\n            url: params.url,\n            length: params.length,\n            httpHeaders: params.httpHeaders,\n            withCredentials: params.withCredentials,\n            rangeChunkSize: params.rangeChunkSize,\n            disableRange: params.disableRange,\n            disableStream: params.disableStream,\n          });\n        }\n        resolve(networkStream);\n      });\n\n      return Promise.all([workerIdPromise, networkStreamPromise]).then(\n        function ([workerId, networkStream]) {\n          if (task.destroyed) {\n            throw new Error(\"Loading aborted\");\n          }\n\n          const messageHandler = new MessageHandler(\n            docId,\n            workerId,\n            worker.port\n          );\n          messageHandler.postMessageTransfers = worker.postMessageTransfers;\n          const transport = new WorkerTransport(\n            messageHandler,\n            task,\n            networkStream,\n            params\n          );\n          task._transport = transport;\n          messageHandler.send(\"Ready\", null);\n        }\n      );\n    })\n    .catch(task._capability.reject);\n\n  return task;\n}\n\n/**\n * Starts fetching of specified PDF document/data.\n *\n * @param {PDFWorker} worker\n * @param {Object} source\n * @param {PDFDataRangeTransport} pdfDataRangeTransport\n * @param {string} docId - Unique document ID, used in `MessageHandler`.\n * @returns {Promise} A promise that is resolved when the worker ID of the\n *   `MessageHandler` is known.\n * @private\n */\nfunction _fetchDocument(worker, source, pdfDataRangeTransport, docId) {\n  if (worker.destroyed) {\n    return Promise.reject(new Error(\"Worker was destroyed\"));\n  }\n\n  if (pdfDataRangeTransport) {\n    source.length = pdfDataRangeTransport.length;\n    source.initialData = pdfDataRangeTransport.initialData;\n    source.progressiveDone = pdfDataRangeTransport.progressiveDone;\n  }\n  return worker.messageHandler\n    .sendWithPromise(\"GetDocRequest\", {\n      docId,\n      apiVersion:\n        typeof PDFJSDev !== \"undefined\" && !PDFJSDev.test(\"TESTING\")\n          ? PDFJSDev.eval(\"BUNDLE_VERSION\")\n          : null,\n      // Only send the required properties, and *not* the entire object.\n      source: {\n        data: source.data,\n        url: source.url,\n        password: source.password,\n        disableAutoFetch: source.disableAutoFetch,\n        rangeChunkSize: source.rangeChunkSize,\n        length: source.length,\n      },\n      maxImageSize: source.maxImageSize,\n      disableFontFace: source.disableFontFace,\n      postMessageTransfers: worker.postMessageTransfers,\n      docBaseUrl: source.docBaseUrl,\n      ignoreErrors: source.ignoreErrors,\n      isEvalSupported: source.isEvalSupported,\n      fontExtraProperties: source.fontExtraProperties,\n    })\n    .then(function (workerId) {\n      if (worker.destroyed) {\n        throw new Error(\"Worker was destroyed\");\n      }\n      return workerId;\n    });\n}\n\n/**\n * The loading task controls the operations required to load a PDF document\n * (such as network requests) and provides a way to listen for completion,\n * after which individual pages can be rendered.\n *\n * @typedef {Object} PDFDocumentLoadingTask\n * @property {string} docId - Unique identifier for the document loading task.\n * @property {boolean} destroyed - Whether the loading task is destroyed or not.\n * @property {function} [onPassword] - Callback to request a password if a wrong\n *   or no password was provided. The callback receives two parameters: a\n *   function that should be called with the new password, and a reason (see\n *   {@link PasswordResponses}).\n * @property {function} [onProgress] - Callback to be able to monitor the\n *   loading progress of the PDF file (necessary to implement e.g. a loading\n *   bar). The callback receives an {Object} with the properties `loaded`\n *   ({number}) and `total` ({number}) that indicate how many bytes are loaded.\n * @property {function} [onUnsupportedFeature] - Callback for when an\n *   unsupported feature is used in the PDF document. The callback receives an\n *   {@link UNSUPPORTED_FEATURES} argument.\n * @property {Promise<PDFDocumentProxy>} promise - Promise for document loading\n *   task completion.\n * @property {function} destroy - Abort all network requests and destroy\n *   the worker. Returns a promise that is resolved when destruction is\n *   completed.\n */\n\n/**\n * @type {any}\n * @ignore\n */\nconst PDFDocumentLoadingTask = (function PDFDocumentLoadingTaskClosure() {\n  let nextDocumentId = 0;\n\n  /**\n   * The loading task controls the operations required to load a PDF document\n   * (such as network requests) and provides a way to listen for completion,\n   * after which individual pages can be rendered.\n   */\n  // eslint-disable-next-line no-shadow\n  class PDFDocumentLoadingTask {\n    constructor() {\n      this._capability = createPromiseCapability();\n      this._transport = null;\n      this._worker = null;\n\n      /**\n       * Unique identifier for the document loading task.\n       * @type {string}\n       */\n      this.docId = \"d\" + nextDocumentId++;\n\n      /**\n       * Whether the loading task is destroyed or not.\n       * @type {boolean}\n       */\n      this.destroyed = false;\n\n      /**\n       * Callback to request a password if a wrong or no password was provided.\n       * The callback receives two parameters: a function that should be called\n       * with the new password, and a reason (see {@link PasswordResponses}).\n       * @type {function}\n       */\n      this.onPassword = null;\n\n      /**\n       * Callback to be able to monitor the loading progress of the PDF file\n       * (necessary to implement e.g. a loading bar). The callback receives\n       * an {Object} with the properties `loaded` ({number}) and `total`\n       * ({number}) that indicate how many bytes are loaded.\n       * @type {function}\n       */\n      this.onProgress = null;\n\n      /**\n       * Callback for when an unsupported feature is used in the PDF document.\n       * The callback receives an {@link UNSUPPORTED_FEATURES} argument.\n       * @type {function}\n       */\n      this.onUnsupportedFeature = null;\n    }\n\n    /**\n     * Promise for document loading task completion.\n     * @type {Promise<PDFDocumentProxy>}\n     */\n    get promise() {\n      return this._capability.promise;\n    }\n\n    /**\n     * @returns {Promise<void>} A promise that is resolved when destruction is\n     *   completed.\n     */\n    destroy() {\n      this.destroyed = true;\n\n      const transportDestroyed = !this._transport\n        ? Promise.resolve()\n        : this._transport.destroy();\n      return transportDestroyed.then(() => {\n        this._transport = null;\n        if (this._worker) {\n          this._worker.destroy();\n          this._worker = null;\n        }\n      });\n    }\n  }\n  return PDFDocumentLoadingTask;\n})();\n\n/**\n * Abstract class to support range requests file loading.\n */\nclass PDFDataRangeTransport {\n  /**\n   * @param {number} length\n   * @param {Uint8Array} initialData\n   * @param {boolean} [progressiveDone]\n   */\n  constructor(length, initialData, progressiveDone = false) {\n    this.length = length;\n    this.initialData = initialData;\n    this.progressiveDone = progressiveDone;\n\n    this._rangeListeners = [];\n    this._progressListeners = [];\n    this._progressiveReadListeners = [];\n    this._progressiveDoneListeners = [];\n    this._readyCapability = createPromiseCapability();\n  }\n\n  addRangeListener(listener) {\n    this._rangeListeners.push(listener);\n  }\n\n  addProgressListener(listener) {\n    this._progressListeners.push(listener);\n  }\n\n  addProgressiveReadListener(listener) {\n    this._progressiveReadListeners.push(listener);\n  }\n\n  addProgressiveDoneListener(listener) {\n    this._progressiveDoneListeners.push(listener);\n  }\n\n  onDataRange(begin, chunk) {\n    for (const listener of this._rangeListeners) {\n      listener(begin, chunk);\n    }\n  }\n\n  onDataProgress(loaded, total) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressListeners) {\n        listener(loaded, total);\n      }\n    });\n  }\n\n  onDataProgressiveRead(chunk) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveReadListeners) {\n        listener(chunk);\n      }\n    });\n  }\n\n  onDataProgressiveDone() {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveDoneListeners) {\n        listener();\n      }\n    });\n  }\n\n  transportReady() {\n    this._readyCapability.resolve();\n  }\n\n  requestDataRange(begin, end) {\n    unreachable(\"Abstract method PDFDataRangeTransport.requestDataRange\");\n  }\n\n  abort() {}\n}\n\n/**\n * Proxy to a `PDFDocument` in the worker thread.\n */\nclass PDFDocumentProxy {\n  constructor(pdfInfo, transport) {\n    this._pdfInfo = pdfInfo;\n    this._transport = transport;\n  }\n\n  /**\n   * @type {AnnotationStorage} Storage for annotation data in forms.\n   */\n  get annotationStorage() {\n    return shadow(this, \"annotationStorage\", new AnnotationStorage());\n  }\n\n  /**\n   * @type {number} Total number of pages in the PDF file.\n   */\n  get numPages() {\n    return this._pdfInfo.numPages;\n  }\n\n  /**\n   * @type {string} A (not guaranteed to be) unique ID to identify a PDF.\n   */\n  get fingerprint() {\n    return this._pdfInfo.fingerprint;\n  }\n\n  /**\n   * @param {number} pageNumber - The page number to get. The first page is 1.\n   * @returns {Promise<PDFPageProxy>} A promise that is resolved with\n   *   a {@link PDFPageProxy} object.\n   */\n  getPage(pageNumber) {\n    return this._transport.getPage(pageNumber);\n  }\n\n  /**\n   * @param {{num: number, gen: number}} ref - The page reference. Must have\n   *   the `num` and `gen` properties.\n   * @returns {Promise<{num: number, gen: number}>} A promise that is resolved\n   *   with the page index (starting from zero) that is associated with the\n   *   reference.\n   */\n  getPageIndex(ref) {\n    return this._transport.getPageIndex(ref);\n  }\n\n  /**\n   * @returns {Promise<Object<string, Array<any>>>} A promise that is resolved\n   *   with a mapping from named destinations to references.\n   *\n   * This can be slow for large documents. Use `getDestination` instead.\n   */\n  getDestinations() {\n    return this._transport.getDestinations();\n  }\n\n  /**\n   * @param {string} id - The named destination to get.\n   * @returns {Promise<Array<any>>} A promise that is resolved with all\n   *   information of the given named destination.\n   */\n  getDestination(id) {\n    return this._transport.getDestination(id);\n  }\n\n  /**\n   * @returns {Promise<Array<string> | null>} A promise that is resolved with\n   *   an {Array} containing the page labels that correspond to the page\n   *   indexes, or `null` when no page labels are present in the PDF file.\n   */\n  getPageLabels() {\n    return this._transport.getPageLabels();\n  }\n\n  /**\n   * @returns {Promise<string>} A promise that is resolved with a {string}\n   *   containing the page layout name.\n   */\n  getPageLayout() {\n    return this._transport.getPageLayout();\n  }\n\n  /**\n   * @returns {Promise<string>} A promise that is resolved with a {string}\n   *   containing the page mode name.\n   */\n  getPageMode() {\n    return this._transport.getPageMode();\n  }\n\n  /**\n   * @returns {Promise<Object | null>} A promise that is resolved with an\n   *   {Object} containing the viewer preferences, or `null` when no viewer\n   *   preferences are present in the PDF file.\n   */\n  getViewerPreferences() {\n    return this._transport.getViewerPreferences();\n  }\n\n  /**\n   * @returns {Promise<any | null>} A promise that is resolved with an {Array}\n   *   containing the destination, or `null` when no open action is present\n   *   in the PDF.\n   */\n  getOpenAction() {\n    return this._transport.getOpenAction();\n  }\n\n  /**\n   * @returns {Promise<any>} A promise that is resolved with a lookup table\n   *   for mapping named attachments to their content.\n   */\n  getAttachments() {\n    return this._transport.getAttachments();\n  }\n\n  /**\n   * @returns {Promise<Array<string> | null>} A promise that is resolved with\n   *   an {Array} of all the JavaScript strings in the name tree, or `null`\n   *   if no JavaScript exists.\n   */\n  getJavaScript() {\n    return this._transport.getJavaScript();\n  }\n\n  /**\n   * @typedef {Object} OutlineNode\n   * @property {string} title\n   * @property {boolean} bold\n   * @property {boolean} italic\n   * @property {Uint8ClampedArray} color - The color in RGB format to use for\n   *   display purposes.\n   * @property {string | Array<any> | null} dest\n   * @property {string | null} url\n   * @property {string | undefined} unsafeUrl\n   * @property {boolean | undefined} newWindow\n   * @property {number | undefined} count\n   * @property {Array<OutlineNode>} items\n   */\n\n  /**\n   * @returns {Promise<Array<OutlineNode>>} A promise that is resolved with an\n   *   {Array} that is a tree outline (if it has one) of the PDF file.\n   */\n  getOutline() {\n    return this._transport.getOutline();\n  }\n\n  /**\n   * @returns {Promise<OptionalContentConfig>} A promise that is resolved with\n   *   an {@link OptionalContentConfig} that contains all the optional content\n   *   groups (assuming that the document has any).\n   */\n  getOptionalContentConfig() {\n    return this._transport.getOptionalContentConfig();\n  }\n\n  /**\n   * @returns {Promise<Array<number> | null>} A promise that is resolved with\n   *   an {Array} that contains the permission flags for the PDF document, or\n   *   `null` when no permissions are present in the PDF file.\n   */\n  getPermissions() {\n    return this._transport.getPermissions();\n  }\n\n  /**\n   * @returns {Promise<{ info: Object, metadata: Metadata }>} A promise that is\n   *   resolved with an {Object} that has `info` and `metadata` properties.\n   *   `info` is an {Object} filled with anything available in the information\n   *   dictionary and similarly `metadata` is a {Metadata} object with\n   *   information from the metadata section of the PDF.\n   */\n  getMetadata() {\n    return this._transport.getMetadata();\n  }\n\n  /**\n   * @returns {Promise<TypedArray>} A promise that is resolved with a\n   *   {TypedArray} that has the raw data from the PDF.\n   */\n  getData() {\n    return this._transport.getData();\n  }\n\n  /**\n   * @returns {Promise<{ length: number }>} A promise that is resolved when the\n   *   document's data is loaded. It is resolved with an {Object} that contains\n   *   the `length` property that indicates size of the PDF data in bytes.\n   */\n  getDownloadInfo() {\n    return this._transport.downloadInfoCapability.promise;\n  }\n\n  /**\n   * @returns {Promise<PDFDocumentStats>} A promise this is resolved with\n   *   current statistics about document structures (see\n   *   {@link PDFDocumentStats}).\n   */\n  getStats() {\n    return this._transport.getStats();\n  }\n\n  /**\n   * Cleans up resources allocated by the document on both the main and worker\n   * threads.\n   *\n   * NOTE: Do not, under any circumstances, call this method when rendering is\n   * currently ongoing since that may lead to rendering errors.\n   *\n   * @returns {Promise} A promise that is resolved when clean-up has finished.\n   */\n  cleanup() {\n    return this._transport.startCleanup();\n  }\n\n  /**\n   * Destroys the current document instance and terminates the worker.\n   */\n  destroy() {\n    return this.loadingTask.destroy();\n  }\n\n  /**\n   * @type {DocumentInitParameters} A subset of the current\n   *   {DocumentInitParameters}, which are either needed in the viewer and/or\n   *   whose default values may be affected by the `apiCompatibilityParams`.\n   */\n  get loadingParams() {\n    return this._transport.loadingParams;\n  }\n\n  /**\n   * @type {PDFDocumentLoadingTask} The loadingTask for the current document.\n   */\n  get loadingTask() {\n    return this._transport.loadingTask;\n  }\n\n  /**\n   * @param {AnnotationStorage} annotationStorage - Storage for annotation\n   *   data in forms.\n   * @returns {Promise<Uint8Array>} A promise that is resolved with a\n   *   {Uint8Array} containing the full data of the saved document.\n   */\n  saveDocument(annotationStorage) {\n    return this._transport.saveDocument(annotationStorage);\n  }\n}\n\n/**\n * Page getViewport parameters.\n *\n * @typedef {Object} GetViewportParameters\n * @property {number} scale - The desired scale of the viewport.\n * @property {number} [rotation] - The desired rotation, in degrees, of\n *   the viewport. If omitted it defaults to the page rotation.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset.\n *   The default value is `0`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset.\n *   The default value is `0`.\n * @property {boolean} [dontFlip] - If true, the y-axis will not be\n *   flipped. The default value is `false`.\n */\n\n/**\n * Page getTextContent parameters.\n *\n * @typedef {Object} getTextContentParameters\n * @property {boolean} normalizeWhitespace - Replaces all occurrences of\n *   whitespace with standard spaces (0x20). The default value is `false`.\n * @property {boolean} disableCombineTextItems - Do not attempt to combine\n *   same line {@link TextItem}'s. The default value is `false`.\n */\n\n/**\n * Page text content.\n *\n * @typedef {Object} TextContent\n * @property {Array<TextItem>} items - Array of {@link TextItem} objects.\n * @property {Object<string, TextStyle>} styles - {@link TextStyle} objects,\n *   indexed by font name.\n */\n\n/**\n * Page text content part.\n *\n * @typedef {Object} TextItem\n * @property {string} str - Text content.\n * @property {string} dir - Text direction: 'ttb', 'ltr' or 'rtl'.\n * @property {Array<any>} transform - Transformation matrix.\n * @property {number} width - Width in device space.\n * @property {number} height - Height in device space.\n * @property {string} fontName - Font name used by PDF.js for converted font.\n */\n\n/**\n * Text style.\n *\n * @typedef {Object} TextStyle\n * @property {number} ascent - Font ascent.\n * @property {number} descent - Font descent.\n * @property {boolean} vertical - Whether or not the text is in vertical mode.\n * @property {string} fontFamily - The possible font family.\n */\n\n/**\n * Page annotation parameters.\n *\n * @typedef {Object} GetAnnotationsParameters\n * @property {string} intent - Determines the annotations that will be fetched,\n *   can be either 'display' (viewable annotations) or 'print' (printable\n *   annotations). If the parameter is omitted, all annotations are fetched.\n */\n\n/**\n * Page render parameters.\n *\n * @typedef {Object} RenderParameters\n * @property {Object} canvasContext - A 2D context of a DOM Canvas object.\n * @property {PageViewport} viewport - Rendering viewport obtained by calling\n *   the `PDFPageProxy.getViewport` method.\n * @property {string} [intent] - Rendering intent, can be 'display' or 'print'.\n *   The default value is 'display'.\n * @property {boolean} [enableWebGL] - Enables WebGL accelerated rendering for\n *   some operations. The default value is `false`.\n * @property {boolean} [renderInteractiveForms] - Whether or not interactive\n *   form elements are rendered in the display layer. If so, we do not render\n *   them on the canvas as well.\n * @property {Array<any>} [transform] - Additional transform, applied just\n *   before viewport transform.\n * @property {Object} [imageLayer] - An object that has `beginLayout`,\n *   `endLayout` and `appendImage` functions.\n * @property {Object} [canvasFactory] - The factory instance that will be used\n *   when creating canvases. The default value is {new DOMCanvasFactory()}.\n * @property {Object | string} [background] - Background to use for the canvas.\n *   Any valid `canvas.fillStyle` can be used: a `DOMString` parsed as CSS\n *   <color> value, a `CanvasGradient` object (a linear or radial gradient) or\n *   a `CanvasPattern` object (a repetitive image). The default value is\n *   'rgb(255,255,255)'.\n * @property {AnnotationStorage} [annotationStorage] - Storage for annotation\n *   data in forms.\n * @property {Promise<OptionalContentConfig>} [optionalContentConfigPromise] -\n *   A promise that should resolve with an {@link OptionalContentConfig}\n *   created from `PDFDocumentProxy.getOptionalContentConfig`. If `null`,\n *   the configuration will be fetched automatically with the default visibility\n *   states set.\n */\n\n/**\n * PDF page operator list.\n *\n * @typedef {Object} PDFOperatorList\n * @property {Array<number>} fnArray - Array containing the operator functions.\n * @property {Array<any>} argsArray - Array containing the arguments of the\n *   functions.\n */\n\n/**\n * Proxy to a `PDFPage` in the worker thread.\n */\nclass PDFPageProxy {\n  constructor(pageIndex, pageInfo, transport, ownerDocument, pdfBug = false) {\n    this._pageIndex = pageIndex;\n    this._pageInfo = pageInfo;\n    this._ownerDocument = ownerDocument;\n    this._transport = transport;\n    this._stats = pdfBug ? new StatTimer() : null;\n    this._pdfBug = pdfBug;\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n\n    this.cleanupAfterRender = false;\n    this.pendingCleanup = false;\n    this._intentStates = new Map();\n    this.destroyed = false;\n  }\n\n  /**\n   * @type {number} Page number of the page. First page is 1.\n   */\n  get pageNumber() {\n    return this._pageIndex + 1;\n  }\n\n  /**\n   * @type {number} The number of degrees the page is rotated clockwise.\n   */\n  get rotate() {\n    return this._pageInfo.rotate;\n  }\n\n  /**\n   * @type {Object} The reference that points to this page. It has `num` and\n   *   `gen` properties.\n   */\n  get ref() {\n    return this._pageInfo.ref;\n  }\n\n  /**\n   * @type {number} The default size of units in 1/72nds of an inch.\n   */\n  get userUnit() {\n    return this._pageInfo.userUnit;\n  }\n\n  /**\n   * @type {Array<number>} An array of the visible portion of the PDF page in\n   *   user space units [x1, y1, x2, y2].\n   */\n  get view() {\n    return this._pageInfo.view;\n  }\n\n  /**\n   * @param {GetViewportParameters} params - Viewport parameters.\n   * @returns {PageViewport} Contains 'width' and 'height' properties\n   *   along with transforms required for rendering.\n   */\n  getViewport({\n    scale,\n    rotation = this.rotate,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false,\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.view,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip,\n    });\n  }\n\n  /**\n   * @param {GetAnnotationsParameters} params - Annotation parameters.\n   * @returns {Promise<Array<any>>} A promise that is resolved with an\n   *   {Array} of the annotation objects.\n   */\n  getAnnotations({ intent = null } = {}) {\n    if (!this.annotationsPromise || this.annotationsIntent !== intent) {\n      this.annotationsPromise = this._transport.getAnnotations(\n        this._pageIndex,\n        intent\n      );\n      this.annotationsIntent = intent;\n    }\n    return this.annotationsPromise;\n  }\n\n  /**\n   * Begins the process of rendering a page to the desired context.\n   *\n   * @param {RenderParameters} params Page render parameters.\n   * @returns {RenderTask} An object that contains a promise that is\n   *   resolved when the page finishes rendering.\n   */\n  render({\n    canvasContext,\n    viewport,\n    intent = \"display\",\n    enableWebGL = false,\n    renderInteractiveForms = false,\n    transform = null,\n    imageLayer = null,\n    canvasFactory = null,\n    background = null,\n    annotationStorage = null,\n    optionalContentConfigPromise = null,\n  }) {\n    if (this._stats) {\n      this._stats.time(\"Overall\");\n    }\n\n    const renderingIntent = intent === \"print\" ? \"print\" : \"display\";\n    // If there was a pending destroy, cancel it so no cleanup happens during\n    // this call to render.\n    this.pendingCleanup = false;\n\n    if (!optionalContentConfigPromise) {\n      optionalContentConfigPromise = this._transport.getOptionalContentConfig();\n    }\n\n    let intentState = this._intentStates.get(renderingIntent);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(renderingIntent, intentState);\n    }\n\n    // Ensure that a pending `streamReader` cancel timeout is always aborted.\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n\n    const canvasFactoryInstance =\n      canvasFactory ||\n      new DefaultCanvasFactory({ ownerDocument: this._ownerDocument });\n    const webGLContext = new WebGLContext({\n      enable: enableWebGL,\n    });\n\n    // If there's no displayReadyCapability yet, then the operatorList\n    // was never requested before. Make the request and create the promise.\n    if (!intentState.displayReadyCapability) {\n      intentState.displayReadyCapability = createPromiseCapability();\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n      };\n\n      if (this._stats) {\n        this._stats.time(\"Page Request\");\n      }\n      this._pumpOperatorList({\n        pageIndex: this._pageIndex,\n        intent: renderingIntent,\n        renderInteractiveForms: renderInteractiveForms === true,\n        annotationStorage:\n          (annotationStorage && annotationStorage.getAll()) || null,\n      });\n    }\n\n    const complete = error => {\n      const i = intentState.renderTasks.indexOf(internalRenderTask);\n      if (i >= 0) {\n        intentState.renderTasks.splice(i, 1);\n      }\n\n      // Attempt to reduce memory usage during *printing*, by always running\n      // cleanup once rendering has finished (regardless of cleanupAfterRender).\n      if (this.cleanupAfterRender || renderingIntent === \"print\") {\n        this.pendingCleanup = true;\n      }\n      this._tryCleanup();\n\n      if (error) {\n        internalRenderTask.capability.reject(error);\n\n        this._abortOperatorList({\n          intentState,\n          reason: error,\n        });\n      } else {\n        internalRenderTask.capability.resolve();\n      }\n      if (this._stats) {\n        this._stats.timeEnd(\"Rendering\");\n        this._stats.timeEnd(\"Overall\");\n      }\n    };\n\n    const internalRenderTask = new InternalRenderTask({\n      callback: complete,\n      // Only include the required properties, and *not* the entire object.\n      params: {\n        canvasContext,\n        viewport,\n        transform,\n        imageLayer,\n        background,\n      },\n      objs: this.objs,\n      commonObjs: this.commonObjs,\n      operatorList: intentState.operatorList,\n      pageIndex: this._pageIndex,\n      canvasFactory: canvasFactoryInstance,\n      webGLContext,\n      useRequestAnimationFrame: renderingIntent !== \"print\",\n      pdfBug: this._pdfBug,\n    });\n\n    if (!intentState.renderTasks) {\n      intentState.renderTasks = [];\n    }\n    intentState.renderTasks.push(internalRenderTask);\n    const renderTask = internalRenderTask.task;\n\n    Promise.all([\n      intentState.displayReadyCapability.promise,\n      optionalContentConfigPromise,\n    ])\n      .then(([transparency, optionalContentConfig]) => {\n        if (this.pendingCleanup) {\n          complete();\n          return;\n        }\n        if (this._stats) {\n          this._stats.time(\"Rendering\");\n        }\n        internalRenderTask.initializeGraphics({\n          transparency,\n          optionalContentConfig,\n        });\n        internalRenderTask.operatorListChanged();\n      })\n      .catch(complete);\n\n    return renderTask;\n  }\n\n  /**\n   * @returns {Promise<PDFOperatorList>} A promise resolved with an\n   *   {@link PDFOperatorList} object that represents page's operator list.\n   */\n  getOperatorList() {\n    function operatorListChanged() {\n      if (intentState.operatorList.lastChunk) {\n        intentState.opListReadCapability.resolve(intentState.operatorList);\n\n        const i = intentState.renderTasks.indexOf(opListTask);\n        if (i >= 0) {\n          intentState.renderTasks.splice(i, 1);\n        }\n      }\n    }\n\n    const renderingIntent = \"oplist\";\n    let intentState = this._intentStates.get(renderingIntent);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(renderingIntent, intentState);\n    }\n    let opListTask;\n\n    if (!intentState.opListReadCapability) {\n      opListTask = Object.create(null);\n      opListTask.operatorListChanged = operatorListChanged;\n      intentState.opListReadCapability = createPromiseCapability();\n      intentState.renderTasks = [];\n      intentState.renderTasks.push(opListTask);\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n      };\n\n      if (this._stats) {\n        this._stats.time(\"Page Request\");\n      }\n      this._pumpOperatorList({\n        pageIndex: this._pageIndex,\n        intent: renderingIntent,\n      });\n    }\n    return intentState.opListReadCapability.promise;\n  }\n\n  /**\n   * @param {getTextContentParameters} params - getTextContent parameters.\n   * @returns {ReadableStream} Stream for reading text content chunks.\n   */\n  streamTextContent({\n    normalizeWhitespace = false,\n    disableCombineTextItems = false,\n  } = {}) {\n    const TEXT_CONTENT_CHUNK_SIZE = 100;\n\n    return this._transport.messageHandler.sendWithStream(\n      \"GetTextContent\",\n      {\n        pageIndex: this._pageIndex,\n        normalizeWhitespace: normalizeWhitespace === true,\n        combineTextItems: disableCombineTextItems !== true,\n      },\n      {\n        highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n        size(textContent) {\n          return textContent.items.length;\n        },\n      }\n    );\n  }\n\n  /**\n   * @param {getTextContentParameters} params - getTextContent parameters.\n   * @returns {Promise<TextContent>} A promise that is resolved with a\n   *   {@link TextContent} object that represents the page's text content.\n   */\n  getTextContent(params = {}) {\n    const readableStream = this.streamTextContent(params);\n\n    return new Promise(function (resolve, reject) {\n      function pump() {\n        reader.read().then(function ({ value, done }) {\n          if (done) {\n            resolve(textContent);\n            return;\n          }\n          Object.assign(textContent.styles, value.styles);\n          textContent.items.push(...value.items);\n          pump();\n        }, reject);\n      }\n\n      const reader = readableStream.getReader();\n      const textContent = {\n        items: [],\n        styles: Object.create(null),\n      };\n      pump();\n    });\n  }\n\n  /**\n   * Destroys the page object.\n   * @private\n   */\n  _destroy() {\n    this.destroyed = true;\n    this._transport.pageCache[this._pageIndex] = null;\n\n    const waitOn = [];\n    for (const [intent, intentState] of this._intentStates) {\n      this._abortOperatorList({\n        intentState,\n        reason: new Error(\"Page was destroyed.\"),\n        force: true,\n      });\n\n      if (intent === \"oplist\") {\n        // Avoid errors below, since the renderTasks are just stubs.\n        continue;\n      }\n      for (const internalRenderTask of intentState.renderTasks) {\n        waitOn.push(internalRenderTask.completed);\n        internalRenderTask.cancel();\n      }\n    }\n    this.objs.clear();\n    this.annotationsPromise = null;\n    this.pendingCleanup = false;\n    return Promise.all(waitOn);\n  }\n\n  /**\n   * Cleans up resources allocated by the page.\n   *\n   * @param {boolean} [resetStats] - Reset page stats, if enabled.\n   *   The default value is `false`.\n   * @returns {boolean} Indicates if clean-up was successfully run.\n   */\n  cleanup(resetStats = false) {\n    this.pendingCleanup = true;\n    return this._tryCleanup(resetStats);\n  }\n\n  /**\n   * Attempts to clean up if rendering is in a state where that's possible.\n   * @private\n   */\n  _tryCleanup(resetStats = false) {\n    if (!this.pendingCleanup) {\n      return false;\n    }\n    for (const { renderTasks, operatorList } of this._intentStates.values()) {\n      if (renderTasks.length !== 0 || !operatorList.lastChunk) {\n        return false;\n      }\n    }\n\n    this._intentStates.clear();\n    this.objs.clear();\n    this.annotationsPromise = null;\n    if (resetStats && this._stats) {\n      this._stats = new StatTimer();\n    }\n    this.pendingCleanup = false;\n    return true;\n  }\n\n  /**\n   * @private\n   */\n  _startRenderPage(transparency, intent) {\n    const intentState = this._intentStates.get(intent);\n    if (!intentState) {\n      return; // Rendering was cancelled.\n    }\n    if (this._stats) {\n      this._stats.timeEnd(\"Page Request\");\n    }\n    // TODO Refactor RenderPageRequest to separate rendering\n    // and operator list logic\n    if (intentState.displayReadyCapability) {\n      intentState.displayReadyCapability.resolve(transparency);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _renderPageChunk(operatorListChunk, intentState) {\n    // Add the new chunk to the current operator list.\n    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n    }\n    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n\n    // Notify all the rendering tasks there are more operators to be consumed.\n    for (let i = 0; i < intentState.renderTasks.length; i++) {\n      intentState.renderTasks[i].operatorListChanged();\n    }\n\n    if (operatorListChunk.lastChunk) {\n      this._tryCleanup();\n    }\n  }\n\n  /**\n   * @private\n   */\n  _pumpOperatorList(args) {\n    assert(\n      args.intent,\n      'PDFPageProxy._pumpOperatorList: Expected \"intent\" argument.'\n    );\n\n    const readableStream = this._transport.messageHandler.sendWithStream(\n      \"GetOperatorList\",\n      args\n    );\n    const reader = readableStream.getReader();\n\n    const intentState = this._intentStates.get(args.intent);\n    intentState.streamReader = reader;\n\n    const pump = () => {\n      reader.read().then(\n        ({ value, done }) => {\n          if (done) {\n            intentState.streamReader = null;\n            return;\n          }\n          if (this._transport.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          this._renderPageChunk(value, intentState);\n          pump();\n        },\n        reason => {\n          intentState.streamReader = null;\n\n          if (this._transport.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          if (intentState.operatorList) {\n            // Mark operator list as complete.\n            intentState.operatorList.lastChunk = true;\n\n            for (let i = 0; i < intentState.renderTasks.length; i++) {\n              intentState.renderTasks[i].operatorListChanged();\n            }\n            this._tryCleanup();\n          }\n\n          if (intentState.displayReadyCapability) {\n            intentState.displayReadyCapability.reject(reason);\n          } else if (intentState.opListReadCapability) {\n            intentState.opListReadCapability.reject(reason);\n          } else {\n            throw reason;\n          }\n        }\n      );\n    };\n    pump();\n  }\n\n  /**\n   * @private\n   */\n  _abortOperatorList({ intentState, reason, force = false }) {\n    assert(\n      reason instanceof Error ||\n        (typeof reason === \"object\" && reason !== null),\n      'PDFPageProxy._abortOperatorList: Expected \"reason\" argument.'\n    );\n\n    if (!intentState.streamReader) {\n      return;\n    }\n    if (!force) {\n      // Ensure that an Error occurring in *only* one `InternalRenderTask`, e.g.\n      // multiple render() calls on the same canvas, won't break all rendering.\n      if (intentState.renderTasks.length !== 0) {\n        return;\n      }\n      // Don't immediately abort parsing on the worker-thread when rendering is\n      // cancelled, since that will unnecessarily delay re-rendering when (for\n      // partially parsed pages) e.g. zooming/rotation occurs in the viewer.\n      if (reason instanceof RenderingCancelledException) {\n        intentState.streamReaderCancelTimeout = setTimeout(() => {\n          this._abortOperatorList({ intentState, reason, force: true });\n          intentState.streamReaderCancelTimeout = null;\n        }, RENDERING_CANCELLED_TIMEOUT);\n        return;\n      }\n    }\n    intentState.streamReader.cancel(\n      new AbortException(reason && reason.message)\n    );\n    intentState.streamReader = null;\n\n    if (this._transport.destroyed) {\n      return; // Ignore any pending requests if the worker was terminated.\n    }\n    // Remove the current `intentState`, since a cancelled `getOperatorList`\n    // call on the worker-thread cannot be re-started...\n    for (const [intent, curIntentState] of this._intentStates) {\n      if (curIntentState === intentState) {\n        this._intentStates.delete(intent);\n        break;\n      }\n    }\n    // ... and force clean-up to ensure that any old state is always removed.\n    this.cleanup();\n  }\n\n  /**\n   * @type {Object} Returns page stats, if enabled; returns `null` otherwise.\n   */\n  get stats() {\n    return this._stats;\n  }\n}\n\nclass LoopbackPort {\n  constructor(defer = true) {\n    this._listeners = [];\n    this._defer = defer;\n    this._deferred = Promise.resolve(undefined);\n  }\n\n  postMessage(obj, transfers) {\n    function cloneValue(value) {\n      // Trying to perform a structured clone close to the spec, including\n      // transfers.\n      if (typeof value !== \"object\" || value === null) {\n        return value;\n      }\n      if (cloned.has(value)) {\n        // already cloned the object\n        return cloned.get(value);\n      }\n      let buffer, result;\n      if ((buffer = value.buffer) && isArrayBuffer(buffer)) {\n        // We found object with ArrayBuffer (typed array).\n        const transferable = transfers && transfers.includes(buffer);\n        if (transferable) {\n          result = new value.constructor(\n            buffer,\n            value.byteOffset,\n            value.byteLength\n          );\n        } else {\n          result = new value.constructor(value);\n        }\n        cloned.set(value, result);\n        return result;\n      }\n      result = Array.isArray(value) ? [] : {};\n      cloned.set(value, result); // adding to cache now for cyclic references\n      // Cloning all value and object properties, however ignoring properties\n      // defined via getter.\n      for (const i in value) {\n        let desc,\n          p = value;\n        while (!(desc = Object.getOwnPropertyDescriptor(p, i))) {\n          p = Object.getPrototypeOf(p);\n        }\n        if (typeof desc.value === \"undefined\") {\n          continue;\n        }\n        if (typeof desc.value === \"function\") {\n          if (value.hasOwnProperty && value.hasOwnProperty(i)) {\n            throw new Error(\n              `LoopbackPort.postMessage - cannot clone: ${value[i]}`\n            );\n          }\n          continue;\n        }\n        result[i] = cloneValue(desc.value);\n      }\n      return result;\n    }\n\n    if (!this._defer) {\n      this._listeners.forEach(listener => {\n        listener.call(this, { data: obj });\n      });\n      return;\n    }\n\n    const cloned = new WeakMap();\n    const e = { data: cloneValue(obj) };\n    this._deferred.then(() => {\n      this._listeners.forEach(listener => {\n        listener.call(this, e);\n      });\n    });\n  }\n\n  addEventListener(name, listener) {\n    this._listeners.push(listener);\n  }\n\n  removeEventListener(name, listener) {\n    const i = this._listeners.indexOf(listener);\n    this._listeners.splice(i, 1);\n  }\n\n  terminate() {\n    this._listeners.length = 0;\n  }\n}\n\n/**\n * @typedef {Object} PDFWorkerParameters\n * @property {string} [name] - The name of the worker.\n * @property {Object} [port] - The `workerPort` object.\n * @property {number} [verbosity] - Controls the logging level; the\n *   constants from {@link VerbosityLevel} should be used.\n */\n\n/** @type {any} */\nconst PDFWorker = (function PDFWorkerClosure() {\n  const pdfWorkerPorts = new WeakMap();\n  let isWorkerDisabled = false;\n  let fallbackWorkerSrc;\n  let nextFakeWorkerId = 0;\n  let fakeWorkerCapability;\n\n  if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\")) {\n    // eslint-disable-next-line no-undef\n    if (isNodeJS && typeof __non_webpack_require__ === \"function\") {\n      // Workers aren't supported in Node.js, force-disabling them there.\n      isWorkerDisabled = true;\n\n      if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"LIB\")) {\n        fallbackWorkerSrc = \"../pdf.worker.js\";\n      } else {\n        fallbackWorkerSrc = \"./pdf.worker.js\";\n      }\n    } else if (typeof document === \"object\" && \"currentScript\" in document) {\n      const pdfjsFilePath =\n        document.currentScript && document.currentScript.src;\n      if (pdfjsFilePath) {\n        fallbackWorkerSrc = pdfjsFilePath.replace(\n          /(\\.(?:min\\.)?js)(\\?.*)?$/i,\n          \".worker$1$2\"\n        );\n      }\n    }\n  }\n\n  function getWorkerSrc() {\n    if (GlobalWorkerOptions.workerSrc) {\n      return GlobalWorkerOptions.workerSrc;\n    }\n    if (typeof fallbackWorkerSrc !== \"undefined\") {\n      if (!isNodeJS) {\n        deprecated('No \"GlobalWorkerOptions.workerSrc\" specified.');\n      }\n      return fallbackWorkerSrc;\n    }\n    throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n  }\n\n  function getMainThreadWorkerMessageHandler() {\n    let mainWorkerMessageHandler;\n    try {\n      mainWorkerMessageHandler =\n        globalThis.pdfjsWorker && globalThis.pdfjsWorker.WorkerMessageHandler;\n    } catch (ex) {\n      /* Ignore errors. */\n    }\n    return mainWorkerMessageHandler || null;\n  }\n\n  // Loads worker code into main thread.\n  function setupFakeWorkerGlobal() {\n    if (fakeWorkerCapability) {\n      return fakeWorkerCapability.promise;\n    }\n    fakeWorkerCapability = createPromiseCapability();\n\n    const loader = async function () {\n      const mainWorkerMessageHandler = getMainThreadWorkerMessageHandler();\n\n      if (mainWorkerMessageHandler) {\n        // The worker was already loaded using e.g. a `<script>` tag.\n        return mainWorkerMessageHandler;\n      }\n      if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"PRODUCTION\")) {\n        if (typeof SystemJS !== \"object\") {\n          // Manually load SystemJS, since it's only necessary for fake workers.\n          await loadScript(\"../node_modules/systemjs/dist/system.js\");\n          await loadScript(\"../systemjs.config.js\");\n        }\n        const worker = await SystemJS.import(\"pdfjs/core/worker.js\");\n        return worker.WorkerMessageHandler;\n      }\n      if (\n        PDFJSDev.test(\"GENERIC\") &&\n        isNodeJS &&\n        // eslint-disable-next-line no-undef\n        typeof __non_webpack_require__ === \"function\"\n      ) {\n        // Since bundlers, such as Webpack, cannot be told to leave `require`\n        // statements alone we are thus forced to jump through hoops in order\n        // to prevent `Critical dependency: ...` warnings in third-party\n        // deployments of the built `pdf.js`/`pdf.worker.js` files; see\n        // https://github.com/webpack/webpack/issues/8826\n        //\n        // The following hack is based on the assumption that code running in\n        // Node.js won't ever be affected by e.g. Content Security Policies that\n        // prevent the use of `eval`. If that ever occurs, we should revert this\n        // to a normal `__non_webpack_require__` statement and simply document\n        // the Webpack warnings instead (telling users to ignore them).\n        //\n        // eslint-disable-next-line no-eval\n        const worker = eval(\"require\")(getWorkerSrc());\n        return worker.WorkerMessageHandler;\n      }\n      await loadScript(getWorkerSrc());\n      return window.pdfjsWorker.WorkerMessageHandler;\n    };\n    loader().then(fakeWorkerCapability.resolve, fakeWorkerCapability.reject);\n\n    return fakeWorkerCapability.promise;\n  }\n\n  function createCDNWrapper(url) {\n    // We will rely on blob URL's property to specify origin.\n    // We want this function to fail in case if createObjectURL or Blob do not\n    // exist or fail for some reason -- our Worker creation will fail anyway.\n    const wrapper = \"importScripts('\" + url + \"');\";\n    return URL.createObjectURL(new Blob([wrapper]));\n  }\n\n  /**\n   * PDF.js web worker abstraction that controls the instantiation of PDF\n   * documents. Message handlers are used to pass information from the main\n   * thread to the worker thread and vice versa. If the creation of a web\n   * worker is not possible, a \"fake\" worker will be used instead.\n   */\n  // eslint-disable-next-line no-shadow\n  class PDFWorker {\n    /**\n     * @param {PDFWorkerParameters} params - Worker initialization parameters.\n     */\n    constructor({\n      name = null,\n      port = null,\n      verbosity = getVerbosityLevel(),\n    } = {}) {\n      if (port && pdfWorkerPorts.has(port)) {\n        throw new Error(\"Cannot use more than one PDFWorker per port\");\n      }\n\n      this.name = name;\n      this.destroyed = false;\n      this.postMessageTransfers = true;\n      this.verbosity = verbosity;\n\n      this._readyCapability = createPromiseCapability();\n      this._port = null;\n      this._webWorker = null;\n      this._messageHandler = null;\n\n      if (port) {\n        pdfWorkerPorts.set(port, this);\n        this._initializeFromPort(port);\n        return;\n      }\n      this._initialize();\n    }\n\n    get promise() {\n      return this._readyCapability.promise;\n    }\n\n    get port() {\n      return this._port;\n    }\n\n    get messageHandler() {\n      return this._messageHandler;\n    }\n\n    _initializeFromPort(port) {\n      this._port = port;\n      this._messageHandler = new MessageHandler(\"main\", \"worker\", port);\n      this._messageHandler.on(\"ready\", function () {\n        // Ignoring 'ready' event -- MessageHandler shall be already initialized\n        // and ready to accept the messages.\n      });\n      this._readyCapability.resolve();\n    }\n\n    _initialize() {\n      // If worker support isn't disabled explicit and the browser has worker\n      // support, create a new web worker and test if it/the browser fulfills\n      // all requirements to run parts of pdf.js in a web worker.\n      // Right now, the requirement is, that an Uint8Array is still an\n      // Uint8Array as it arrives on the worker. (Chrome added this with v.15.)\n      if (\n        typeof Worker !== \"undefined\" &&\n        !isWorkerDisabled &&\n        !getMainThreadWorkerMessageHandler()\n      ) {\n        let workerSrc = getWorkerSrc();\n\n        try {\n          // Wraps workerSrc path into blob URL, if the former does not belong\n          // to the same origin.\n          if (\n            typeof PDFJSDev !== \"undefined\" &&\n            PDFJSDev.test(\"GENERIC\") &&\n            !isSameOrigin(window.location.href, workerSrc)\n          ) {\n            workerSrc = createCDNWrapper(\n              new URL(workerSrc, window.location).href\n            );\n          }\n\n          // Some versions of FF can't create a worker on localhost, see:\n          // https://bugzilla.mozilla.org/show_bug.cgi?id=683280\n          const worker = new Worker(workerSrc);\n          const messageHandler = new MessageHandler(\"main\", \"worker\", worker);\n          const terminateEarly = () => {\n            worker.removeEventListener(\"error\", onWorkerError);\n            messageHandler.destroy();\n            worker.terminate();\n            if (this.destroyed) {\n              this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n            } else {\n              // Fall back to fake worker if the termination is caused by an\n              // error (e.g. NetworkError / SecurityError).\n              this._setupFakeWorker();\n            }\n          };\n\n          const onWorkerError = () => {\n            if (!this._webWorker) {\n              // Worker failed to initialize due to an error. Clean up and fall\n              // back to the fake worker.\n              terminateEarly();\n            }\n          };\n          worker.addEventListener(\"error\", onWorkerError);\n\n          messageHandler.on(\"test\", data => {\n            worker.removeEventListener(\"error\", onWorkerError);\n            if (this.destroyed) {\n              terminateEarly();\n              return; // worker was destroyed\n            }\n            if (data) {\n              // supportTypedArray\n              this._messageHandler = messageHandler;\n              this._port = worker;\n              this._webWorker = worker;\n              if (!data.supportTransfers) {\n                this.postMessageTransfers = false;\n              }\n              this._readyCapability.resolve();\n              // Send global setting, e.g. verbosity level.\n              messageHandler.send(\"configure\", {\n                verbosity: this.verbosity,\n              });\n            } else {\n              this._setupFakeWorker();\n              messageHandler.destroy();\n              worker.terminate();\n            }\n          });\n\n          messageHandler.on(\"ready\", data => {\n            worker.removeEventListener(\"error\", onWorkerError);\n            if (this.destroyed) {\n              terminateEarly();\n              return; // worker was destroyed\n            }\n            try {\n              sendTest();\n            } catch (e) {\n              // We need fallback to a faked worker.\n              this._setupFakeWorker();\n            }\n          });\n\n          const sendTest = () => {\n            const testObj = new Uint8Array([\n              this.postMessageTransfers ? 255 : 0,\n            ]);\n            // Some versions of Opera throw a DATA_CLONE_ERR on serializing the\n            // typed array. Also, checking if we can use transfers.\n            try {\n              messageHandler.send(\"test\", testObj, [testObj.buffer]);\n            } catch (ex) {\n              warn(\"Cannot use postMessage transfers.\");\n              testObj[0] = 0;\n              messageHandler.send(\"test\", testObj);\n            }\n          };\n\n          // It might take time for worker to initialize (especially when AMD\n          // loader is used). We will try to send test immediately, and then\n          // when 'ready' message will arrive. The worker shall process only\n          // first received 'test'.\n          sendTest();\n          return;\n        } catch (e) {\n          info(\"The worker has been disabled.\");\n        }\n      }\n      // Either workers are disabled, not supported or have thrown an exception.\n      // Thus, we fallback to a faked worker.\n      this._setupFakeWorker();\n    }\n\n    _setupFakeWorker() {\n      if (!isWorkerDisabled) {\n        warn(\"Setting up fake worker.\");\n        isWorkerDisabled = true;\n      }\n\n      setupFakeWorkerGlobal()\n        .then(WorkerMessageHandler => {\n          if (this.destroyed) {\n            this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n            return;\n          }\n          const port = new LoopbackPort();\n          this._port = port;\n\n          // All fake workers use the same port, making id unique.\n          const id = \"fake\" + nextFakeWorkerId++;\n\n          // If the main thread is our worker, setup the handling for the\n          // messages -- the main thread sends to it self.\n          const workerHandler = new MessageHandler(id + \"_worker\", id, port);\n          WorkerMessageHandler.setup(workerHandler, port);\n\n          const messageHandler = new MessageHandler(id, id + \"_worker\", port);\n          this._messageHandler = messageHandler;\n          this._readyCapability.resolve();\n          // Send global setting, e.g. verbosity level.\n          messageHandler.send(\"configure\", {\n            verbosity: this.verbosity,\n          });\n        })\n        .catch(reason => {\n          this._readyCapability.reject(\n            new Error(`Setting up fake worker failed: \"${reason.message}\".`)\n          );\n        });\n    }\n\n    /**\n     * Destroys the worker instance.\n     */\n    destroy() {\n      this.destroyed = true;\n      if (this._webWorker) {\n        // We need to terminate only web worker created resource.\n        this._webWorker.terminate();\n        this._webWorker = null;\n      }\n      pdfWorkerPorts.delete(this._port);\n      this._port = null;\n      if (this._messageHandler) {\n        this._messageHandler.destroy();\n        this._messageHandler = null;\n      }\n    }\n\n    /**\n     * @param {PDFWorkerParameters} params - The worker initialization\n     *   parameters.\n     */\n    static fromPort(params) {\n      if (!params || !params.port) {\n        throw new Error(\"PDFWorker.fromPort - invalid method signature.\");\n      }\n      if (pdfWorkerPorts.has(params.port)) {\n        return pdfWorkerPorts.get(params.port);\n      }\n      return new PDFWorker(params);\n    }\n\n    static getWorkerSrc() {\n      return getWorkerSrc();\n    }\n  }\n  return PDFWorker;\n})();\n\n/**\n * For internal use only.\n * @ignore\n */\nclass WorkerTransport {\n  constructor(messageHandler, loadingTask, networkStream, params) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader({\n      docId: loadingTask.docId,\n      onUnsupportedFeature: this._onUnsupportedFeature.bind(this),\n      ownerDocument: params.ownerDocument,\n    });\n    this._params = params;\n    this.CMapReaderFactory = new params.CMapReaderFactory({\n      baseUrl: params.cMapUrl,\n      isCompressed: params.cMapPacked,\n    });\n\n    this.destroyed = false;\n    this.destroyCapability = null;\n    this._passwordCapability = null;\n\n    this._networkStream = networkStream;\n    this._fullReader = null;\n    this._lastProgress = null;\n\n    this.pageCache = [];\n    this.pagePromises = [];\n    this.downloadInfoCapability = createPromiseCapability();\n\n    this.setupMessageHandler();\n  }\n\n  destroy() {\n    if (this.destroyCapability) {\n      return this.destroyCapability.promise;\n    }\n\n    this.destroyed = true;\n    this.destroyCapability = createPromiseCapability();\n\n    if (this._passwordCapability) {\n      this._passwordCapability.reject(\n        new Error(\"Worker was destroyed during onPassword callback\")\n      );\n    }\n\n    const waitOn = [];\n    // We need to wait for all renderings to be completed, e.g.\n    // timeout/rAF can take a long time.\n    this.pageCache.forEach(function (page) {\n      if (page) {\n        waitOn.push(page._destroy());\n      }\n    });\n    this.pageCache.length = 0;\n    this.pagePromises.length = 0;\n    // We also need to wait for the worker to finish its long running tasks.\n    const terminated = this.messageHandler.sendWithPromise(\"Terminate\", null);\n    waitOn.push(terminated);\n    Promise.all(waitOn).then(() => {\n      this.fontLoader.clear();\n      if (this._networkStream) {\n        this._networkStream.cancelAllRequests(\n          new AbortException(\"Worker was terminated.\")\n        );\n      }\n\n      if (this.messageHandler) {\n        this.messageHandler.destroy();\n        this.messageHandler = null;\n      }\n      this.destroyCapability.resolve();\n    }, this.destroyCapability.reject);\n    return this.destroyCapability.promise;\n  }\n\n  setupMessageHandler() {\n    const { messageHandler, loadingTask } = this;\n\n    messageHandler.on(\"GetReader\", (data, sink) => {\n      assert(\n        this._networkStream,\n        \"GetReader - no `IPDFStream` instance available.\"\n      );\n      this._fullReader = this._networkStream.getFullReader();\n      this._fullReader.onProgress = evt => {\n        this._lastProgress = {\n          loaded: evt.loaded,\n          total: evt.total,\n        };\n      };\n      sink.onPull = () => {\n        this._fullReader\n          .read()\n          .then(function ({ value, done }) {\n            if (done) {\n              sink.close();\n              return;\n            }\n            assert(\n              isArrayBuffer(value),\n              \"GetReader - expected an ArrayBuffer.\"\n            );\n            // Enqueue data chunk into sink, and transfer it\n            // to other side as `Transferable` object.\n            sink.enqueue(new Uint8Array(value), 1, [value]);\n          })\n          .catch(reason => {\n            sink.error(reason);\n          });\n      };\n\n      sink.onCancel = reason => {\n        this._fullReader.cancel(reason);\n\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          throw readyReason;\n        });\n      };\n    });\n\n    messageHandler.on(\"ReaderHeadersReady\", data => {\n      const headersCapability = createPromiseCapability();\n      const fullReader = this._fullReader;\n      fullReader.headersReady.then(() => {\n        // If stream or range are disabled, it's our only way to report\n        // loading progress.\n        if (!fullReader.isStreamingSupported || !fullReader.isRangeSupported) {\n          if (this._lastProgress && loadingTask.onProgress) {\n            loadingTask.onProgress(this._lastProgress);\n          }\n          fullReader.onProgress = evt => {\n            if (loadingTask.onProgress) {\n              loadingTask.onProgress({\n                loaded: evt.loaded,\n                total: evt.total,\n              });\n            }\n          };\n        }\n\n        headersCapability.resolve({\n          isStreamingSupported: fullReader.isStreamingSupported,\n          isRangeSupported: fullReader.isRangeSupported,\n          contentLength: fullReader.contentLength,\n        });\n      }, headersCapability.reject);\n\n      return headersCapability.promise;\n    });\n\n    messageHandler.on(\"GetRangeReader\", (data, sink) => {\n      assert(\n        this._networkStream,\n        \"GetRangeReader - no `IPDFStream` instance available.\"\n      );\n      const rangeReader = this._networkStream.getRangeReader(\n        data.begin,\n        data.end\n      );\n\n      // When streaming is enabled, it's possible that the data requested here\n      // has already been fetched via the `_fullRequestReader` implementation.\n      // However, given that the PDF data is loaded asynchronously on the\n      // main-thread and then sent via `postMessage` to the worker-thread,\n      // it may not have been available during parsing (hence the attempt to\n      // use range requests here).\n      //\n      // To avoid wasting time and resources here, we'll thus *not* dispatch\n      // range requests if the data was already loaded but has not been sent to\n      // the worker-thread yet (which will happen via the `_fullRequestReader`).\n      if (!rangeReader) {\n        sink.close();\n        return;\n      }\n\n      sink.onPull = () => {\n        rangeReader\n          .read()\n          .then(function ({ value, done }) {\n            if (done) {\n              sink.close();\n              return;\n            }\n            assert(\n              isArrayBuffer(value),\n              \"GetRangeReader - expected an ArrayBuffer.\"\n            );\n            sink.enqueue(new Uint8Array(value), 1, [value]);\n          })\n          .catch(reason => {\n            sink.error(reason);\n          });\n      };\n\n      sink.onCancel = reason => {\n        rangeReader.cancel(reason);\n\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          throw readyReason;\n        });\n      };\n    });\n\n    messageHandler.on(\"GetDoc\", ({ pdfInfo }) => {\n      this._numPages = pdfInfo.numPages;\n      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n    });\n\n    messageHandler.on(\"DocException\", function (ex) {\n      let reason;\n      switch (ex.name) {\n        case \"PasswordException\":\n          reason = new PasswordException(ex.message, ex.code);\n          break;\n        case \"InvalidPDFException\":\n          reason = new InvalidPDFException(ex.message);\n          break;\n        case \"MissingPDFException\":\n          reason = new MissingPDFException(ex.message);\n          break;\n        case \"UnexpectedResponseException\":\n          reason = new UnexpectedResponseException(ex.message, ex.status);\n          break;\n        case \"UnknownErrorException\":\n          reason = new UnknownErrorException(ex.message, ex.details);\n          break;\n      }\n      if (!(reason instanceof Error)) {\n        const msg = \"DocException - expected a valid Error.\";\n        if (\n          typeof PDFJSDev === \"undefined\" ||\n          PDFJSDev.test(\"!PRODUCTION || TESTING\")\n        ) {\n          unreachable(msg);\n        } else {\n          warn(msg);\n        }\n      }\n      loadingTask._capability.reject(reason);\n    });\n\n    messageHandler.on(\"PasswordRequest\", exception => {\n      this._passwordCapability = createPromiseCapability();\n\n      if (loadingTask.onPassword) {\n        const updatePassword = password => {\n          this._passwordCapability.resolve({\n            password,\n          });\n        };\n        try {\n          loadingTask.onPassword(updatePassword, exception.code);\n        } catch (ex) {\n          this._passwordCapability.reject(ex);\n        }\n      } else {\n        this._passwordCapability.reject(\n          new PasswordException(exception.message, exception.code)\n        );\n      }\n      return this._passwordCapability.promise;\n    });\n\n    messageHandler.on(\"DataLoaded\", data => {\n      // For consistency: Ensure that progress is always reported when the\n      // entire PDF file has been loaded, regardless of how it was fetched.\n      if (loadingTask.onProgress) {\n        loadingTask.onProgress({\n          loaded: data.length,\n          total: data.length,\n        });\n      }\n      this.downloadInfoCapability.resolve(data);\n    });\n\n    messageHandler.on(\"StartRenderPage\", data => {\n      if (this.destroyed) {\n        return; // Ignore any pending requests if the worker was terminated.\n      }\n\n      const page = this.pageCache[data.pageIndex];\n      page._startRenderPage(data.transparency, data.intent);\n    });\n\n    messageHandler.on(\"commonobj\", data => {\n      if (this.destroyed) {\n        return; // Ignore any pending requests if the worker was terminated.\n      }\n\n      const [id, type, exportedData] = data;\n      if (this.commonObjs.has(id)) {\n        return;\n      }\n\n      switch (type) {\n        case \"Font\":\n          const params = this._params;\n\n          if (\"error\" in exportedData) {\n            const exportedError = exportedData.error;\n            warn(`Error during font loading: ${exportedError}`);\n            this.commonObjs.resolve(id, exportedError);\n            break;\n          }\n\n          let fontRegistry = null;\n          if (\n            params.pdfBug &&\n            globalThis.FontInspector &&\n            globalThis.FontInspector.enabled\n          ) {\n            fontRegistry = {\n              registerFont(font, url) {\n                globalThis.FontInspector.fontAdded(font, url);\n              },\n            };\n          }\n          const font = new FontFaceObject(exportedData, {\n            isEvalSupported: params.isEvalSupported,\n            disableFontFace: params.disableFontFace,\n            ignoreErrors: params.ignoreErrors,\n            onUnsupportedFeature: this._onUnsupportedFeature.bind(this),\n            fontRegistry,\n          });\n\n          this.fontLoader\n            .bind(font)\n            .catch(reason => {\n              return messageHandler.sendWithPromise(\"FontFallback\", { id });\n            })\n            .finally(() => {\n              if (!params.fontExtraProperties && font.data) {\n                // Immediately release the `font.data` property once the font\n                // has been attached to the DOM, since it's no longer needed,\n                // rather than waiting for a `PDFDocumentProxy.cleanup` call.\n                // Since `font.data` could be very large, e.g. in some cases\n                // multiple megabytes, this will help reduce memory usage.\n                font.data = null;\n              }\n              this.commonObjs.resolve(id, font);\n            });\n          break;\n        case \"FontPath\":\n        case \"Image\":\n          this.commonObjs.resolve(id, exportedData);\n          break;\n        default:\n          throw new Error(`Got unknown common object type ${type}`);\n      }\n    });\n\n    messageHandler.on(\"obj\", data => {\n      if (this.destroyed) {\n        // Ignore any pending requests if the worker was terminated.\n        return undefined;\n      }\n\n      const [id, pageIndex, type, imageData] = data;\n      const pageProxy = this.pageCache[pageIndex];\n      if (pageProxy.objs.has(id)) {\n        return undefined;\n      }\n\n      switch (type) {\n        case \"Image\":\n          pageProxy.objs.resolve(id, imageData);\n\n          // Heuristic that will allow us not to store large data.\n          const MAX_IMAGE_SIZE_TO_STORE = 8000000;\n          if (\n            imageData &&\n            \"data\" in imageData &&\n            imageData.data.length > MAX_IMAGE_SIZE_TO_STORE\n          ) {\n            pageProxy.cleanupAfterRender = true;\n          }\n          break;\n        default:\n          throw new Error(`Got unknown object type ${type}`);\n      }\n      return undefined;\n    });\n\n    messageHandler.on(\"DocProgress\", data => {\n      if (this.destroyed) {\n        return; // Ignore any pending requests if the worker was terminated.\n      }\n\n      if (loadingTask.onProgress) {\n        loadingTask.onProgress({\n          loaded: data.loaded,\n          total: data.total,\n        });\n      }\n    });\n\n    messageHandler.on(\n      \"UnsupportedFeature\",\n      this._onUnsupportedFeature.bind(this)\n    );\n\n    messageHandler.on(\"FetchBuiltInCMap\", (data, sink) => {\n      if (this.destroyed) {\n        sink.error(new Error(\"Worker was destroyed\"));\n        return;\n      }\n      let fetched = false;\n\n      sink.onPull = () => {\n        if (fetched) {\n          sink.close();\n          return;\n        }\n        fetched = true;\n\n        this.CMapReaderFactory.fetch(data)\n          .then(function (builtInCMap) {\n            sink.enqueue(builtInCMap, 1, [builtInCMap.cMapData.buffer]);\n          })\n          .catch(function (reason) {\n            sink.error(reason);\n          });\n      };\n    });\n  }\n\n  _onUnsupportedFeature({ featureId }) {\n    if (this.destroyed) {\n      return; // Ignore any pending requests if the worker was terminated.\n    }\n    if (this.loadingTask.onUnsupportedFeature) {\n      this.loadingTask.onUnsupportedFeature(featureId);\n    }\n  }\n\n  getData() {\n    return this.messageHandler.sendWithPromise(\"GetData\", null);\n  }\n\n  getPage(pageNumber) {\n    if (\n      !Number.isInteger(pageNumber) ||\n      pageNumber <= 0 ||\n      pageNumber > this._numPages\n    ) {\n      return Promise.reject(new Error(\"Invalid page request\"));\n    }\n\n    const pageIndex = pageNumber - 1;\n    if (pageIndex in this.pagePromises) {\n      return this.pagePromises[pageIndex];\n    }\n    const promise = this.messageHandler\n      .sendWithPromise(\"GetPage\", {\n        pageIndex,\n      })\n      .then(pageInfo => {\n        if (this.destroyed) {\n          throw new Error(\"Transport destroyed\");\n        }\n        const page = new PDFPageProxy(\n          pageIndex,\n          pageInfo,\n          this,\n          this._params.ownerDocument,\n          this._params.pdfBug\n        );\n        this.pageCache[pageIndex] = page;\n        return page;\n      });\n    this.pagePromises[pageIndex] = promise;\n    return promise;\n  }\n\n  getPageIndex(ref) {\n    return this.messageHandler\n      .sendWithPromise(\"GetPageIndex\", {\n        ref,\n      })\n      .catch(function (reason) {\n        return Promise.reject(new Error(reason));\n      });\n  }\n\n  getAnnotations(pageIndex, intent) {\n    return this.messageHandler.sendWithPromise(\"GetAnnotations\", {\n      pageIndex,\n      intent,\n    });\n  }\n\n  saveDocument(annotationStorage) {\n    return this.messageHandler\n      .sendWithPromise(\"SaveDocument\", {\n        numPages: this._numPages,\n        annotationStorage:\n          (annotationStorage && annotationStorage.getAll()) || null,\n        filename: this._fullReader ? this._fullReader.filename : null,\n      })\n      .finally(() => {\n        if (annotationStorage) {\n          annotationStorage.resetModified();\n        }\n      });\n  }\n\n  getDestinations() {\n    return this.messageHandler.sendWithPromise(\"GetDestinations\", null);\n  }\n\n  getDestination(id) {\n    if (typeof id !== \"string\") {\n      return Promise.reject(new Error(\"Invalid destination request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetDestination\", {\n      id,\n    });\n  }\n\n  getPageLabels() {\n    return this.messageHandler.sendWithPromise(\"GetPageLabels\", null);\n  }\n\n  getPageLayout() {\n    return this.messageHandler.sendWithPromise(\"GetPageLayout\", null);\n  }\n\n  getPageMode() {\n    return this.messageHandler.sendWithPromise(\"GetPageMode\", null);\n  }\n\n  getViewerPreferences() {\n    return this.messageHandler.sendWithPromise(\"GetViewerPreferences\", null);\n  }\n\n  getOpenAction() {\n    return this.messageHandler.sendWithPromise(\"GetOpenAction\", null);\n  }\n\n  getAttachments() {\n    return this.messageHandler.sendWithPromise(\"GetAttachments\", null);\n  }\n\n  getJavaScript() {\n    return this.messageHandler.sendWithPromise(\"GetJavaScript\", null);\n  }\n\n  getOutline() {\n    return this.messageHandler.sendWithPromise(\"GetOutline\", null);\n  }\n\n  getOptionalContentConfig() {\n    return this.messageHandler\n      .sendWithPromise(\"GetOptionalContentConfig\", null)\n      .then(results => {\n        return new OptionalContentConfig(results);\n      });\n  }\n\n  getPermissions() {\n    return this.messageHandler.sendWithPromise(\"GetPermissions\", null);\n  }\n\n  getMetadata() {\n    return this.messageHandler\n      .sendWithPromise(\"GetMetadata\", null)\n      .then(results => {\n        return {\n          info: results[0],\n          metadata: results[1] ? new Metadata(results[1]) : null,\n          contentDispositionFilename: this._fullReader\n            ? this._fullReader.filename\n            : null,\n        };\n      });\n  }\n\n  getStats() {\n    return this.messageHandler.sendWithPromise(\"GetStats\", null);\n  }\n\n  startCleanup() {\n    return this.messageHandler.sendWithPromise(\"Cleanup\", null).then(() => {\n      for (let i = 0, ii = this.pageCache.length; i < ii; i++) {\n        const page = this.pageCache[i];\n        if (page) {\n          const cleanupSuccessful = page.cleanup();\n\n          if (!cleanupSuccessful) {\n            throw new Error(\n              `startCleanup: Page ${i + 1} is currently rendering.`\n            );\n          }\n        }\n      }\n      this.commonObjs.clear();\n      this.fontLoader.clear();\n    });\n  }\n\n  get loadingParams() {\n    const params = this._params;\n    return shadow(this, \"loadingParams\", {\n      disableAutoFetch: params.disableAutoFetch,\n      disableFontFace: params.disableFontFace,\n    });\n  }\n}\n\n/**\n * A PDF document and page is built of many objects. E.g. there are objects for\n * fonts, images, rendering code, etc. These objects may get processed inside of\n * a worker. This class implements some basic methods to manage these objects.\n * @ignore\n */\nclass PDFObjects {\n  constructor() {\n    this._objs = Object.create(null);\n  }\n\n  /**\n   * Ensures there is an object defined for `objId`.\n   * @private\n   */\n  _ensureObj(objId) {\n    if (this._objs[objId]) {\n      return this._objs[objId];\n    }\n    return (this._objs[objId] = {\n      capability: createPromiseCapability(),\n      data: null,\n      resolved: false,\n    });\n  }\n\n  /**\n   * If called *without* callback, this returns the data of `objId` but the\n   * object needs to be resolved. If it isn't, this method throws.\n   *\n   * If called *with* a callback, the callback is called with the data of the\n   * object once the object is resolved. That means, if you call this method\n   * and the object is already resolved, the callback gets called right away.\n   */\n  get(objId, callback = null) {\n    // If there is a callback, then the get can be async and the object is\n    // not required to be resolved right now.\n    if (callback) {\n      this._ensureObj(objId).capability.promise.then(callback);\n      return null;\n    }\n    // If there isn't a callback, the user expects to get the resolved data\n    // directly.\n    const obj = this._objs[objId];\n    // If there isn't an object yet or the object isn't resolved, then the\n    // data isn't ready yet!\n    if (!obj || !obj.resolved) {\n      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);\n    }\n    return obj.data;\n  }\n\n  has(objId) {\n    const obj = this._objs[objId];\n    return obj ? obj.resolved : false;\n  }\n\n  /**\n   * Resolves the object `objId` with optional `data`.\n   */\n  resolve(objId, data) {\n    const obj = this._ensureObj(objId);\n\n    obj.resolved = true;\n    obj.data = data;\n    obj.capability.resolve(data);\n  }\n\n  clear() {\n    this._objs = Object.create(null);\n  }\n}\n\n/**\n * Allows controlling of the rendering tasks.\n */\nclass RenderTask {\n  constructor(internalRenderTask) {\n    this._internalRenderTask = internalRenderTask;\n\n    /**\n     * Callback for incremental rendering -- a function that will be called\n     * each time the rendering is paused.  To continue rendering call the\n     * function that is the first argument to the callback.\n     * @type {function}\n     */\n    this.onContinue = null;\n  }\n\n  /**\n   * Promise for rendering task completion.\n   * @type {Promise<void>}\n   */\n  get promise() {\n    return this._internalRenderTask.capability.promise;\n  }\n\n  /**\n   * Cancels the rendering task. If the task is currently rendering it will\n   * not be cancelled until graphics pauses with a timeout. The promise that\n   * this object extends will be rejected when cancelled.\n   */\n  cancel() {\n    this._internalRenderTask.cancel();\n  }\n}\n\n/**\n * For internal use only.\n * @ignore\n */\nconst InternalRenderTask = (function InternalRenderTaskClosure() {\n  const canvasInRendering = new WeakSet();\n\n  // eslint-disable-next-line no-shadow\n  class InternalRenderTask {\n    constructor({\n      callback,\n      params,\n      objs,\n      commonObjs,\n      operatorList,\n      pageIndex,\n      canvasFactory,\n      webGLContext,\n      useRequestAnimationFrame = false,\n      pdfBug = false,\n    }) {\n      this.callback = callback;\n      this.params = params;\n      this.objs = objs;\n      this.commonObjs = commonObjs;\n      this.operatorListIdx = null;\n      this.operatorList = operatorList;\n      this._pageIndex = pageIndex;\n      this.canvasFactory = canvasFactory;\n      this.webGLContext = webGLContext;\n      this._pdfBug = pdfBug;\n\n      this.running = false;\n      this.graphicsReadyCallback = null;\n      this.graphicsReady = false;\n      this._useRequestAnimationFrame =\n        useRequestAnimationFrame === true && typeof window !== \"undefined\";\n      this.cancelled = false;\n      this.capability = createPromiseCapability();\n      this.task = new RenderTask(this);\n      // caching this-bound methods\n      this._continueBound = this._continue.bind(this);\n      this._scheduleNextBound = this._scheduleNext.bind(this);\n      this._nextBound = this._next.bind(this);\n      this._canvas = params.canvasContext.canvas;\n    }\n\n    get completed() {\n      return this.capability.promise.catch(function () {\n        // Ignoring errors, since we only want to know when rendering is\n        // no longer pending.\n      });\n    }\n\n    initializeGraphics({ transparency = false, optionalContentConfig }) {\n      if (this.cancelled) {\n        return;\n      }\n      if (this._canvas) {\n        if (canvasInRendering.has(this._canvas)) {\n          throw new Error(\n            \"Cannot use the same canvas during multiple render() operations. \" +\n              \"Use different canvas or ensure previous operations were \" +\n              \"cancelled or completed.\"\n          );\n        }\n        canvasInRendering.add(this._canvas);\n      }\n\n      if (\n        this._pdfBug &&\n        globalThis.StepperManager &&\n        globalThis.StepperManager.enabled\n      ) {\n        this.stepper = globalThis.StepperManager.create(this._pageIndex);\n        this.stepper.init(this.operatorList);\n        this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n      }\n      const {\n        canvasContext,\n        viewport,\n        transform,\n        imageLayer,\n        background,\n      } = this.params;\n\n      this.gfx = new CanvasGraphics(\n        canvasContext,\n        this.commonObjs,\n        this.objs,\n        this.canvasFactory,\n        this.webGLContext,\n        imageLayer,\n        optionalContentConfig\n      );\n      this.gfx.beginDrawing({\n        transform,\n        viewport,\n        transparency,\n        background,\n      });\n      this.operatorListIdx = 0;\n      this.graphicsReady = true;\n      if (this.graphicsReadyCallback) {\n        this.graphicsReadyCallback();\n      }\n    }\n\n    cancel(error = null) {\n      this.running = false;\n      this.cancelled = true;\n      if (this.gfx) {\n        this.gfx.endDrawing();\n      }\n      if (this._canvas) {\n        canvasInRendering.delete(this._canvas);\n      }\n      this.callback(\n        error ||\n          new RenderingCancelledException(\n            `Rendering cancelled, page ${this._pageIndex + 1}`,\n            \"canvas\"\n          )\n      );\n    }\n\n    operatorListChanged() {\n      if (!this.graphicsReady) {\n        if (!this.graphicsReadyCallback) {\n          this.graphicsReadyCallback = this._continueBound;\n        }\n        return;\n      }\n\n      if (this.stepper) {\n        this.stepper.updateOperatorList(this.operatorList);\n      }\n\n      if (this.running) {\n        return;\n      }\n      this._continue();\n    }\n\n    _continue() {\n      this.running = true;\n      if (this.cancelled) {\n        return;\n      }\n      if (this.task.onContinue) {\n        this.task.onContinue(this._scheduleNextBound);\n      } else {\n        this._scheduleNext();\n      }\n    }\n\n    _scheduleNext() {\n      if (this._useRequestAnimationFrame) {\n        window.requestAnimationFrame(() => {\n          this._nextBound().catch(this.cancel.bind(this));\n        });\n      } else {\n        Promise.resolve().then(this._nextBound).catch(this.cancel.bind(this));\n      }\n    }\n\n    async _next() {\n      if (this.cancelled) {\n        return;\n      }\n      this.operatorListIdx = this.gfx.executeOperatorList(\n        this.operatorList,\n        this.operatorListIdx,\n        this._continueBound,\n        this.stepper\n      );\n      if (this.operatorListIdx === this.operatorList.argsArray.length) {\n        this.running = false;\n        if (this.operatorList.lastChunk) {\n          this.gfx.endDrawing();\n          if (this._canvas) {\n            canvasInRendering.delete(this._canvas);\n          }\n          this.callback();\n        }\n      }\n    }\n  }\n  return InternalRenderTask;\n})();\n\n/** @type {string} */\nconst version =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_VERSION\") : null;\n/** @type {string} */\nconst build =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_BUILD\") : null;\n\nexport {\n  getDocument,\n  LoopbackPort,\n  PDFDataRangeTransport,\n  PDFWorker,\n  PDFDocumentProxy,\n  PDFPageProxy,\n  setPDFNetworkStreamFactory,\n  version,\n  build,\n};\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert,\n  bytesToString,\n  IsEvalSupportedCached,\n  shadow,\n  string32,\n  unreachable,\n  UNSUPPORTED_FEATURES,\n  warn,\n} from \"../shared/util.js\";\n\nclass BaseFontLoader {\n  constructor({\n    docId,\n    onUnsupportedFeature,\n    ownerDocument = globalThis.document,\n  }) {\n    if (this.constructor === BaseFontLoader) {\n      unreachable(\"Cannot initialize BaseFontLoader.\");\n    }\n    this.docId = docId;\n    this._onUnsupportedFeature = onUnsupportedFeature;\n    this._document = ownerDocument;\n\n    this.nativeFontFaces = [];\n    this.styleElement = null;\n  }\n\n  addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.push(nativeFontFace);\n    this._document.fonts.add(nativeFontFace);\n  }\n\n  insertRule(rule) {\n    let styleElement = this.styleElement;\n    if (!styleElement) {\n      styleElement = this.styleElement = this._document.createElement(\"style\");\n      styleElement.id = `PDFJS_FONT_STYLE_TAG_${this.docId}`;\n      this._document.documentElement\n        .getElementsByTagName(\"head\")[0]\n        .appendChild(styleElement);\n    }\n\n    const styleSheet = styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n\n  clear() {\n    this.nativeFontFaces.forEach(nativeFontFace => {\n      this._document.fonts.delete(nativeFontFace);\n    });\n    this.nativeFontFaces.length = 0;\n\n    if (this.styleElement) {\n      // Note: ChildNode.remove doesn't throw if the parentNode is undefined.\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n  }\n\n  async bind(font) {\n    // Add the font to the DOM only once; skip if the font is already loaded.\n    if (font.attached || font.missingFile) {\n      return;\n    }\n    font.attached = true;\n\n    if (this.isFontLoadingAPISupported) {\n      const nativeFontFace = font.createNativeFontFace();\n      if (nativeFontFace) {\n        this.addNativeFontFace(nativeFontFace);\n        try {\n          await nativeFontFace.loaded;\n        } catch (ex) {\n          this._onUnsupportedFeature({\n            featureId: UNSUPPORTED_FEATURES.errorFontLoadNative,\n          });\n          warn(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);\n\n          // When font loading failed, fall back to the built-in font renderer.\n          font.disableFontFace = true;\n          throw ex;\n        }\n      }\n      return; // The font was, asynchronously, loaded.\n    }\n\n    // !this.isFontLoadingAPISupported\n    const rule = font.createFontFaceRule();\n    if (rule) {\n      this.insertRule(rule);\n\n      if (this.isSyncFontLoadingSupported) {\n        return; // The font was, synchronously, loaded.\n      }\n      await new Promise(resolve => {\n        const request = this._queueLoadingCallback(resolve);\n        this._prepareFontLoadEvent([rule], [font], request);\n      });\n      // The font was, asynchronously, loaded.\n    }\n  }\n\n  _queueLoadingCallback(callback) {\n    unreachable(\"Abstract method `_queueLoadingCallback`.\");\n  }\n\n  get isFontLoadingAPISupported() {\n    const supported =\n      typeof this._document !== \"undefined\" && !!this._document.fonts;\n    return shadow(this, \"isFontLoadingAPISupported\", supported);\n  }\n\n  // eslint-disable-next-line getter-return\n  get isSyncFontLoadingSupported() {\n    unreachable(\"Abstract method `isSyncFontLoadingSupported`.\");\n  }\n\n  // eslint-disable-next-line getter-return\n  get _loadTestFont() {\n    unreachable(\"Abstract method `_loadTestFont`.\");\n  }\n\n  _prepareFontLoadEvent(rules, fontsToLoad, request) {\n    unreachable(\"Abstract method `_prepareFontLoadEvent`.\");\n  }\n}\n\nlet FontLoader;\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  FontLoader = class MozcentralFontLoader extends BaseFontLoader {\n    get isSyncFontLoadingSupported() {\n      return shadow(this, \"isSyncFontLoadingSupported\", true);\n    }\n  };\n} else {\n  // PDFJSDev.test('CHROME || GENERIC')\n\n  FontLoader = class GenericFontLoader extends BaseFontLoader {\n    constructor(params) {\n      super(params);\n      this.loadingContext = {\n        requests: [],\n        nextRequestId: 0,\n      };\n      this.loadTestFontId = 0;\n    }\n\n    get isSyncFontLoadingSupported() {\n      let supported = false;\n      if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"CHROME\")) {\n        if (typeof navigator === \"undefined\") {\n          // Node.js - we can pretend that sync font loading is supported.\n          supported = true;\n        } else {\n          // User agent string sniffing is bad, but there is no reliable way to\n          // tell if the font is fully loaded and ready to be used with canvas.\n          const m = /Mozilla\\/5.0.*?rv:(\\d+).*? Gecko/.exec(\n            navigator.userAgent\n          );\n          if (m && m[1] >= 14) {\n            supported = true;\n          }\n          // TODO - other browsers...\n        }\n      }\n      return shadow(this, \"isSyncFontLoadingSupported\", supported);\n    }\n\n    _queueLoadingCallback(callback) {\n      function completeRequest() {\n        assert(!request.done, \"completeRequest() cannot be called twice.\");\n        request.done = true;\n\n        // Sending all completed requests in order of how they were queued.\n        while (context.requests.length > 0 && context.requests[0].done) {\n          const otherRequest = context.requests.shift();\n          setTimeout(otherRequest.callback, 0);\n        }\n      }\n\n      const context = this.loadingContext;\n      const request = {\n        id: `pdfjs-font-loading-${context.nextRequestId++}`,\n        done: false,\n        complete: completeRequest,\n        callback,\n      };\n      context.requests.push(request);\n      return request;\n    }\n\n    get _loadTestFont() {\n      const getLoadTestFont = function () {\n        // This is a CFF font with 1 glyph for '.' that fills its entire width\n        // and height.\n        return atob(\n          \"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\" +\n            \"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\" +\n            \"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\" +\n            \"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\" +\n            \"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\" +\n            \"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\" +\n            \"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\" +\n            \"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\" +\n            \"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\" +\n            \"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\" +\n            \"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\" +\n            \"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\" +\n            \"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n            \"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n            \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n            \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n            \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n            \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\" +\n            \"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\" +\n            \"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\" +\n            \"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\" +\n            \"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\"\n        );\n      };\n      return shadow(this, \"_loadTestFont\", getLoadTestFont());\n    }\n\n    _prepareFontLoadEvent(rules, fonts, request) {\n      /** Hack begin */\n      // There's currently no event when a font has finished downloading so the\n      // following code is a dirty hack to 'guess' when a font is ready.\n      // It's assumed fonts are loaded in order, so add a known test font after\n      // the desired fonts and then test for the loading of that test font.\n\n      function int32(data, offset) {\n        return (\n          (data.charCodeAt(offset) << 24) |\n          (data.charCodeAt(offset + 1) << 16) |\n          (data.charCodeAt(offset + 2) << 8) |\n          (data.charCodeAt(offset + 3) & 0xff)\n        );\n      }\n      function spliceString(s, offset, remove, insert) {\n        const chunk1 = s.substring(0, offset);\n        const chunk2 = s.substring(offset + remove);\n        return chunk1 + insert + chunk2;\n      }\n      let i, ii;\n\n      // The temporary canvas is used to determine if fonts are loaded.\n      const canvas = this._document.createElement(\"canvas\");\n      canvas.width = 1;\n      canvas.height = 1;\n      const ctx = canvas.getContext(\"2d\");\n\n      let called = 0;\n      function isFontReady(name, callback) {\n        called++;\n        // With setTimeout clamping this gives the font ~100ms to load.\n        if (called > 30) {\n          warn(\"Load test font never loaded.\");\n          callback();\n          return;\n        }\n        ctx.font = \"30px \" + name;\n        ctx.fillText(\".\", 0, 20);\n        const imageData = ctx.getImageData(0, 0, 1, 1);\n        if (imageData.data[3] > 0) {\n          callback();\n          return;\n        }\n        setTimeout(isFontReady.bind(null, name, callback));\n      }\n\n      const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;\n      // Chromium seems to cache fonts based on a hash of the actual font data,\n      // so the font must be modified for each load test else it will appear to\n      // be loaded already.\n      // TODO: This could maybe be made faster by avoiding the btoa of the full\n      // font by splitting it in chunks before hand and padding the font id.\n      let data = this._loadTestFont;\n      const COMMENT_OFFSET = 976; // has to be on 4 byte boundary (for checksum)\n      data = spliceString(\n        data,\n        COMMENT_OFFSET,\n        loadTestFontId.length,\n        loadTestFontId\n      );\n      // CFF checksum is important for IE, adjusting it\n      const CFF_CHECKSUM_OFFSET = 16;\n      const XXXX_VALUE = 0x58585858; // the \"comment\" filled with 'X'\n      let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n      for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n        checksum = (checksum - XXXX_VALUE + int32(loadTestFontId, i)) | 0;\n      }\n      if (i < loadTestFontId.length) {\n        // align to 4 bytes boundary\n        checksum =\n          (checksum - XXXX_VALUE + int32(loadTestFontId + \"XXX\", i)) | 0;\n      }\n      data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n\n      const url = `url(data:font/opentype;base64,${btoa(data)});`;\n      const rule = `@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;\n      this.insertRule(rule);\n\n      const names = [];\n      for (i = 0, ii = fonts.length; i < ii; i++) {\n        names.push(fonts[i].loadedName);\n      }\n      names.push(loadTestFontId);\n\n      const div = this._document.createElement(\"div\");\n      div.style.visibility = \"hidden\";\n      div.style.width = div.style.height = \"10px\";\n      div.style.position = \"absolute\";\n      div.style.top = div.style.left = \"0px\";\n\n      for (i = 0, ii = names.length; i < ii; ++i) {\n        const span = this._document.createElement(\"span\");\n        span.textContent = \"Hi\";\n        span.style.fontFamily = names[i];\n        div.appendChild(span);\n      }\n      this._document.body.appendChild(div);\n\n      isFontReady(loadTestFontId, () => {\n        this._document.body.removeChild(div);\n        request.complete();\n      });\n      /** Hack end */\n    }\n  };\n} // End of PDFJSDev.test('CHROME || GENERIC')\n\nclass FontFaceObject {\n  constructor(\n    translatedData,\n    {\n      isEvalSupported = true,\n      disableFontFace = false,\n      ignoreErrors = false,\n      onUnsupportedFeature = null,\n      fontRegistry = null,\n    }\n  ) {\n    this.compiledGlyphs = Object.create(null);\n    // importing translated data\n    for (const i in translatedData) {\n      this[i] = translatedData[i];\n    }\n    this.isEvalSupported = isEvalSupported !== false;\n    this.disableFontFace = disableFontFace === true;\n    this.ignoreErrors = ignoreErrors === true;\n    this._onUnsupportedFeature = onUnsupportedFeature;\n    this.fontRegistry = fontRegistry;\n  }\n\n  createNativeFontFace() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    const nativeFontFace = new FontFace(this.loadedName, this.data, {});\n\n    if (this.fontRegistry) {\n      this.fontRegistry.registerFont(this);\n    }\n    return nativeFontFace;\n  }\n\n  createFontFaceRule() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    const data = bytesToString(new Uint8Array(this.data));\n    // Add the @font-face rule to the document.\n    const url = `url(data:${this.mimetype};base64,${btoa(data)});`;\n    const rule = `@font-face {font-family:\"${this.loadedName}\";src:${url}}`;\n\n    if (this.fontRegistry) {\n      this.fontRegistry.registerFont(this, url);\n    }\n    return rule;\n  }\n\n  getPathGenerator(objs, character) {\n    if (this.compiledGlyphs[character] !== undefined) {\n      return this.compiledGlyphs[character];\n    }\n\n    let cmds, current;\n    try {\n      cmds = objs.get(this.loadedName + \"_path_\" + character);\n    } catch (ex) {\n      if (!this.ignoreErrors) {\n        throw ex;\n      }\n      if (this._onUnsupportedFeature) {\n        this._onUnsupportedFeature({\n          featureId: UNSUPPORTED_FEATURES.errorFontGetPath,\n        });\n      }\n      warn(`getPathGenerator - ignoring character: \"${ex}\".`);\n\n      return (this.compiledGlyphs[character] = function (c, size) {\n        // No-op function, to allow rendering to continue.\n      });\n    }\n\n    // If we can, compile cmds into JS for MAXIMUM SPEED...\n    if (this.isEvalSupported && IsEvalSupportedCached.value) {\n      let args,\n        js = \"\";\n      for (let i = 0, ii = cmds.length; i < ii; i++) {\n        current = cmds[i];\n\n        if (current.args !== undefined) {\n          args = current.args.join(\",\");\n        } else {\n          args = \"\";\n        }\n        js += \"c.\" + current.cmd + \"(\" + args + \");\\n\";\n      }\n      // eslint-disable-next-line no-new-func\n      return (this.compiledGlyphs[character] = new Function(\"c\", \"size\", js));\n    }\n    // ... but fall back on using Function.prototype.apply() if we're\n    // blocked from using eval() for whatever reason (like CSP policies).\n    return (this.compiledGlyphs[character] = function (c, size) {\n      for (let i = 0, ii = cmds.length; i < ii; i++) {\n        current = cmds[i];\n\n        if (current.cmd === \"scale\") {\n          current.args = [size, -size];\n        }\n        c[current.cmd].apply(c, current.args);\n      }\n    });\n  }\n}\n\nexport { FontFaceObject, FontLoader };\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals __non_webpack_require__ */\n/* eslint no-var: error */\n\nimport { BaseCanvasFactory, BaseCMapReaderFactory } from \"./display_utils.js\";\nimport { isNodeJS } from \"../shared/is_node.js\";\nimport { unreachable } from \"../shared/util.js\";\n\nlet NodeCanvasFactory = class {\n  constructor() {\n    unreachable(\"Not implemented: NodeCanvasFactory\");\n  }\n};\n\nlet NodeCMapReaderFactory = class {\n  constructor() {\n    unreachable(\"Not implemented: NodeCMapReaderFactory\");\n  }\n};\n\nif ((typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) && isNodeJS) {\n  NodeCanvasFactory = class extends BaseCanvasFactory {\n    create(width, height) {\n      if (width <= 0 || height <= 0) {\n        throw new Error(\"Invalid canvas size\");\n      }\n      const Canvas = __non_webpack_require__(\"canvas\");\n      const canvas = Canvas.createCanvas(width, height);\n      return {\n        canvas,\n        context: canvas.getContext(\"2d\"),\n      };\n    }\n  };\n\n  NodeCMapReaderFactory = class extends BaseCMapReaderFactory {\n    _fetchData(url, compressionType) {\n      return new Promise((resolve, reject) => {\n        const fs = __non_webpack_require__(\"fs\");\n        fs.readFile(url, (error, data) => {\n          if (error || !data) {\n            reject(new Error(error));\n            return;\n          }\n          resolve({ cMapData: new Uint8Array(data), compressionType });\n        });\n      });\n    }\n  };\n}\n\nexport { NodeCanvasFactory, NodeCMapReaderFactory };\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Key/value storage for annotation data in forms.\n */\nclass AnnotationStorage {\n  constructor() {\n    this._storage = new Map();\n    this._modified = false;\n\n    // Callbacks to signal when the modification state is set or reset.\n    // This is used by the viewer to only bind on `beforeunload` if forms\n    // are actually edited to prevent doing so unconditionally since that\n    // can have undesirable efffects.\n    this.onSetModified = null;\n    this.onResetModified = null;\n  }\n\n  /**\n   * Get the value for a given key if it exists\n   * or store and return the default value\n   *\n   * @public\n   * @memberof AnnotationStorage\n   * @param {string} key\n   * @param {Object} defaultValue\n   * @returns {Object}\n   */\n  getOrCreateValue(key, defaultValue) {\n    if (this._storage.has(key)) {\n      return this._storage.get(key);\n    }\n\n    this._storage.set(key, defaultValue);\n    return defaultValue;\n  }\n\n  /**\n   * Set the value for a given key\n   *\n   * @public\n   * @memberof AnnotationStorage\n   * @param {string} key\n   * @param {Object} value\n   */\n  setValue(key, value) {\n    if (this._storage.get(key) !== value) {\n      this._setModified();\n    }\n    this._storage.set(key, value);\n  }\n\n  getAll() {\n    if (this._storage.size === 0) {\n      return null;\n    }\n    return Object.fromEntries(this._storage);\n  }\n\n  get size() {\n    return this._storage.size;\n  }\n\n  /**\n   * @private\n   */\n  _setModified() {\n    if (!this._modified) {\n      this._modified = true;\n      if (typeof this.onSetModified === \"function\") {\n        this.onSetModified();\n      }\n    }\n  }\n\n  resetModified() {\n    if (this._modified) {\n      this._modified = false;\n      if (typeof this.onResetModified === \"function\") {\n        this.onResetModified();\n      }\n    }\n  }\n}\n\nexport { AnnotationStorage };\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isNodeJS } from \"../shared/is_node.js\";\n\nconst compatibilityParams = Object.create(null);\nif (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) {\n  // Support: Node.js\n  (function checkFontFace() {\n    // Node.js is missing native support for `@font-face`.\n    if (isNodeJS) {\n      compatibilityParams.disableFontFace = true;\n    }\n  })();\n}\nconst apiCompatibilityParams = Object.freeze(compatibilityParams);\n\nexport { apiCompatibilityParams };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FONT_IDENTITY_MATRIX,\n  IDENTITY_MATRIX,\n  ImageKind,\n  info,\n  IsLittleEndianCached,\n  isNum,\n  OPS,\n  shadow,\n  TextRenderingMode,\n  unreachable,\n  Util,\n  warn,\n} from \"../shared/util.js\";\nimport { getShadingPatternFromIR, TilingPattern } from \"./pattern_helper.js\";\n\n// <canvas> contexts store most of the state we need natively.\n// However, PDF needs a bit more state, which we store here.\n\n// Minimal font size that would be used during canvas fillText operations.\nvar MIN_FONT_SIZE = 16;\n// Maximum font size that would be used during canvas fillText operations.\nvar MAX_FONT_SIZE = 100;\nvar MAX_GROUP_SIZE = 4096;\n\n// Heuristic value used when enforcing minimum line widths.\nvar MIN_WIDTH_FACTOR = 0.65;\n\nvar COMPILE_TYPE3_GLYPHS = true;\nvar MAX_SIZE_TO_COMPILE = 1000;\n\nvar FULL_CHUNK_HEIGHT = 16;\n\nfunction addContextCurrentTransform(ctx) {\n  // If the context doesn't expose a `mozCurrentTransform`, add a JS based one.\n  if (!ctx.mozCurrentTransform) {\n    ctx._originalSave = ctx.save;\n    ctx._originalRestore = ctx.restore;\n    ctx._originalRotate = ctx.rotate;\n    ctx._originalScale = ctx.scale;\n    ctx._originalTranslate = ctx.translate;\n    ctx._originalTransform = ctx.transform;\n    ctx._originalSetTransform = ctx.setTransform;\n\n    ctx._transformMatrix = ctx._transformMatrix || [1, 0, 0, 1, 0, 0];\n    ctx._transformStack = [];\n\n    Object.defineProperty(ctx, \"mozCurrentTransform\", {\n      get: function getCurrentTransform() {\n        return this._transformMatrix;\n      },\n    });\n\n    Object.defineProperty(ctx, \"mozCurrentTransformInverse\", {\n      get: function getCurrentTransformInverse() {\n        // Calculation done using WolframAlpha:\n        // http://www.wolframalpha.com/input/?\n        //   i=Inverse+{{a%2C+c%2C+e}%2C+{b%2C+d%2C+f}%2C+{0%2C+0%2C+1}}\n\n        var m = this._transformMatrix;\n        var a = m[0],\n          b = m[1],\n          c = m[2],\n          d = m[3],\n          e = m[4],\n          f = m[5];\n\n        var ad_bc = a * d - b * c;\n        var bc_ad = b * c - a * d;\n\n        return [\n          d / ad_bc,\n          b / bc_ad,\n          c / bc_ad,\n          a / ad_bc,\n          (d * e - c * f) / bc_ad,\n          (b * e - a * f) / ad_bc,\n        ];\n      },\n    });\n\n    ctx.save = function ctxSave() {\n      var old = this._transformMatrix;\n      this._transformStack.push(old);\n      this._transformMatrix = old.slice(0, 6);\n\n      this._originalSave();\n    };\n\n    ctx.restore = function ctxRestore() {\n      var prev = this._transformStack.pop();\n      if (prev) {\n        this._transformMatrix = prev;\n        this._originalRestore();\n      }\n    };\n\n    ctx.translate = function ctxTranslate(x, y) {\n      var m = this._transformMatrix;\n      m[4] = m[0] * x + m[2] * y + m[4];\n      m[5] = m[1] * x + m[3] * y + m[5];\n\n      this._originalTranslate(x, y);\n    };\n\n    ctx.scale = function ctxScale(x, y) {\n      var m = this._transformMatrix;\n      m[0] = m[0] * x;\n      m[1] = m[1] * x;\n      m[2] = m[2] * y;\n      m[3] = m[3] * y;\n\n      this._originalScale(x, y);\n    };\n\n    ctx.transform = function ctxTransform(a, b, c, d, e, f) {\n      var m = this._transformMatrix;\n      this._transformMatrix = [\n        m[0] * a + m[2] * b,\n        m[1] * a + m[3] * b,\n        m[0] * c + m[2] * d,\n        m[1] * c + m[3] * d,\n        m[0] * e + m[2] * f + m[4],\n        m[1] * e + m[3] * f + m[5],\n      ];\n\n      ctx._originalTransform(a, b, c, d, e, f);\n    };\n\n    ctx.setTransform = function ctxSetTransform(a, b, c, d, e, f) {\n      this._transformMatrix = [a, b, c, d, e, f];\n\n      ctx._originalSetTransform(a, b, c, d, e, f);\n    };\n\n    ctx.rotate = function ctxRotate(angle) {\n      var cosValue = Math.cos(angle);\n      var sinValue = Math.sin(angle);\n\n      var m = this._transformMatrix;\n      this._transformMatrix = [\n        m[0] * cosValue + m[2] * sinValue,\n        m[1] * cosValue + m[3] * sinValue,\n        m[0] * -sinValue + m[2] * cosValue,\n        m[1] * -sinValue + m[3] * cosValue,\n        m[4],\n        m[5],\n      ];\n\n      this._originalRotate(angle);\n    };\n  }\n}\n\nvar CachedCanvases = (function CachedCanvasesClosure() {\n  // eslint-disable-next-line no-shadow\n  function CachedCanvases(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n  CachedCanvases.prototype = {\n    getCanvas: function CachedCanvases_getCanvas(\n      id,\n      width,\n      height,\n      trackTransform\n    ) {\n      var canvasEntry;\n      if (this.cache[id] !== undefined) {\n        canvasEntry = this.cache[id];\n        this.canvasFactory.reset(canvasEntry, width, height);\n        // reset canvas transform for emulated mozCurrentTransform, if needed\n        canvasEntry.context.setTransform(1, 0, 0, 1, 0, 0);\n      } else {\n        canvasEntry = this.canvasFactory.create(width, height);\n        this.cache[id] = canvasEntry;\n      }\n      if (trackTransform) {\n        addContextCurrentTransform(canvasEntry.context);\n      }\n      return canvasEntry;\n    },\n    clear() {\n      for (var id in this.cache) {\n        var canvasEntry = this.cache[id];\n        this.canvasFactory.destroy(canvasEntry);\n        delete this.cache[id];\n      }\n    },\n  };\n  return CachedCanvases;\n})();\n\nfunction compileType3Glyph(imgData) {\n  var POINT_TO_PROCESS_LIMIT = 1000;\n\n  var width = imgData.width,\n    height = imgData.height;\n  var i,\n    j,\n    j0,\n    width1 = width + 1;\n  var points = new Uint8Array(width1 * (height + 1));\n  // prettier-ignore\n  var POINT_TYPES =\n      new Uint8Array([0, 2, 4, 0, 1, 0, 5, 4, 8, 10, 0, 8, 0, 2, 1, 0]);\n\n  // decodes bit-packed mask data\n  var lineSize = (width + 7) & ~7,\n    data0 = imgData.data;\n  var data = new Uint8Array(lineSize * height),\n    pos = 0,\n    ii;\n  for (i = 0, ii = data0.length; i < ii; i++) {\n    var mask = 128,\n      elem = data0[i];\n    while (mask > 0) {\n      data[pos++] = elem & mask ? 0 : 255;\n      mask >>= 1;\n    }\n  }\n\n  // finding interesting points: every point is located between mask pixels,\n  // so there will be points of the (width + 1)x(height + 1) grid. Every point\n  // will have flags assigned based on neighboring mask pixels:\n  //   4 | 8\n  //   --P--\n  //   2 | 1\n  // We are interested only in points with the flags:\n  //   - outside corners: 1, 2, 4, 8;\n  //   - inside corners: 7, 11, 13, 14;\n  //   - and, intersections: 5, 10.\n  var count = 0;\n  pos = 0;\n  if (data[pos] !== 0) {\n    points[0] = 1;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j] = data[pos] ? 2 : 1;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j] = 2;\n    ++count;\n  }\n  for (i = 1; i < height; i++) {\n    pos = i * lineSize;\n    j0 = i * width1;\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0] = data[pos] ? 1 : 8;\n      ++count;\n    }\n    // 'sum' is the position of the current pixel configuration in the 'TYPES'\n    // array (in order 8-1-2-4, so we can use '>>2' to shift the column).\n    var sum = (data[pos] ? 4 : 0) + (data[pos - lineSize] ? 8 : 0);\n    for (j = 1; j < width; j++) {\n      sum =\n        (sum >> 2) +\n        (data[pos + 1] ? 4 : 0) +\n        (data[pos - lineSize + 1] ? 8 : 0);\n      if (POINT_TYPES[sum]) {\n        points[j0 + j] = POINT_TYPES[sum];\n        ++count;\n      }\n      pos++;\n    }\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0 + j] = data[pos] ? 2 : 4;\n      ++count;\n    }\n\n    if (count > POINT_TO_PROCESS_LIMIT) {\n      return null;\n    }\n  }\n\n  pos = lineSize * (height - 1);\n  j0 = i * width1;\n  if (data[pos] !== 0) {\n    points[j0] = 8;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j0 + j] = data[pos] ? 4 : 8;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j0 + j] = 4;\n    ++count;\n  }\n  if (count > POINT_TO_PROCESS_LIMIT) {\n    return null;\n  }\n\n  // building outlines\n  var steps = new Int32Array([0, width1, -1, 0, -width1, 0, 0, 0, 1]);\n  var outlines = [];\n  for (i = 0; count && i <= height; i++) {\n    var p = i * width1;\n    var end = p + width;\n    while (p < end && !points[p]) {\n      p++;\n    }\n    if (p === end) {\n      continue;\n    }\n    var coords = [p % width1, i];\n\n    var type = points[p],\n      p0 = p,\n      pp;\n    do {\n      var step = steps[type];\n      do {\n        p += step;\n      } while (!points[p]);\n\n      pp = points[p];\n      if (pp !== 5 && pp !== 10) {\n        // set new direction\n        type = pp;\n        // delete mark\n        points[p] = 0;\n      } else {\n        // type is 5 or 10, ie, a crossing\n        // set new direction\n        type = pp & ((0x33 * type) >> 4);\n        // set new type for \"future hit\"\n        points[p] &= (type >> 2) | (type << 2);\n      }\n\n      coords.push(p % width1);\n      coords.push((p / width1) | 0);\n\n      if (!points[p]) {\n        --count;\n      }\n    } while (p0 !== p);\n    outlines.push(coords);\n    --i;\n  }\n\n  var drawOutline = function (c) {\n    c.save();\n    // the path shall be painted in [0..1]x[0..1] space\n    c.scale(1 / width, -1 / height);\n    c.translate(0, -height);\n    c.beginPath();\n    for (let k = 0, kk = outlines.length; k < kk; k++) {\n      var o = outlines[k];\n      c.moveTo(o[0], o[1]);\n      for (let l = 2, ll = o.length; l < ll; l += 2) {\n        c.lineTo(o[l], o[l + 1]);\n      }\n    }\n    c.fill();\n    c.beginPath();\n    c.restore();\n  };\n\n  return drawOutline;\n}\n\nvar CanvasExtraState = (function CanvasExtraStateClosure() {\n  // eslint-disable-next-line no-shadow\n  function CanvasExtraState() {\n    // Are soft masks and alpha values shapes or opacities?\n    this.alphaIsShape = false;\n    this.fontSize = 0;\n    this.fontSizeScale = 1;\n    this.textMatrix = IDENTITY_MATRIX;\n    this.textMatrixScale = 1;\n    this.fontMatrix = FONT_IDENTITY_MATRIX;\n    this.leading = 0;\n    // Current point (in user coordinates)\n    this.x = 0;\n    this.y = 0;\n    // Start of text line (in text coordinates)\n    this.lineX = 0;\n    this.lineY = 0;\n    // Character and word spacing\n    this.charSpacing = 0;\n    this.wordSpacing = 0;\n    this.textHScale = 1;\n    this.textRenderingMode = TextRenderingMode.FILL;\n    this.textRise = 0;\n    // Default fore and background colors\n    this.fillColor = \"#000000\";\n    this.strokeColor = \"#000000\";\n    this.patternFill = false;\n    // Note: fill alpha applies to all non-stroking operations\n    this.fillAlpha = 1;\n    this.strokeAlpha = 1;\n    this.lineWidth = 1;\n    this.activeSMask = null;\n    this.resumeSMaskCtx = null; // nonclonable field (see the save method below)\n    this.transferMaps = null;\n  }\n\n  CanvasExtraState.prototype = {\n    clone: function CanvasExtraState_clone() {\n      return Object.create(this);\n    },\n    setCurrentPoint: function CanvasExtraState_setCurrentPoint(x, y) {\n      this.x = x;\n      this.y = y;\n    },\n  };\n  return CanvasExtraState;\n})();\n\n/**\n * @type {any}\n */\nvar CanvasGraphics = (function CanvasGraphicsClosure() {\n  // Defines the time the executeOperatorList is going to be executing\n  // before it stops and shedules a continue of execution.\n  var EXECUTION_TIME = 15;\n  // Defines the number of steps before checking the execution time\n  var EXECUTION_STEPS = 10;\n\n  // eslint-disable-next-line no-shadow\n  function CanvasGraphics(\n    canvasCtx,\n    commonObjs,\n    objs,\n    canvasFactory,\n    webGLContext,\n    imageLayer,\n    optionalContentConfig\n  ) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState();\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.webGLContext = webGLContext;\n    this.imageLayer = imageLayer;\n    this.groupStack = [];\n    this.processingType3 = null;\n    // Patterns are painted relative to the initial page/form transform, see pdf\n    // spec 8.7.2 NOTE 1.\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.contentVisible = true;\n    this.markedContentStack = [];\n    this.optionalContentConfig = optionalContentConfig;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    if (canvasCtx) {\n      // NOTE: if mozCurrentTransform is polyfilled, then the current state of\n      // the transformation must already be set in canvasCtx._transformMatrix.\n      addContextCurrentTransform(canvasCtx);\n    }\n    this._cachedGetSinglePixelWidth = null;\n  }\n\n  function putBinaryImageData(ctx, imgData, transferMaps = null) {\n    if (typeof ImageData !== \"undefined\" && imgData instanceof ImageData) {\n      ctx.putImageData(imgData, 0, 0);\n      return;\n    }\n\n    // Put the image data to the canvas in chunks, rather than putting the\n    // whole image at once.  This saves JS memory, because the ImageData object\n    // is smaller. It also possibly saves C++ memory within the implementation\n    // of putImageData(). (E.g. in Firefox we make two short-lived copies of\n    // the data passed to putImageData()). |n| shouldn't be too small, however,\n    // because too many putImageData() calls will slow things down.\n    //\n    // Note: as written, if the last chunk is partial, the putImageData() call\n    // will (conceptually) put pixels past the bounds of the canvas.  But\n    // that's ok; any such pixels are ignored.\n\n    var height = imgData.height,\n      width = imgData.width;\n    var partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n    var fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n    var totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n\n    var chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n    var srcPos = 0,\n      destPos;\n    var src = imgData.data;\n    var dest = chunkImgData.data;\n    var i, j, thisChunkHeight, elemsInThisChunk;\n\n    let transferMapRed, transferMapGreen, transferMapBlue, transferMapGray;\n    if (transferMaps) {\n      switch (transferMaps.length) {\n        case 1:\n          transferMapRed = transferMaps[0];\n          transferMapGreen = transferMaps[0];\n          transferMapBlue = transferMaps[0];\n          transferMapGray = transferMaps[0];\n          break;\n        case 4:\n          transferMapRed = transferMaps[0];\n          transferMapGreen = transferMaps[1];\n          transferMapBlue = transferMaps[2];\n          transferMapGray = transferMaps[3];\n          break;\n      }\n    }\n\n    // There are multiple forms in which the pixel data can be passed, and\n    // imgData.kind tells us which one this is.\n    if (imgData.kind === ImageKind.GRAYSCALE_1BPP) {\n      // Grayscale, 1 bit per pixel (i.e. black-and-white).\n      var srcLength = src.byteLength;\n      var dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n      var dest32DataLength = dest32.length;\n      var fullSrcDiff = (width + 7) >> 3;\n      var white = 0xffffffff;\n      var black = IsLittleEndianCached.value ? 0xff000000 : 0x000000ff;\n\n      if (transferMapGray) {\n        if (transferMapGray[0] === 0xff && transferMapGray[0xff] === 0) {\n          [white, black] = [black, white];\n        }\n      }\n\n      for (i = 0; i < totalChunks; i++) {\n        thisChunkHeight =\n          i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n        destPos = 0;\n        for (j = 0; j < thisChunkHeight; j++) {\n          var srcDiff = srcLength - srcPos;\n          let k = 0;\n          var kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n          var kEndUnrolled = kEnd & ~7;\n          var mask = 0;\n          var srcByte = 0;\n          for (; k < kEndUnrolled; k += 8) {\n            srcByte = src[srcPos++];\n            dest32[destPos++] = srcByte & 128 ? white : black;\n            dest32[destPos++] = srcByte & 64 ? white : black;\n            dest32[destPos++] = srcByte & 32 ? white : black;\n            dest32[destPos++] = srcByte & 16 ? white : black;\n            dest32[destPos++] = srcByte & 8 ? white : black;\n            dest32[destPos++] = srcByte & 4 ? white : black;\n            dest32[destPos++] = srcByte & 2 ? white : black;\n            dest32[destPos++] = srcByte & 1 ? white : black;\n          }\n          for (; k < kEnd; k++) {\n            if (mask === 0) {\n              srcByte = src[srcPos++];\n              mask = 128;\n            }\n\n            dest32[destPos++] = srcByte & mask ? white : black;\n            mask >>= 1;\n          }\n        }\n        // We ran out of input. Make all remaining pixels transparent.\n        while (destPos < dest32DataLength) {\n          dest32[destPos++] = 0;\n        }\n\n        ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n      }\n    } else if (imgData.kind === ImageKind.RGBA_32BPP) {\n      // RGBA, 32-bits per pixel.\n      const hasTransferMaps = !!(\n        transferMapRed ||\n        transferMapGreen ||\n        transferMapBlue\n      );\n\n      j = 0;\n      elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n      for (i = 0; i < fullChunks; i++) {\n        dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n        srcPos += elemsInThisChunk;\n\n        if (hasTransferMaps) {\n          for (let k = 0; k < elemsInThisChunk; k += 4) {\n            if (transferMapRed) {\n              dest[k + 0] = transferMapRed[dest[k + 0]];\n            }\n            if (transferMapGreen) {\n              dest[k + 1] = transferMapGreen[dest[k + 1]];\n            }\n            if (transferMapBlue) {\n              dest[k + 2] = transferMapBlue[dest[k + 2]];\n            }\n          }\n        }\n\n        ctx.putImageData(chunkImgData, 0, j);\n        j += FULL_CHUNK_HEIGHT;\n      }\n      if (i < totalChunks) {\n        elemsInThisChunk = width * partialChunkHeight * 4;\n        dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n\n        if (hasTransferMaps) {\n          for (let k = 0; k < elemsInThisChunk; k += 4) {\n            if (transferMapRed) {\n              dest[k + 0] = transferMapRed[dest[k + 0]];\n            }\n            if (transferMapGreen) {\n              dest[k + 1] = transferMapGreen[dest[k + 1]];\n            }\n            if (transferMapBlue) {\n              dest[k + 2] = transferMapBlue[dest[k + 2]];\n            }\n          }\n        }\n\n        ctx.putImageData(chunkImgData, 0, j);\n      }\n    } else if (imgData.kind === ImageKind.RGB_24BPP) {\n      // RGB, 24-bits per pixel.\n      const hasTransferMaps = !!(\n        transferMapRed ||\n        transferMapGreen ||\n        transferMapBlue\n      );\n\n      thisChunkHeight = FULL_CHUNK_HEIGHT;\n      elemsInThisChunk = width * thisChunkHeight;\n      for (i = 0; i < totalChunks; i++) {\n        if (i >= fullChunks) {\n          thisChunkHeight = partialChunkHeight;\n          elemsInThisChunk = width * thisChunkHeight;\n        }\n\n        destPos = 0;\n        for (j = elemsInThisChunk; j--; ) {\n          dest[destPos++] = src[srcPos++];\n          dest[destPos++] = src[srcPos++];\n          dest[destPos++] = src[srcPos++];\n          dest[destPos++] = 255;\n        }\n\n        if (hasTransferMaps) {\n          for (let k = 0; k < destPos; k += 4) {\n            if (transferMapRed) {\n              dest[k + 0] = transferMapRed[dest[k + 0]];\n            }\n            if (transferMapGreen) {\n              dest[k + 1] = transferMapGreen[dest[k + 1]];\n            }\n            if (transferMapBlue) {\n              dest[k + 2] = transferMapBlue[dest[k + 2]];\n            }\n          }\n        }\n\n        ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n      }\n    } else {\n      throw new Error(`bad image kind: ${imgData.kind}`);\n    }\n  }\n\n  function putBinaryImageMask(ctx, imgData) {\n    var height = imgData.height,\n      width = imgData.width;\n    var partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n    var fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n    var totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n\n    var chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n    var srcPos = 0;\n    var src = imgData.data;\n    var dest = chunkImgData.data;\n\n    for (var i = 0; i < totalChunks; i++) {\n      var thisChunkHeight =\n        i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n\n      // Expand the mask so it can be used by the canvas.  Any required\n      // inversion has already been handled.\n      var destPos = 3; // alpha component offset\n      for (var j = 0; j < thisChunkHeight; j++) {\n        var mask = 0;\n        for (var k = 0; k < width; k++) {\n          if (!mask) {\n            var elem = src[srcPos++];\n            mask = 128;\n          }\n          dest[destPos] = elem & mask ? 0 : 255;\n          destPos += 4;\n          mask >>= 1;\n        }\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  }\n\n  function copyCtxState(sourceCtx, destCtx) {\n    var properties = [\n      \"strokeStyle\",\n      \"fillStyle\",\n      \"fillRule\",\n      \"globalAlpha\",\n      \"lineWidth\",\n      \"lineCap\",\n      \"lineJoin\",\n      \"miterLimit\",\n      \"globalCompositeOperation\",\n      \"font\",\n    ];\n    for (var i = 0, ii = properties.length; i < ii; i++) {\n      var property = properties[i];\n      if (sourceCtx[property] !== undefined) {\n        destCtx[property] = sourceCtx[property];\n      }\n    }\n    if (sourceCtx.setLineDash !== undefined) {\n      destCtx.setLineDash(sourceCtx.getLineDash());\n      destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n    }\n  }\n\n  function resetCtxToDefault(ctx) {\n    ctx.strokeStyle = \"#000000\";\n    ctx.fillStyle = \"#000000\";\n    ctx.fillRule = \"nonzero\";\n    ctx.globalAlpha = 1;\n    ctx.lineWidth = 1;\n    ctx.lineCap = \"butt\";\n    ctx.lineJoin = \"miter\";\n    ctx.miterLimit = 10;\n    ctx.globalCompositeOperation = \"source-over\";\n    ctx.font = \"10px sans-serif\";\n    if (ctx.setLineDash !== undefined) {\n      ctx.setLineDash([]);\n      ctx.lineDashOffset = 0;\n    }\n  }\n\n  function composeSMaskBackdrop(bytes, r0, g0, b0) {\n    var length = bytes.length;\n    for (var i = 3; i < length; i += 4) {\n      var alpha = bytes[i];\n      if (alpha === 0) {\n        bytes[i - 3] = r0;\n        bytes[i - 2] = g0;\n        bytes[i - 1] = b0;\n      } else if (alpha < 255) {\n        var alpha_ = 255 - alpha;\n        bytes[i - 3] = (bytes[i - 3] * alpha + r0 * alpha_) >> 8;\n        bytes[i - 2] = (bytes[i - 2] * alpha + g0 * alpha_) >> 8;\n        bytes[i - 1] = (bytes[i - 1] * alpha + b0 * alpha_) >> 8;\n      }\n    }\n  }\n\n  function composeSMaskAlpha(maskData, layerData, transferMap) {\n    var length = maskData.length;\n    var scale = 1 / 255;\n    for (var i = 3; i < length; i += 4) {\n      var alpha = transferMap ? transferMap[maskData[i]] : maskData[i];\n      layerData[i] = (layerData[i] * alpha * scale) | 0;\n    }\n  }\n\n  function composeSMaskLuminosity(maskData, layerData, transferMap) {\n    var length = maskData.length;\n    for (var i = 3; i < length; i += 4) {\n      var y =\n        maskData[i - 3] * 77 + // * 0.3 / 255 * 0x10000\n        maskData[i - 2] * 152 + // * 0.59 ....\n        maskData[i - 1] * 28; // * 0.11 ....\n      layerData[i] = transferMap\n        ? (layerData[i] * transferMap[y >> 8]) >> 8\n        : (layerData[i] * y) >> 16;\n    }\n  }\n\n  function genericComposeSMask(\n    maskCtx,\n    layerCtx,\n    width,\n    height,\n    subtype,\n    backdrop,\n    transferMap\n  ) {\n    var hasBackdrop = !!backdrop;\n    var r0 = hasBackdrop ? backdrop[0] : 0;\n    var g0 = hasBackdrop ? backdrop[1] : 0;\n    var b0 = hasBackdrop ? backdrop[2] : 0;\n\n    var composeFn;\n    if (subtype === \"Luminosity\") {\n      composeFn = composeSMaskLuminosity;\n    } else {\n      composeFn = composeSMaskAlpha;\n    }\n\n    // processing image in chunks to save memory\n    var PIXELS_TO_PROCESS = 1048576;\n    var chunkSize = Math.min(height, Math.ceil(PIXELS_TO_PROCESS / width));\n    for (var row = 0; row < height; row += chunkSize) {\n      var chunkHeight = Math.min(chunkSize, height - row);\n      var maskData = maskCtx.getImageData(0, row, width, chunkHeight);\n      var layerData = layerCtx.getImageData(0, row, width, chunkHeight);\n\n      if (hasBackdrop) {\n        composeSMaskBackdrop(maskData.data, r0, g0, b0);\n      }\n      composeFn(maskData.data, layerData.data, transferMap);\n\n      maskCtx.putImageData(layerData, 0, row);\n    }\n  }\n\n  function composeSMask(ctx, smask, layerCtx, webGLContext) {\n    var mask = smask.canvas;\n    var maskCtx = smask.context;\n\n    ctx.setTransform(\n      smask.scaleX,\n      0,\n      0,\n      smask.scaleY,\n      smask.offsetX,\n      smask.offsetY\n    );\n\n    var backdrop = smask.backdrop || null;\n    if (!smask.transferMap && webGLContext.isEnabled) {\n      const composed = webGLContext.composeSMask({\n        layer: layerCtx.canvas,\n        mask,\n        properties: {\n          subtype: smask.subtype,\n          backdrop,\n        },\n      });\n      ctx.setTransform(1, 0, 0, 1, 0, 0);\n      ctx.drawImage(composed, smask.offsetX, smask.offsetY);\n      return;\n    }\n    genericComposeSMask(\n      maskCtx,\n      layerCtx,\n      mask.width,\n      mask.height,\n      smask.subtype,\n      backdrop,\n      smask.transferMap\n    );\n    ctx.drawImage(mask, 0, 0);\n  }\n\n  var LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\n  var LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\n  var NORMAL_CLIP = {};\n  var EO_CLIP = {};\n\n  CanvasGraphics.prototype = {\n    beginDrawing({\n      transform,\n      viewport,\n      transparency = false,\n      background = null,\n    }) {\n      // For pdfs that use blend modes we have to clear the canvas else certain\n      // blend modes can look wrong since we'd be blending with a white\n      // backdrop. The problem with a transparent backdrop though is we then\n      // don't get sub pixel anti aliasing on text, creating temporary\n      // transparent canvas when we have blend modes.\n      var width = this.ctx.canvas.width;\n      var height = this.ctx.canvas.height;\n\n      this.ctx.save();\n      this.ctx.fillStyle = background || \"rgb(255, 255, 255)\";\n      this.ctx.fillRect(0, 0, width, height);\n      this.ctx.restore();\n\n      if (transparency) {\n        var transparentCanvas = this.cachedCanvases.getCanvas(\n          \"transparent\",\n          width,\n          height,\n          true\n        );\n        this.compositeCtx = this.ctx;\n        this.transparentCanvas = transparentCanvas.canvas;\n        this.ctx = transparentCanvas.context;\n        this.ctx.save();\n        // The transform can be applied before rendering, transferring it to\n        // the new canvas.\n        this.ctx.transform.apply(\n          this.ctx,\n          this.compositeCtx.mozCurrentTransform\n        );\n      }\n\n      this.ctx.save();\n      resetCtxToDefault(this.ctx);\n      if (transform) {\n        this.ctx.transform.apply(this.ctx, transform);\n      }\n      this.ctx.transform.apply(this.ctx, viewport.transform);\n\n      this.baseTransform = this.ctx.mozCurrentTransform.slice();\n\n      if (this.imageLayer) {\n        this.imageLayer.beginLayout();\n      }\n    },\n\n    executeOperatorList: function CanvasGraphics_executeOperatorList(\n      operatorList,\n      executionStartIdx,\n      continueCallback,\n      stepper\n    ) {\n      var argsArray = operatorList.argsArray;\n      var fnArray = operatorList.fnArray;\n      var i = executionStartIdx || 0;\n      var argsArrayLen = argsArray.length;\n\n      // Sometimes the OperatorList to execute is empty.\n      if (argsArrayLen === i) {\n        return i;\n      }\n\n      var chunkOperations =\n        argsArrayLen - i > EXECUTION_STEPS &&\n        typeof continueCallback === \"function\";\n      var endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n      var steps = 0;\n\n      var commonObjs = this.commonObjs;\n      var objs = this.objs;\n      var fnId;\n\n      while (true) {\n        if (stepper !== undefined && i === stepper.nextBreakPoint) {\n          stepper.breakIt(i, continueCallback);\n          return i;\n        }\n\n        fnId = fnArray[i];\n\n        if (fnId !== OPS.dependency) {\n          this[fnId].apply(this, argsArray[i]);\n        } else {\n          for (const depObjId of argsArray[i]) {\n            const objsPool = depObjId.startsWith(\"g_\") ? commonObjs : objs;\n\n            // If the promise isn't resolved yet, add the continueCallback\n            // to the promise and bail out.\n            if (!objsPool.has(depObjId)) {\n              objsPool.get(depObjId, continueCallback);\n              return i;\n            }\n          }\n        }\n\n        i++;\n\n        // If the entire operatorList was executed, stop as were done.\n        if (i === argsArrayLen) {\n          return i;\n        }\n\n        // If the execution took longer then a certain amount of time and\n        // `continueCallback` is specified, interrupt the execution.\n        if (chunkOperations && ++steps > EXECUTION_STEPS) {\n          if (Date.now() > endTime) {\n            continueCallback();\n            return i;\n          }\n          steps = 0;\n        }\n\n        // If the operatorList isn't executed completely yet OR the execution\n        // time was short enough, do another execution round.\n      }\n    },\n\n    endDrawing: function CanvasGraphics_endDrawing() {\n      // Finishing all opened operations such as SMask group painting.\n      if (this.current.activeSMask !== null) {\n        this.endSMaskGroup();\n      }\n\n      this.ctx.restore();\n\n      if (this.transparentCanvas) {\n        this.ctx = this.compositeCtx;\n        this.ctx.save();\n        this.ctx.setTransform(1, 0, 0, 1, 0, 0); // Avoid apply transform twice\n        this.ctx.drawImage(this.transparentCanvas, 0, 0);\n        this.ctx.restore();\n        this.transparentCanvas = null;\n      }\n\n      this.cachedCanvases.clear();\n      this.webGLContext.clear();\n\n      if (this.imageLayer) {\n        this.imageLayer.endLayout();\n      }\n    },\n\n    // Graphics state\n    setLineWidth: function CanvasGraphics_setLineWidth(width) {\n      this.current.lineWidth = width;\n      this.ctx.lineWidth = width;\n    },\n    setLineCap: function CanvasGraphics_setLineCap(style) {\n      this.ctx.lineCap = LINE_CAP_STYLES[style];\n    },\n    setLineJoin: function CanvasGraphics_setLineJoin(style) {\n      this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n    },\n    setMiterLimit: function CanvasGraphics_setMiterLimit(limit) {\n      this.ctx.miterLimit = limit;\n    },\n    setDash: function CanvasGraphics_setDash(dashArray, dashPhase) {\n      var ctx = this.ctx;\n      if (ctx.setLineDash !== undefined) {\n        ctx.setLineDash(dashArray);\n        ctx.lineDashOffset = dashPhase;\n      }\n    },\n    setRenderingIntent(intent) {\n      // This operation is ignored since we haven't found a use case for it yet.\n    },\n    setFlatness(flatness) {\n      // This operation is ignored since we haven't found a use case for it yet.\n    },\n    setGState: function CanvasGraphics_setGState(states) {\n      for (var i = 0, ii = states.length; i < ii; i++) {\n        var state = states[i];\n        var key = state[0];\n        var value = state[1];\n\n        switch (key) {\n          case \"LW\":\n            this.setLineWidth(value);\n            break;\n          case \"LC\":\n            this.setLineCap(value);\n            break;\n          case \"LJ\":\n            this.setLineJoin(value);\n            break;\n          case \"ML\":\n            this.setMiterLimit(value);\n            break;\n          case \"D\":\n            this.setDash(value[0], value[1]);\n            break;\n          case \"RI\":\n            this.setRenderingIntent(value);\n            break;\n          case \"FL\":\n            this.setFlatness(value);\n            break;\n          case \"Font\":\n            this.setFont(value[0], value[1]);\n            break;\n          case \"CA\":\n            this.current.strokeAlpha = state[1];\n            break;\n          case \"ca\":\n            this.current.fillAlpha = state[1];\n            this.ctx.globalAlpha = state[1];\n            break;\n          case \"BM\":\n            this.ctx.globalCompositeOperation = value;\n            break;\n          case \"SMask\":\n            if (this.current.activeSMask) {\n              // If SMask is currrenly used, it needs to be suspended or\n              // finished. Suspend only makes sense when at least one save()\n              // was performed and state needs to be reverted on restore().\n              if (\n                this.stateStack.length > 0 &&\n                this.stateStack[this.stateStack.length - 1].activeSMask ===\n                  this.current.activeSMask\n              ) {\n                this.suspendSMaskGroup();\n              } else {\n                this.endSMaskGroup();\n              }\n            }\n            this.current.activeSMask = value ? this.tempSMask : null;\n            if (this.current.activeSMask) {\n              this.beginSMaskGroup();\n            }\n            this.tempSMask = null;\n            break;\n          case \"TR\":\n            this.current.transferMaps = value;\n        }\n      }\n    },\n    beginSMaskGroup: function CanvasGraphics_beginSMaskGroup() {\n      var activeSMask = this.current.activeSMask;\n      var drawnWidth = activeSMask.canvas.width;\n      var drawnHeight = activeSMask.canvas.height;\n      var cacheId = \"smaskGroupAt\" + this.groupLevel;\n      var scratchCanvas = this.cachedCanvases.getCanvas(\n        cacheId,\n        drawnWidth,\n        drawnHeight,\n        true\n      );\n\n      var currentCtx = this.ctx;\n      var currentTransform = currentCtx.mozCurrentTransform;\n      this.ctx.save();\n\n      var groupCtx = scratchCanvas.context;\n      groupCtx.scale(1 / activeSMask.scaleX, 1 / activeSMask.scaleY);\n      groupCtx.translate(-activeSMask.offsetX, -activeSMask.offsetY);\n      groupCtx.transform.apply(groupCtx, currentTransform);\n\n      activeSMask.startTransformInverse = groupCtx.mozCurrentTransformInverse;\n\n      copyCtxState(currentCtx, groupCtx);\n      this.ctx = groupCtx;\n      this.setGState([\n        [\"BM\", \"source-over\"],\n        [\"ca\", 1],\n        [\"CA\", 1],\n      ]);\n      this.groupStack.push(currentCtx);\n      this.groupLevel++;\n    },\n    suspendSMaskGroup: function CanvasGraphics_endSMaskGroup() {\n      // Similar to endSMaskGroup, the intermediate canvas has to be composed\n      // and future ctx state restored.\n      var groupCtx = this.ctx;\n      this.groupLevel--;\n      this.ctx = this.groupStack.pop();\n\n      composeSMask(\n        this.ctx,\n        this.current.activeSMask,\n        groupCtx,\n        this.webGLContext\n      );\n      this.ctx.restore();\n      this.ctx.save(); // save is needed since SMask will be resumed.\n      copyCtxState(groupCtx, this.ctx);\n\n      // Saving state for resuming.\n      this.current.resumeSMaskCtx = groupCtx;\n      // Transform was changed in the SMask canvas, reflecting this change on\n      // this.ctx.\n      var deltaTransform = Util.transform(\n        this.current.activeSMask.startTransformInverse,\n        groupCtx.mozCurrentTransform\n      );\n      this.ctx.transform.apply(this.ctx, deltaTransform);\n\n      // SMask was composed, the results at the groupCtx can be cleared.\n      groupCtx.save();\n      groupCtx.setTransform(1, 0, 0, 1, 0, 0);\n      groupCtx.clearRect(0, 0, groupCtx.canvas.width, groupCtx.canvas.height);\n      groupCtx.restore();\n    },\n    resumeSMaskGroup: function CanvasGraphics_endSMaskGroup() {\n      // Resuming state saved by suspendSMaskGroup. We don't need to restore\n      // any groupCtx state since restore() command (the only caller) will do\n      // that for us. See also beginSMaskGroup.\n      var groupCtx = this.current.resumeSMaskCtx;\n      var currentCtx = this.ctx;\n      this.ctx = groupCtx;\n      this.groupStack.push(currentCtx);\n      this.groupLevel++;\n    },\n    endSMaskGroup: function CanvasGraphics_endSMaskGroup() {\n      var groupCtx = this.ctx;\n      this.groupLevel--;\n      this.ctx = this.groupStack.pop();\n\n      composeSMask(\n        this.ctx,\n        this.current.activeSMask,\n        groupCtx,\n        this.webGLContext\n      );\n      this.ctx.restore();\n      copyCtxState(groupCtx, this.ctx);\n      // Transform was changed in the SMask canvas, reflecting this change on\n      // this.ctx.\n      var deltaTransform = Util.transform(\n        this.current.activeSMask.startTransformInverse,\n        groupCtx.mozCurrentTransform\n      );\n      this.ctx.transform.apply(this.ctx, deltaTransform);\n    },\n    save: function CanvasGraphics_save() {\n      this.ctx.save();\n      var old = this.current;\n      this.stateStack.push(old);\n      this.current = old.clone();\n      this.current.resumeSMaskCtx = null;\n    },\n    restore: function CanvasGraphics_restore() {\n      // SMask was suspended, we just need to resume it.\n      if (this.current.resumeSMaskCtx) {\n        this.resumeSMaskGroup();\n      }\n      // SMask has to be finished once there is no states that are using the\n      // same SMask.\n      if (\n        this.current.activeSMask !== null &&\n        (this.stateStack.length === 0 ||\n          this.stateStack[this.stateStack.length - 1].activeSMask !==\n            this.current.activeSMask)\n      ) {\n        this.endSMaskGroup();\n      }\n\n      if (this.stateStack.length !== 0) {\n        this.current = this.stateStack.pop();\n        this.ctx.restore();\n\n        // Ensure that the clipping path is reset (fixes issue6413.pdf).\n        this.pendingClip = null;\n\n        this._cachedGetSinglePixelWidth = null;\n      }\n    },\n    transform: function CanvasGraphics_transform(a, b, c, d, e, f) {\n      this.ctx.transform(a, b, c, d, e, f);\n\n      this._cachedGetSinglePixelWidth = null;\n    },\n\n    // Path\n    constructPath: function CanvasGraphics_constructPath(ops, args) {\n      var ctx = this.ctx;\n      var current = this.current;\n      var x = current.x,\n        y = current.y;\n      for (var i = 0, j = 0, ii = ops.length; i < ii; i++) {\n        switch (ops[i] | 0) {\n          case OPS.rectangle:\n            x = args[j++];\n            y = args[j++];\n            var width = args[j++];\n            var height = args[j++];\n            if (width === 0 && ctx.lineWidth < this.getSinglePixelWidth()) {\n              width = this.getSinglePixelWidth();\n            }\n            if (height === 0 && ctx.lineWidth < this.getSinglePixelWidth()) {\n              height = this.getSinglePixelWidth();\n            }\n            var xw = x + width;\n            var yh = y + height;\n            ctx.moveTo(x, y);\n            ctx.lineTo(xw, y);\n            ctx.lineTo(xw, yh);\n            ctx.lineTo(x, yh);\n            ctx.lineTo(x, y);\n            ctx.closePath();\n            break;\n          case OPS.moveTo:\n            x = args[j++];\n            y = args[j++];\n            ctx.moveTo(x, y);\n            break;\n          case OPS.lineTo:\n            x = args[j++];\n            y = args[j++];\n            ctx.lineTo(x, y);\n            break;\n          case OPS.curveTo:\n            x = args[j + 4];\n            y = args[j + 5];\n            ctx.bezierCurveTo(\n              args[j],\n              args[j + 1],\n              args[j + 2],\n              args[j + 3],\n              x,\n              y\n            );\n            j += 6;\n            break;\n          case OPS.curveTo2:\n            ctx.bezierCurveTo(\n              x,\n              y,\n              args[j],\n              args[j + 1],\n              args[j + 2],\n              args[j + 3]\n            );\n            x = args[j + 2];\n            y = args[j + 3];\n            j += 4;\n            break;\n          case OPS.curveTo3:\n            x = args[j + 2];\n            y = args[j + 3];\n            ctx.bezierCurveTo(args[j], args[j + 1], x, y, x, y);\n            j += 4;\n            break;\n          case OPS.closePath:\n            ctx.closePath();\n            break;\n        }\n      }\n      current.setCurrentPoint(x, y);\n    },\n    closePath: function CanvasGraphics_closePath() {\n      this.ctx.closePath();\n    },\n    stroke: function CanvasGraphics_stroke(consumePath) {\n      consumePath = typeof consumePath !== \"undefined\" ? consumePath : true;\n      var ctx = this.ctx;\n      var strokeColor = this.current.strokeColor;\n      // For stroke we want to temporarily change the global alpha to the\n      // stroking alpha.\n      ctx.globalAlpha = this.current.strokeAlpha;\n      if (this.contentVisible) {\n        if (\n          strokeColor &&\n          strokeColor.hasOwnProperty(\"type\") &&\n          strokeColor.type === \"Pattern\"\n        ) {\n          // for patterns, we transform to pattern space, calculate\n          // the pattern, call stroke, and restore to user space\n          ctx.save();\n          // The current transform will be replaced while building the pattern,\n          // but the line width needs to be adjusted by the current transform,\n          // so we must scale it. To properly fix this we should be using a\n          // pattern transform instead (see #10955).\n          const transform = ctx.mozCurrentTransform;\n          const scale = Util.singularValueDecompose2dScale(transform)[0];\n          ctx.strokeStyle = strokeColor.getPattern(ctx, this);\n          ctx.lineWidth = Math.max(\n            this.getSinglePixelWidth() * MIN_WIDTH_FACTOR,\n            this.current.lineWidth * scale\n          );\n          ctx.stroke();\n          ctx.restore();\n        } else {\n          // Prevent drawing too thin lines by enforcing a minimum line width.\n          ctx.lineWidth = Math.max(\n            this.getSinglePixelWidth() * MIN_WIDTH_FACTOR,\n            this.current.lineWidth\n          );\n          ctx.stroke();\n        }\n      }\n      if (consumePath) {\n        this.consumePath();\n      }\n      // Restore the global alpha to the fill alpha\n      ctx.globalAlpha = this.current.fillAlpha;\n    },\n    closeStroke: function CanvasGraphics_closeStroke() {\n      this.closePath();\n      this.stroke();\n    },\n    fill: function CanvasGraphics_fill(consumePath) {\n      consumePath = typeof consumePath !== \"undefined\" ? consumePath : true;\n      var ctx = this.ctx;\n      var fillColor = this.current.fillColor;\n      var isPatternFill = this.current.patternFill;\n      var needRestore = false;\n\n      if (isPatternFill) {\n        ctx.save();\n        if (this.baseTransform) {\n          ctx.setTransform.apply(ctx, this.baseTransform);\n        }\n        ctx.fillStyle = fillColor.getPattern(ctx, this);\n        needRestore = true;\n      }\n\n      if (this.contentVisible) {\n        if (this.pendingEOFill) {\n          ctx.fill(\"evenodd\");\n          this.pendingEOFill = false;\n        } else {\n          ctx.fill();\n        }\n      }\n\n      if (needRestore) {\n        ctx.restore();\n      }\n      if (consumePath) {\n        this.consumePath();\n      }\n    },\n    eoFill: function CanvasGraphics_eoFill() {\n      this.pendingEOFill = true;\n      this.fill();\n    },\n    fillStroke: function CanvasGraphics_fillStroke() {\n      this.fill(false);\n      this.stroke(false);\n\n      this.consumePath();\n    },\n    eoFillStroke: function CanvasGraphics_eoFillStroke() {\n      this.pendingEOFill = true;\n      this.fillStroke();\n    },\n    closeFillStroke: function CanvasGraphics_closeFillStroke() {\n      this.closePath();\n      this.fillStroke();\n    },\n    closeEOFillStroke: function CanvasGraphics_closeEOFillStroke() {\n      this.pendingEOFill = true;\n      this.closePath();\n      this.fillStroke();\n    },\n    endPath: function CanvasGraphics_endPath() {\n      this.consumePath();\n    },\n\n    // Clipping\n    clip: function CanvasGraphics_clip() {\n      this.pendingClip = NORMAL_CLIP;\n    },\n    eoClip: function CanvasGraphics_eoClip() {\n      this.pendingClip = EO_CLIP;\n    },\n\n    // Text\n    beginText: function CanvasGraphics_beginText() {\n      this.current.textMatrix = IDENTITY_MATRIX;\n      this.current.textMatrixScale = 1;\n      this.current.x = this.current.lineX = 0;\n      this.current.y = this.current.lineY = 0;\n    },\n    endText: function CanvasGraphics_endText() {\n      var paths = this.pendingTextPaths;\n      var ctx = this.ctx;\n      if (paths === undefined) {\n        ctx.beginPath();\n        return;\n      }\n\n      ctx.save();\n      ctx.beginPath();\n      for (var i = 0; i < paths.length; i++) {\n        var path = paths[i];\n        ctx.setTransform.apply(ctx, path.transform);\n        ctx.translate(path.x, path.y);\n        path.addToPath(ctx, path.fontSize);\n      }\n      ctx.restore();\n      ctx.clip();\n      ctx.beginPath();\n      delete this.pendingTextPaths;\n    },\n    setCharSpacing: function CanvasGraphics_setCharSpacing(spacing) {\n      this.current.charSpacing = spacing;\n    },\n    setWordSpacing: function CanvasGraphics_setWordSpacing(spacing) {\n      this.current.wordSpacing = spacing;\n    },\n    setHScale: function CanvasGraphics_setHScale(scale) {\n      this.current.textHScale = scale / 100;\n    },\n    setLeading: function CanvasGraphics_setLeading(leading) {\n      this.current.leading = -leading;\n    },\n    setFont: function CanvasGraphics_setFont(fontRefName, size) {\n      var fontObj = this.commonObjs.get(fontRefName);\n      var current = this.current;\n\n      if (!fontObj) {\n        throw new Error(`Can't find font for ${fontRefName}`);\n      }\n\n      current.fontMatrix = fontObj.fontMatrix\n        ? fontObj.fontMatrix\n        : FONT_IDENTITY_MATRIX;\n\n      // A valid matrix needs all main diagonal elements to be non-zero\n      // This also ensures we bypass FF bugzilla bug #719844.\n      if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n        warn(\"Invalid font matrix for font \" + fontRefName);\n      }\n\n      // The spec for Tf (setFont) says that 'size' specifies the font 'scale',\n      // and in some docs this can be negative (inverted x-y axes).\n      if (size < 0) {\n        size = -size;\n        current.fontDirection = -1;\n      } else {\n        current.fontDirection = 1;\n      }\n\n      this.current.font = fontObj;\n      this.current.fontSize = size;\n\n      if (fontObj.isType3Font) {\n        return; // we don't need ctx.font for Type3 fonts\n      }\n\n      var name = fontObj.loadedName || \"sans-serif\";\n\n      let bold = \"normal\";\n      if (fontObj.black) {\n        bold = \"900\";\n      } else if (fontObj.bold) {\n        bold = \"bold\";\n      }\n      var italic = fontObj.italic ? \"italic\" : \"normal\";\n      var typeface = `\"${name}\", ${fontObj.fallbackName}`;\n\n      // Some font backends cannot handle fonts below certain size.\n      // Keeping the font at minimal size and using the fontSizeScale to change\n      // the current transformation matrix before the fillText/strokeText.\n      // See https://bugzilla.mozilla.org/show_bug.cgi?id=726227\n      let browserFontSize = size;\n      if (size < MIN_FONT_SIZE) {\n        browserFontSize = MIN_FONT_SIZE;\n      } else if (size > MAX_FONT_SIZE) {\n        browserFontSize = MAX_FONT_SIZE;\n      }\n      this.current.fontSizeScale = size / browserFontSize;\n\n      this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;\n    },\n    setTextRenderingMode: function CanvasGraphics_setTextRenderingMode(mode) {\n      this.current.textRenderingMode = mode;\n    },\n    setTextRise: function CanvasGraphics_setTextRise(rise) {\n      this.current.textRise = rise;\n    },\n    moveText: function CanvasGraphics_moveText(x, y) {\n      this.current.x = this.current.lineX += x;\n      this.current.y = this.current.lineY += y;\n    },\n    setLeadingMoveText: function CanvasGraphics_setLeadingMoveText(x, y) {\n      this.setLeading(-y);\n      this.moveText(x, y);\n    },\n    setTextMatrix: function CanvasGraphics_setTextMatrix(a, b, c, d, e, f) {\n      this.current.textMatrix = [a, b, c, d, e, f];\n      this.current.textMatrixScale = Math.sqrt(a * a + b * b);\n\n      this.current.x = this.current.lineX = 0;\n      this.current.y = this.current.lineY = 0;\n    },\n    nextLine: function CanvasGraphics_nextLine() {\n      this.moveText(0, this.current.leading);\n    },\n\n    paintChar(character, x, y, patternTransform) {\n      var ctx = this.ctx;\n      var current = this.current;\n      var font = current.font;\n      var textRenderingMode = current.textRenderingMode;\n      var fontSize = current.fontSize / current.fontSizeScale;\n      var fillStrokeMode =\n        textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      var isAddToPathSet = !!(\n        textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG\n      );\n      const patternFill = current.patternFill && !font.missingFile;\n\n      var addToPath;\n      if (font.disableFontFace || isAddToPathSet || patternFill) {\n        addToPath = font.getPathGenerator(this.commonObjs, character);\n      }\n\n      if (font.disableFontFace || patternFill) {\n        ctx.save();\n        ctx.translate(x, y);\n        ctx.beginPath();\n        addToPath(ctx, fontSize);\n        if (patternTransform) {\n          ctx.setTransform.apply(ctx, patternTransform);\n        }\n        if (\n          fillStrokeMode === TextRenderingMode.FILL ||\n          fillStrokeMode === TextRenderingMode.FILL_STROKE\n        ) {\n          ctx.fill();\n        }\n        if (\n          fillStrokeMode === TextRenderingMode.STROKE ||\n          fillStrokeMode === TextRenderingMode.FILL_STROKE\n        ) {\n          ctx.stroke();\n        }\n        ctx.restore();\n      } else {\n        if (\n          fillStrokeMode === TextRenderingMode.FILL ||\n          fillStrokeMode === TextRenderingMode.FILL_STROKE\n        ) {\n          ctx.fillText(character, x, y);\n        }\n        if (\n          fillStrokeMode === TextRenderingMode.STROKE ||\n          fillStrokeMode === TextRenderingMode.FILL_STROKE\n        ) {\n          ctx.strokeText(character, x, y);\n        }\n      }\n\n      if (isAddToPathSet) {\n        var paths = this.pendingTextPaths || (this.pendingTextPaths = []);\n        paths.push({\n          transform: ctx.mozCurrentTransform,\n          x,\n          y,\n          fontSize,\n          addToPath,\n        });\n      }\n    },\n\n    get isFontSubpixelAAEnabled() {\n      // Checks if anti-aliasing is enabled when scaled text is painted.\n      // On Windows GDI scaled fonts looks bad.\n      const { context: ctx } = this.cachedCanvases.getCanvas(\n        \"isFontSubpixelAAEnabled\",\n        10,\n        10\n      );\n      ctx.scale(1.5, 1);\n      ctx.fillText(\"I\", 0, 10);\n      var data = ctx.getImageData(0, 0, 10, 10).data;\n      var enabled = false;\n      for (var i = 3; i < data.length; i += 4) {\n        if (data[i] > 0 && data[i] < 255) {\n          enabled = true;\n          break;\n        }\n      }\n      return shadow(this, \"isFontSubpixelAAEnabled\", enabled);\n    },\n\n    showText: function CanvasGraphics_showText(glyphs) {\n      var current = this.current;\n      var font = current.font;\n      if (font.isType3Font) {\n        return this.showType3Text(glyphs);\n      }\n\n      var fontSize = current.fontSize;\n      if (fontSize === 0) {\n        return undefined;\n      }\n\n      var ctx = this.ctx;\n      var fontSizeScale = current.fontSizeScale;\n      var charSpacing = current.charSpacing;\n      var wordSpacing = current.wordSpacing;\n      var fontDirection = current.fontDirection;\n      var textHScale = current.textHScale * fontDirection;\n      var glyphsLength = glyphs.length;\n      var vertical = font.vertical;\n      var spacingDir = vertical ? 1 : -1;\n      var defaultVMetrics = font.defaultVMetrics;\n      var widthAdvanceScale = fontSize * current.fontMatrix[0];\n\n      var simpleFillText =\n        current.textRenderingMode === TextRenderingMode.FILL &&\n        !font.disableFontFace &&\n        !current.patternFill;\n\n      ctx.save();\n      let patternTransform;\n      if (current.patternFill) {\n        // TODO: Patterns are not applied correctly to text if a non-embedded\n        // font is used. E.g. issue 8111 and ShowText-ShadingPattern.pdf.\n        ctx.save();\n        const pattern = current.fillColor.getPattern(ctx, this);\n        patternTransform = ctx.mozCurrentTransform;\n        ctx.restore();\n        ctx.fillStyle = pattern;\n      }\n      ctx.transform.apply(ctx, current.textMatrix);\n      ctx.translate(current.x, current.y + current.textRise);\n\n      if (fontDirection > 0) {\n        ctx.scale(textHScale, -1);\n      } else {\n        ctx.scale(textHScale, 1);\n      }\n\n      var lineWidth = current.lineWidth;\n      var scale = current.textMatrixScale;\n      if (scale === 0 || lineWidth === 0) {\n        var fillStrokeMode =\n          current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n        if (\n          fillStrokeMode === TextRenderingMode.STROKE ||\n          fillStrokeMode === TextRenderingMode.FILL_STROKE\n        ) {\n          this._cachedGetSinglePixelWidth = null;\n          lineWidth = this.getSinglePixelWidth() * MIN_WIDTH_FACTOR;\n        }\n      } else {\n        lineWidth /= scale;\n      }\n\n      if (fontSizeScale !== 1.0) {\n        ctx.scale(fontSizeScale, fontSizeScale);\n        lineWidth /= fontSizeScale;\n      }\n\n      ctx.lineWidth = lineWidth;\n\n      var x = 0,\n        i;\n      for (i = 0; i < glyphsLength; ++i) {\n        var glyph = glyphs[i];\n        if (isNum(glyph)) {\n          x += (spacingDir * glyph * fontSize) / 1000;\n          continue;\n        }\n\n        var restoreNeeded = false;\n        var spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n        var character = glyph.fontChar;\n        var accent = glyph.accent;\n        var scaledX, scaledY, scaledAccentX, scaledAccentY;\n        var width = glyph.width;\n        if (vertical) {\n          var vmetric, vx, vy;\n          vmetric = glyph.vmetric || defaultVMetrics;\n          vx = glyph.vmetric ? vmetric[1] : width * 0.5;\n          vx = -vx * widthAdvanceScale;\n          vy = vmetric[2] * widthAdvanceScale;\n\n          width = vmetric ? -vmetric[0] : width;\n          scaledX = vx / fontSizeScale;\n          scaledY = (x + vy) / fontSizeScale;\n        } else {\n          scaledX = x / fontSizeScale;\n          scaledY = 0;\n        }\n\n        if (font.remeasure && width > 0) {\n          // Some standard fonts may not have the exact width: rescale per\n          // character if measured width is greater than expected glyph width\n          // and subpixel-aa is enabled, otherwise just center the glyph.\n          var measuredWidth =\n            ((ctx.measureText(character).width * 1000) / fontSize) *\n            fontSizeScale;\n          if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n            var characterScaleX = width / measuredWidth;\n            restoreNeeded = true;\n            ctx.save();\n            ctx.scale(characterScaleX, 1);\n            scaledX /= characterScaleX;\n          } else if (width !== measuredWidth) {\n            scaledX +=\n              (((width - measuredWidth) / 2000) * fontSize) / fontSizeScale;\n          }\n        }\n\n        // Only attempt to draw the glyph if it is actually in the embedded font\n        // file or if there isn't a font file so the fallback font is shown.\n        if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n          if (simpleFillText && !accent) {\n            // common case\n            ctx.fillText(character, scaledX, scaledY);\n          } else {\n            this.paintChar(character, scaledX, scaledY, patternTransform);\n            if (accent) {\n              scaledAccentX =\n                scaledX + (fontSize * accent.offset.x) / fontSizeScale;\n              scaledAccentY =\n                scaledY - (fontSize * accent.offset.y) / fontSizeScale;\n              this.paintChar(\n                accent.fontChar,\n                scaledAccentX,\n                scaledAccentY,\n                patternTransform\n              );\n            }\n          }\n        }\n\n        var charWidth;\n        if (vertical) {\n          charWidth = width * widthAdvanceScale - spacing * fontDirection;\n        } else {\n          charWidth = width * widthAdvanceScale + spacing * fontDirection;\n        }\n        x += charWidth;\n\n        if (restoreNeeded) {\n          ctx.restore();\n        }\n      }\n      if (vertical) {\n        current.y -= x;\n      } else {\n        current.x += x * textHScale;\n      }\n      ctx.restore();\n    },\n\n    showType3Text: function CanvasGraphics_showType3Text(glyphs) {\n      // Type3 fonts - each glyph is a \"mini-PDF\"\n      var ctx = this.ctx;\n      var current = this.current;\n      var font = current.font;\n      var fontSize = current.fontSize;\n      var fontDirection = current.fontDirection;\n      var spacingDir = font.vertical ? 1 : -1;\n      var charSpacing = current.charSpacing;\n      var wordSpacing = current.wordSpacing;\n      var textHScale = current.textHScale * fontDirection;\n      var fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n      var glyphsLength = glyphs.length;\n      var isTextInvisible =\n        current.textRenderingMode === TextRenderingMode.INVISIBLE;\n      var i, glyph, width, spacingLength;\n\n      if (isTextInvisible || fontSize === 0) {\n        return;\n      }\n      this._cachedGetSinglePixelWidth = null;\n\n      ctx.save();\n      ctx.transform.apply(ctx, current.textMatrix);\n      ctx.translate(current.x, current.y);\n\n      ctx.scale(textHScale, fontDirection);\n\n      for (i = 0; i < glyphsLength; ++i) {\n        glyph = glyphs[i];\n        if (isNum(glyph)) {\n          spacingLength = (spacingDir * glyph * fontSize) / 1000;\n          this.ctx.translate(spacingLength, 0);\n          current.x += spacingLength * textHScale;\n          continue;\n        }\n\n        var spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n        var operatorList = font.charProcOperatorList[glyph.operatorListId];\n        if (!operatorList) {\n          warn(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n          continue;\n        }\n        if (this.contentVisible) {\n          this.processingType3 = glyph;\n          this.save();\n          ctx.scale(fontSize, fontSize);\n          ctx.transform.apply(ctx, fontMatrix);\n          this.executeOperatorList(operatorList);\n          this.restore();\n        }\n\n        var transformed = Util.applyTransform([glyph.width, 0], fontMatrix);\n        width = transformed[0] * fontSize + spacing;\n\n        ctx.translate(width, 0);\n        current.x += width * textHScale;\n      }\n      ctx.restore();\n      this.processingType3 = null;\n    },\n\n    // Type3 fonts\n    setCharWidth: function CanvasGraphics_setCharWidth(xWidth, yWidth) {\n      // We can safely ignore this since the width should be the same\n      // as the width in the Widths array.\n    },\n    setCharWidthAndBounds: function CanvasGraphics_setCharWidthAndBounds(\n      xWidth,\n      yWidth,\n      llx,\n      lly,\n      urx,\n      ury\n    ) {\n      // TODO According to the spec we're also suppose to ignore any operators\n      // that set color or include images while processing this type3 font.\n      this.ctx.rect(llx, lly, urx - llx, ury - lly);\n      this.clip();\n      this.endPath();\n    },\n\n    // Color\n    getColorN_Pattern: function CanvasGraphics_getColorN_Pattern(IR) {\n      var pattern;\n      if (IR[0] === \"TilingPattern\") {\n        var color = IR[1];\n        var baseTransform =\n          this.baseTransform || this.ctx.mozCurrentTransform.slice();\n        var canvasGraphicsFactory = {\n          createCanvasGraphics: ctx => {\n            return new CanvasGraphics(\n              ctx,\n              this.commonObjs,\n              this.objs,\n              this.canvasFactory,\n              this.webGLContext\n            );\n          },\n        };\n        pattern = new TilingPattern(\n          IR,\n          color,\n          this.ctx,\n          canvasGraphicsFactory,\n          baseTransform\n        );\n      } else {\n        pattern = getShadingPatternFromIR(IR);\n      }\n      return pattern;\n    },\n    setStrokeColorN: function CanvasGraphics_setStrokeColorN() {\n      this.current.strokeColor = this.getColorN_Pattern(arguments);\n    },\n    setFillColorN: function CanvasGraphics_setFillColorN() {\n      this.current.fillColor = this.getColorN_Pattern(arguments);\n      this.current.patternFill = true;\n    },\n    setStrokeRGBColor: function CanvasGraphics_setStrokeRGBColor(r, g, b) {\n      var color = Util.makeCssRgb(r, g, b);\n      this.ctx.strokeStyle = color;\n      this.current.strokeColor = color;\n    },\n    setFillRGBColor: function CanvasGraphics_setFillRGBColor(r, g, b) {\n      var color = Util.makeCssRgb(r, g, b);\n      this.ctx.fillStyle = color;\n      this.current.fillColor = color;\n      this.current.patternFill = false;\n    },\n\n    shadingFill: function CanvasGraphics_shadingFill(patternIR) {\n      if (!this.contentVisible) {\n        return;\n      }\n      var ctx = this.ctx;\n\n      this.save();\n      var pattern = getShadingPatternFromIR(patternIR);\n      ctx.fillStyle = pattern.getPattern(ctx, this, true);\n\n      var inv = ctx.mozCurrentTransformInverse;\n      if (inv) {\n        var canvas = ctx.canvas;\n        var width = canvas.width;\n        var height = canvas.height;\n\n        var bl = Util.applyTransform([0, 0], inv);\n        var br = Util.applyTransform([0, height], inv);\n        var ul = Util.applyTransform([width, 0], inv);\n        var ur = Util.applyTransform([width, height], inv);\n\n        var x0 = Math.min(bl[0], br[0], ul[0], ur[0]);\n        var y0 = Math.min(bl[1], br[1], ul[1], ur[1]);\n        var x1 = Math.max(bl[0], br[0], ul[0], ur[0]);\n        var y1 = Math.max(bl[1], br[1], ul[1], ur[1]);\n\n        this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n      } else {\n        // HACK to draw the gradient onto an infinite rectangle.\n        // PDF gradients are drawn across the entire image while\n        // Canvas only allows gradients to be drawn in a rectangle\n        // The following bug should allow us to remove this.\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=664884\n\n        this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n      }\n\n      this.restore();\n    },\n\n    // Images\n    beginInlineImage: function CanvasGraphics_beginInlineImage() {\n      unreachable(\"Should not call beginInlineImage\");\n    },\n    beginImageData: function CanvasGraphics_beginImageData() {\n      unreachable(\"Should not call beginImageData\");\n    },\n\n    paintFormXObjectBegin: function CanvasGraphics_paintFormXObjectBegin(\n      matrix,\n      bbox\n    ) {\n      if (!this.contentVisible) {\n        return;\n      }\n      this.save();\n      this.baseTransformStack.push(this.baseTransform);\n\n      if (Array.isArray(matrix) && matrix.length === 6) {\n        this.transform.apply(this, matrix);\n      }\n\n      this.baseTransform = this.ctx.mozCurrentTransform;\n\n      if (bbox) {\n        var width = bbox[2] - bbox[0];\n        var height = bbox[3] - bbox[1];\n        this.ctx.rect(bbox[0], bbox[1], width, height);\n        this.clip();\n        this.endPath();\n      }\n    },\n\n    paintFormXObjectEnd: function CanvasGraphics_paintFormXObjectEnd() {\n      if (!this.contentVisible) {\n        return;\n      }\n      this.restore();\n      this.baseTransform = this.baseTransformStack.pop();\n    },\n\n    beginGroup: function CanvasGraphics_beginGroup(group) {\n      if (!this.contentVisible) {\n        return;\n      }\n\n      this.save();\n      var currentCtx = this.ctx;\n      // TODO non-isolated groups - according to Rik at adobe non-isolated\n      // group results aren't usually that different and they even have tools\n      // that ignore this setting. Notes from Rik on implementing:\n      // - When you encounter an transparency group, create a new canvas with\n      // the dimensions of the bbox\n      // - copy the content from the previous canvas to the new canvas\n      // - draw as usual\n      // - remove the backdrop alpha:\n      // alphaNew = 1 - (1 - alpha)/(1 - alphaBackdrop) with 'alpha' the alpha\n      // value of your transparency group and 'alphaBackdrop' the alpha of the\n      // backdrop\n      // - remove background color:\n      // colorNew = color - alphaNew *colorBackdrop /(1 - alphaNew)\n      if (!group.isolated) {\n        info(\"TODO: Support non-isolated groups.\");\n      }\n\n      // TODO knockout - supposedly possible with the clever use of compositing\n      // modes.\n      if (group.knockout) {\n        warn(\"Knockout groups not supported.\");\n      }\n\n      var currentTransform = currentCtx.mozCurrentTransform;\n      if (group.matrix) {\n        currentCtx.transform.apply(currentCtx, group.matrix);\n      }\n      if (!group.bbox) {\n        throw new Error(\"Bounding box is required.\");\n      }\n\n      // Based on the current transform figure out how big the bounding box\n      // will actually be.\n      var bounds = Util.getAxialAlignedBoundingBox(\n        group.bbox,\n        currentCtx.mozCurrentTransform\n      );\n      // Clip the bounding box to the current canvas.\n      var canvasBounds = [\n        0,\n        0,\n        currentCtx.canvas.width,\n        currentCtx.canvas.height,\n      ];\n      bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n      // Use ceil in case we're between sizes so we don't create canvas that is\n      // too small and make the canvas at least 1x1 pixels.\n      var offsetX = Math.floor(bounds[0]);\n      var offsetY = Math.floor(bounds[1]);\n      var drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n      var drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n      var scaleX = 1,\n        scaleY = 1;\n      if (drawnWidth > MAX_GROUP_SIZE) {\n        scaleX = drawnWidth / MAX_GROUP_SIZE;\n        drawnWidth = MAX_GROUP_SIZE;\n      }\n      if (drawnHeight > MAX_GROUP_SIZE) {\n        scaleY = drawnHeight / MAX_GROUP_SIZE;\n        drawnHeight = MAX_GROUP_SIZE;\n      }\n\n      var cacheId = \"groupAt\" + this.groupLevel;\n      if (group.smask) {\n        // Using two cache entries is case if masks are used one after another.\n        cacheId += \"_smask_\" + (this.smaskCounter++ % 2);\n      }\n      var scratchCanvas = this.cachedCanvases.getCanvas(\n        cacheId,\n        drawnWidth,\n        drawnHeight,\n        true\n      );\n      var groupCtx = scratchCanvas.context;\n\n      // Since we created a new canvas that is just the size of the bounding box\n      // we have to translate the group ctx.\n      groupCtx.scale(1 / scaleX, 1 / scaleY);\n      groupCtx.translate(-offsetX, -offsetY);\n      groupCtx.transform.apply(groupCtx, currentTransform);\n\n      if (group.smask) {\n        // Saving state and cached mask to be used in setGState.\n        this.smaskStack.push({\n          canvas: scratchCanvas.canvas,\n          context: groupCtx,\n          offsetX,\n          offsetY,\n          scaleX,\n          scaleY,\n          subtype: group.smask.subtype,\n          backdrop: group.smask.backdrop,\n          transferMap: group.smask.transferMap || null,\n          startTransformInverse: null, // used during suspend operation\n        });\n      } else {\n        // Setup the current ctx so when the group is popped we draw it at the\n        // right location.\n        currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n        currentCtx.translate(offsetX, offsetY);\n        currentCtx.scale(scaleX, scaleY);\n      }\n      // The transparency group inherits all off the current graphics state\n      // except the blend mode, soft mask, and alpha constants.\n      copyCtxState(currentCtx, groupCtx);\n      this.ctx = groupCtx;\n      this.setGState([\n        [\"BM\", \"source-over\"],\n        [\"ca\", 1],\n        [\"CA\", 1],\n      ]);\n      this.groupStack.push(currentCtx);\n      this.groupLevel++;\n\n      // Reseting mask state, masks will be applied on restore of the group.\n      this.current.activeSMask = null;\n    },\n\n    endGroup: function CanvasGraphics_endGroup(group) {\n      if (!this.contentVisible) {\n        return;\n      }\n      this.groupLevel--;\n      var groupCtx = this.ctx;\n      this.ctx = this.groupStack.pop();\n      // Turn off image smoothing to avoid sub pixel interpolation which can\n      // look kind of blurry for some pdfs.\n      if (this.ctx.imageSmoothingEnabled !== undefined) {\n        this.ctx.imageSmoothingEnabled = false;\n      } else {\n        this.ctx.mozImageSmoothingEnabled = false;\n      }\n      if (group.smask) {\n        this.tempSMask = this.smaskStack.pop();\n      } else {\n        this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      }\n      this.restore();\n    },\n\n    beginAnnotations: function CanvasGraphics_beginAnnotations() {\n      this.save();\n      if (this.baseTransform) {\n        this.ctx.setTransform.apply(this.ctx, this.baseTransform);\n      }\n    },\n\n    endAnnotations: function CanvasGraphics_endAnnotations() {\n      this.restore();\n    },\n\n    beginAnnotation: function CanvasGraphics_beginAnnotation(\n      rect,\n      transform,\n      matrix\n    ) {\n      this.save();\n      resetCtxToDefault(this.ctx);\n      this.current = new CanvasExtraState();\n\n      if (Array.isArray(rect) && rect.length === 4) {\n        var width = rect[2] - rect[0];\n        var height = rect[3] - rect[1];\n        this.ctx.rect(rect[0], rect[1], width, height);\n        this.clip();\n        this.endPath();\n      }\n\n      this.transform.apply(this, transform);\n      this.transform.apply(this, matrix);\n    },\n\n    endAnnotation: function CanvasGraphics_endAnnotation() {\n      this.restore();\n    },\n\n    paintImageMaskXObject: function CanvasGraphics_paintImageMaskXObject(img) {\n      if (!this.contentVisible) {\n        return;\n      }\n      var ctx = this.ctx;\n      var width = img.width,\n        height = img.height;\n      var fillColor = this.current.fillColor;\n      var isPatternFill = this.current.patternFill;\n\n      var glyph = this.processingType3;\n\n      if (COMPILE_TYPE3_GLYPHS && glyph && glyph.compiled === undefined) {\n        if (width <= MAX_SIZE_TO_COMPILE && height <= MAX_SIZE_TO_COMPILE) {\n          glyph.compiled = compileType3Glyph({ data: img.data, width, height });\n        } else {\n          glyph.compiled = null;\n        }\n      }\n\n      if (glyph && glyph.compiled) {\n        glyph.compiled(ctx);\n        return;\n      }\n\n      var maskCanvas = this.cachedCanvases.getCanvas(\n        \"maskCanvas\",\n        width,\n        height\n      );\n      var maskCtx = maskCanvas.context;\n      maskCtx.save();\n\n      putBinaryImageMask(maskCtx, img);\n\n      maskCtx.globalCompositeOperation = \"source-in\";\n\n      maskCtx.fillStyle = isPatternFill\n        ? fillColor.getPattern(maskCtx, this)\n        : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n\n      maskCtx.restore();\n\n      this.paintInlineImageXObject(maskCanvas.canvas);\n    },\n\n    paintImageMaskXObjectRepeat(\n      imgData,\n      scaleX,\n      skewX = 0,\n      skewY = 0,\n      scaleY,\n      positions\n    ) {\n      if (!this.contentVisible) {\n        return;\n      }\n      var width = imgData.width;\n      var height = imgData.height;\n      var fillColor = this.current.fillColor;\n      var isPatternFill = this.current.patternFill;\n\n      var maskCanvas = this.cachedCanvases.getCanvas(\n        \"maskCanvas\",\n        width,\n        height\n      );\n      var maskCtx = maskCanvas.context;\n      maskCtx.save();\n\n      putBinaryImageMask(maskCtx, imgData);\n\n      maskCtx.globalCompositeOperation = \"source-in\";\n\n      maskCtx.fillStyle = isPatternFill\n        ? fillColor.getPattern(maskCtx, this)\n        : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n\n      maskCtx.restore();\n\n      var ctx = this.ctx;\n      for (var i = 0, ii = positions.length; i < ii; i += 2) {\n        ctx.save();\n        ctx.transform(\n          scaleX,\n          skewX,\n          skewY,\n          scaleY,\n          positions[i],\n          positions[i + 1]\n        );\n        ctx.scale(1, -1);\n        ctx.drawImage(maskCanvas.canvas, 0, 0, width, height, 0, -1, 1, 1);\n        ctx.restore();\n      }\n    },\n\n    paintImageMaskXObjectGroup: function CanvasGraphics_paintImageMaskXObjectGroup(\n      images\n    ) {\n      if (!this.contentVisible) {\n        return;\n      }\n      var ctx = this.ctx;\n\n      var fillColor = this.current.fillColor;\n      var isPatternFill = this.current.patternFill;\n      for (var i = 0, ii = images.length; i < ii; i++) {\n        var image = images[i];\n        var width = image.width,\n          height = image.height;\n\n        var maskCanvas = this.cachedCanvases.getCanvas(\n          \"maskCanvas\",\n          width,\n          height\n        );\n        var maskCtx = maskCanvas.context;\n        maskCtx.save();\n\n        putBinaryImageMask(maskCtx, image);\n\n        maskCtx.globalCompositeOperation = \"source-in\";\n\n        maskCtx.fillStyle = isPatternFill\n          ? fillColor.getPattern(maskCtx, this)\n          : fillColor;\n        maskCtx.fillRect(0, 0, width, height);\n\n        maskCtx.restore();\n\n        ctx.save();\n        ctx.transform.apply(ctx, image.transform);\n        ctx.scale(1, -1);\n        ctx.drawImage(maskCanvas.canvas, 0, 0, width, height, 0, -1, 1, 1);\n        ctx.restore();\n      }\n    },\n\n    paintImageXObject: function CanvasGraphics_paintImageXObject(objId) {\n      if (!this.contentVisible) {\n        return;\n      }\n      const imgData = objId.startsWith(\"g_\")\n        ? this.commonObjs.get(objId)\n        : this.objs.get(objId);\n      if (!imgData) {\n        warn(\"Dependent image isn't ready yet\");\n        return;\n      }\n\n      this.paintInlineImageXObject(imgData);\n    },\n\n    paintImageXObjectRepeat: function CanvasGraphics_paintImageXObjectRepeat(\n      objId,\n      scaleX,\n      scaleY,\n      positions\n    ) {\n      if (!this.contentVisible) {\n        return;\n      }\n      const imgData = objId.startsWith(\"g_\")\n        ? this.commonObjs.get(objId)\n        : this.objs.get(objId);\n      if (!imgData) {\n        warn(\"Dependent image isn't ready yet\");\n        return;\n      }\n\n      var width = imgData.width;\n      var height = imgData.height;\n      var map = [];\n      for (var i = 0, ii = positions.length; i < ii; i += 2) {\n        map.push({\n          transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n          x: 0,\n          y: 0,\n          w: width,\n          h: height,\n        });\n      }\n      this.paintInlineImageXObjectGroup(imgData, map);\n    },\n\n    paintInlineImageXObject: function CanvasGraphics_paintInlineImageXObject(\n      imgData\n    ) {\n      if (!this.contentVisible) {\n        return;\n      }\n      var width = imgData.width;\n      var height = imgData.height;\n      var ctx = this.ctx;\n\n      this.save();\n      // scale the image to the unit square\n      ctx.scale(1 / width, -1 / height);\n\n      var currentTransform = ctx.mozCurrentTransformInverse;\n      var a = currentTransform[0],\n        b = currentTransform[1];\n      var widthScale = Math.max(Math.sqrt(a * a + b * b), 1);\n      var c = currentTransform[2],\n        d = currentTransform[3];\n      var heightScale = Math.max(Math.sqrt(c * c + d * d), 1);\n\n      var imgToPaint, tmpCanvas;\n      // typeof check is needed due to node.js support, see issue #8489\n      if (\n        (typeof HTMLElement === \"function\" && imgData instanceof HTMLElement) ||\n        !imgData.data\n      ) {\n        imgToPaint = imgData;\n      } else {\n        tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n        var tmpCtx = tmpCanvas.context;\n        putBinaryImageData(tmpCtx, imgData, this.current.transferMaps);\n        imgToPaint = tmpCanvas.canvas;\n      }\n\n      var paintWidth = width,\n        paintHeight = height;\n      var tmpCanvasId = \"prescale1\";\n      // Vertical or horizontal scaling shall not be more than 2 to not lose the\n      // pixels during drawImage operation, painting on the temporary canvas(es)\n      // that are twice smaller in size.\n      while (\n        (widthScale > 2 && paintWidth > 1) ||\n        (heightScale > 2 && paintHeight > 1)\n      ) {\n        var newWidth = paintWidth,\n          newHeight = paintHeight;\n        if (widthScale > 2 && paintWidth > 1) {\n          newWidth = Math.ceil(paintWidth / 2);\n          widthScale /= paintWidth / newWidth;\n        }\n        if (heightScale > 2 && paintHeight > 1) {\n          newHeight = Math.ceil(paintHeight / 2);\n          heightScale /= paintHeight / newHeight;\n        }\n        tmpCanvas = this.cachedCanvases.getCanvas(\n          tmpCanvasId,\n          newWidth,\n          newHeight\n        );\n        tmpCtx = tmpCanvas.context;\n        tmpCtx.clearRect(0, 0, newWidth, newHeight);\n        tmpCtx.drawImage(\n          imgToPaint,\n          0,\n          0,\n          paintWidth,\n          paintHeight,\n          0,\n          0,\n          newWidth,\n          newHeight\n        );\n        imgToPaint = tmpCanvas.canvas;\n        paintWidth = newWidth;\n        paintHeight = newHeight;\n        tmpCanvasId = tmpCanvasId === \"prescale1\" ? \"prescale2\" : \"prescale1\";\n      }\n      ctx.drawImage(\n        imgToPaint,\n        0,\n        0,\n        paintWidth,\n        paintHeight,\n        0,\n        -height,\n        width,\n        height\n      );\n\n      if (this.imageLayer) {\n        var position = this.getCanvasPosition(0, -height);\n        this.imageLayer.appendImage({\n          imgData,\n          left: position[0],\n          top: position[1],\n          width: width / currentTransform[0],\n          height: height / currentTransform[3],\n        });\n      }\n      this.restore();\n    },\n\n    paintInlineImageXObjectGroup: function CanvasGraphics_paintInlineImageXObjectGroup(\n      imgData,\n      map\n    ) {\n      if (!this.contentVisible) {\n        return;\n      }\n      var ctx = this.ctx;\n      var w = imgData.width;\n      var h = imgData.height;\n\n      var tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", w, h);\n      var tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData, this.current.transferMaps);\n\n      for (var i = 0, ii = map.length; i < ii; i++) {\n        var entry = map[i];\n        ctx.save();\n        ctx.transform.apply(ctx, entry.transform);\n        ctx.scale(1, -1);\n        ctx.drawImage(\n          tmpCanvas.canvas,\n          entry.x,\n          entry.y,\n          entry.w,\n          entry.h,\n          0,\n          -1,\n          1,\n          1\n        );\n        if (this.imageLayer) {\n          var position = this.getCanvasPosition(entry.x, entry.y);\n          this.imageLayer.appendImage({\n            imgData,\n            left: position[0],\n            top: position[1],\n            width: w,\n            height: h,\n          });\n        }\n        ctx.restore();\n      }\n    },\n\n    paintSolidColorImageMask: function CanvasGraphics_paintSolidColorImageMask() {\n      if (!this.contentVisible) {\n        return;\n      }\n      this.ctx.fillRect(0, 0, 1, 1);\n    },\n\n    // Marked content\n\n    markPoint: function CanvasGraphics_markPoint(tag) {\n      // TODO Marked content.\n    },\n    markPointProps: function CanvasGraphics_markPointProps(tag, properties) {\n      // TODO Marked content.\n    },\n    beginMarkedContent: function CanvasGraphics_beginMarkedContent(tag) {\n      this.markedContentStack.push({\n        visible: true,\n      });\n    },\n    beginMarkedContentProps: function CanvasGraphics_beginMarkedContentProps(\n      tag,\n      properties\n    ) {\n      if (tag === \"OC\") {\n        this.markedContentStack.push({\n          visible: this.optionalContentConfig.isVisible(properties),\n        });\n      } else {\n        this.markedContentStack.push({\n          visible: true,\n        });\n      }\n      this.contentVisible = this.isContentVisible();\n    },\n    endMarkedContent: function CanvasGraphics_endMarkedContent() {\n      this.markedContentStack.pop();\n      this.contentVisible = this.isContentVisible();\n    },\n\n    // Compatibility\n\n    beginCompat: function CanvasGraphics_beginCompat() {\n      // TODO ignore undefined operators (should we do that anyway?)\n    },\n    endCompat: function CanvasGraphics_endCompat() {\n      // TODO stop ignoring undefined operators\n    },\n\n    // Helper functions\n\n    consumePath: function CanvasGraphics_consumePath() {\n      var ctx = this.ctx;\n      if (this.pendingClip) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip(\"evenodd\");\n        } else {\n          ctx.clip();\n        }\n        this.pendingClip = null;\n      }\n      ctx.beginPath();\n    },\n    getSinglePixelWidth(scale) {\n      if (this._cachedGetSinglePixelWidth === null) {\n        const inverse = this.ctx.mozCurrentTransformInverse;\n        // max of the current horizontal and vertical scale\n        this._cachedGetSinglePixelWidth = Math.sqrt(\n          Math.max(\n            inverse[0] * inverse[0] + inverse[1] * inverse[1],\n            inverse[2] * inverse[2] + inverse[3] * inverse[3]\n          )\n        );\n      }\n      return this._cachedGetSinglePixelWidth;\n    },\n    getCanvasPosition: function CanvasGraphics_getCanvasPosition(x, y) {\n      var transform = this.ctx.mozCurrentTransform;\n      return [\n        transform[0] * x + transform[2] * y + transform[4],\n        transform[1] * x + transform[3] * y + transform[5],\n      ];\n    },\n\n    isContentVisible: function CanvasGraphics_isContentVisible() {\n      for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n        if (!this.markedContentStack[i].visible) {\n          return false;\n        }\n      }\n      return true;\n    },\n  };\n\n  for (var op in OPS) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n\n  return CanvasGraphics;\n})();\n\nexport { CanvasGraphics };\n","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FormatError, info, Util } from \"../shared/util.js\";\n\nvar ShadingIRs = {};\n\nfunction applyBoundingBox(ctx, bbox) {\n  if (!bbox || typeof Path2D === \"undefined\") {\n    return;\n  }\n  const width = bbox[2] - bbox[0];\n  const height = bbox[3] - bbox[1];\n  const region = new Path2D();\n  region.rect(bbox[0], bbox[1], width, height);\n  ctx.clip(region);\n}\n\nShadingIRs.RadialAxial = {\n  fromIR: function RadialAxial_fromIR(raw) {\n    var type = raw[1];\n    var bbox = raw[2];\n    var colorStops = raw[3];\n    var p0 = raw[4];\n    var p1 = raw[5];\n    var r0 = raw[6];\n    var r1 = raw[7];\n    return {\n      type: \"Pattern\",\n      getPattern: function RadialAxial_getPattern(ctx) {\n        applyBoundingBox(ctx, bbox);\n        var grad;\n        if (type === \"axial\") {\n          grad = ctx.createLinearGradient(p0[0], p0[1], p1[0], p1[1]);\n        } else if (type === \"radial\") {\n          grad = ctx.createRadialGradient(p0[0], p0[1], r0, p1[0], p1[1], r1);\n        }\n\n        for (var i = 0, ii = colorStops.length; i < ii; ++i) {\n          var c = colorStops[i];\n          grad.addColorStop(c[0], c[1]);\n        }\n        return grad;\n      },\n    };\n  },\n};\n\nvar createMeshCanvas = (function createMeshCanvasClosure() {\n  function drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n    // Very basic Gouraud-shaded triangle rasterization algorithm.\n    var coords = context.coords,\n      colors = context.colors;\n    var bytes = data.data,\n      rowSize = data.width * 4;\n    var tmp;\n    if (coords[p1 + 1] > coords[p2 + 1]) {\n      tmp = p1;\n      p1 = p2;\n      p2 = tmp;\n      tmp = c1;\n      c1 = c2;\n      c2 = tmp;\n    }\n    if (coords[p2 + 1] > coords[p3 + 1]) {\n      tmp = p2;\n      p2 = p3;\n      p3 = tmp;\n      tmp = c2;\n      c2 = c3;\n      c3 = tmp;\n    }\n    if (coords[p1 + 1] > coords[p2 + 1]) {\n      tmp = p1;\n      p1 = p2;\n      p2 = tmp;\n      tmp = c1;\n      c1 = c2;\n      c2 = tmp;\n    }\n    var x1 = (coords[p1] + context.offsetX) * context.scaleX;\n    var y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n    var x2 = (coords[p2] + context.offsetX) * context.scaleX;\n    var y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n    var x3 = (coords[p3] + context.offsetX) * context.scaleX;\n    var y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n    if (y1 >= y3) {\n      return;\n    }\n    var c1r = colors[c1],\n      c1g = colors[c1 + 1],\n      c1b = colors[c1 + 2];\n    var c2r = colors[c2],\n      c2g = colors[c2 + 1],\n      c2b = colors[c2 + 2];\n    var c3r = colors[c3],\n      c3g = colors[c3 + 1],\n      c3b = colors[c3 + 2];\n\n    var minY = Math.round(y1),\n      maxY = Math.round(y3);\n    var xa, car, cag, cab;\n    var xb, cbr, cbg, cbb;\n    for (var y = minY; y <= maxY; y++) {\n      if (y < y2) {\n        let k;\n        if (y < y1) {\n          k = 0;\n        } else if (y1 === y2) {\n          k = 1;\n        } else {\n          k = (y1 - y) / (y1 - y2);\n        }\n        xa = x1 - (x1 - x2) * k;\n        car = c1r - (c1r - c2r) * k;\n        cag = c1g - (c1g - c2g) * k;\n        cab = c1b - (c1b - c2b) * k;\n      } else {\n        let k;\n        if (y > y3) {\n          k = 1;\n        } else if (y2 === y3) {\n          k = 0;\n        } else {\n          k = (y2 - y) / (y2 - y3);\n        }\n        xa = x2 - (x2 - x3) * k;\n        car = c2r - (c2r - c3r) * k;\n        cag = c2g - (c2g - c3g) * k;\n        cab = c2b - (c2b - c3b) * k;\n      }\n\n      let k;\n      if (y < y1) {\n        k = 0;\n      } else if (y > y3) {\n        k = 1;\n      } else {\n        k = (y1 - y) / (y1 - y3);\n      }\n      xb = x1 - (x1 - x3) * k;\n      cbr = c1r - (c1r - c3r) * k;\n      cbg = c1g - (c1g - c3g) * k;\n      cbb = c1b - (c1b - c3b) * k;\n      var x1_ = Math.round(Math.min(xa, xb));\n      var x2_ = Math.round(Math.max(xa, xb));\n      var j = rowSize * y + x1_ * 4;\n      for (var x = x1_; x <= x2_; x++) {\n        k = (xa - x) / (xa - xb);\n        if (k < 0) {\n          k = 0;\n        } else if (k > 1) {\n          k = 1;\n        }\n        bytes[j++] = (car - (car - cbr) * k) | 0;\n        bytes[j++] = (cag - (cag - cbg) * k) | 0;\n        bytes[j++] = (cab - (cab - cbb) * k) | 0;\n        bytes[j++] = 255;\n      }\n    }\n  }\n\n  function drawFigure(data, figure, context) {\n    var ps = figure.coords;\n    var cs = figure.colors;\n    var i, ii;\n    switch (figure.type) {\n      case \"lattice\":\n        var verticesPerRow = figure.verticesPerRow;\n        var rows = Math.floor(ps.length / verticesPerRow) - 1;\n        var cols = verticesPerRow - 1;\n        for (i = 0; i < rows; i++) {\n          var q = i * verticesPerRow;\n          for (var j = 0; j < cols; j++, q++) {\n            drawTriangle(\n              data,\n              context,\n              ps[q],\n              ps[q + 1],\n              ps[q + verticesPerRow],\n              cs[q],\n              cs[q + 1],\n              cs[q + verticesPerRow]\n            );\n            drawTriangle(\n              data,\n              context,\n              ps[q + verticesPerRow + 1],\n              ps[q + 1],\n              ps[q + verticesPerRow],\n              cs[q + verticesPerRow + 1],\n              cs[q + 1],\n              cs[q + verticesPerRow]\n            );\n          }\n        }\n        break;\n      case \"triangles\":\n        for (i = 0, ii = ps.length; i < ii; i += 3) {\n          drawTriangle(\n            data,\n            context,\n            ps[i],\n            ps[i + 1],\n            ps[i + 2],\n            cs[i],\n            cs[i + 1],\n            cs[i + 2]\n          );\n        }\n        break;\n      default:\n        throw new Error(\"illegal figure\");\n    }\n  }\n\n  // eslint-disable-next-line no-shadow\n  function createMeshCanvas(\n    bounds,\n    combinesScale,\n    coords,\n    colors,\n    figures,\n    backgroundColor,\n    cachedCanvases,\n    webGLContext\n  ) {\n    // we will increase scale on some weird factor to let antialiasing take\n    // care of \"rough\" edges\n    var EXPECTED_SCALE = 1.1;\n    // MAX_PATTERN_SIZE is used to avoid OOM situation.\n    var MAX_PATTERN_SIZE = 3000; // 10in @ 300dpi shall be enough\n    // We need to keep transparent border around our pattern for fill():\n    // createPattern with 'no-repeat' will bleed edges across entire area.\n    var BORDER_SIZE = 2;\n\n    var offsetX = Math.floor(bounds[0]);\n    var offsetY = Math.floor(bounds[1]);\n    var boundsWidth = Math.ceil(bounds[2]) - offsetX;\n    var boundsHeight = Math.ceil(bounds[3]) - offsetY;\n\n    var width = Math.min(\n      Math.ceil(Math.abs(boundsWidth * combinesScale[0] * EXPECTED_SCALE)),\n      MAX_PATTERN_SIZE\n    );\n    var height = Math.min(\n      Math.ceil(Math.abs(boundsHeight * combinesScale[1] * EXPECTED_SCALE)),\n      MAX_PATTERN_SIZE\n    );\n    var scaleX = boundsWidth / width;\n    var scaleY = boundsHeight / height;\n\n    var context = {\n      coords,\n      colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY,\n    };\n\n    var paddedWidth = width + BORDER_SIZE * 2;\n    var paddedHeight = height + BORDER_SIZE * 2;\n\n    var canvas, tmpCanvas, i, ii;\n    if (webGLContext.isEnabled) {\n      canvas = webGLContext.drawFigures({\n        width,\n        height,\n        backgroundColor,\n        figures,\n        context,\n      });\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=972126\n      tmpCanvas = cachedCanvases.getCanvas(\n        \"mesh\",\n        paddedWidth,\n        paddedHeight,\n        false\n      );\n      tmpCanvas.context.drawImage(canvas, BORDER_SIZE, BORDER_SIZE);\n      canvas = tmpCanvas.canvas;\n    } else {\n      tmpCanvas = cachedCanvases.getCanvas(\n        \"mesh\",\n        paddedWidth,\n        paddedHeight,\n        false\n      );\n      var tmpCtx = tmpCanvas.context;\n\n      var data = tmpCtx.createImageData(width, height);\n      if (backgroundColor) {\n        var bytes = data.data;\n        for (i = 0, ii = bytes.length; i < ii; i += 4) {\n          bytes[i] = backgroundColor[0];\n          bytes[i + 1] = backgroundColor[1];\n          bytes[i + 2] = backgroundColor[2];\n          bytes[i + 3] = 255;\n        }\n      }\n      for (i = 0; i < figures.length; i++) {\n        drawFigure(data, figures[i], context);\n      }\n      tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n      canvas = tmpCanvas.canvas;\n    }\n\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY,\n    };\n  }\n  return createMeshCanvas;\n})();\n\nShadingIRs.Mesh = {\n  fromIR: function Mesh_fromIR(raw) {\n    // var type = raw[1];\n    var coords = raw[2];\n    var colors = raw[3];\n    var figures = raw[4];\n    var bounds = raw[5];\n    var matrix = raw[6];\n    var bbox = raw[7];\n    var background = raw[8];\n    return {\n      type: \"Pattern\",\n      getPattern: function Mesh_getPattern(ctx, owner, shadingFill) {\n        applyBoundingBox(ctx, bbox);\n        var scale;\n        if (shadingFill) {\n          scale = Util.singularValueDecompose2dScale(ctx.mozCurrentTransform);\n        } else {\n          // Obtain scale from matrix and current transformation matrix.\n          scale = Util.singularValueDecompose2dScale(owner.baseTransform);\n          if (matrix) {\n            var matrixScale = Util.singularValueDecompose2dScale(matrix);\n            scale = [scale[0] * matrixScale[0], scale[1] * matrixScale[1]];\n          }\n        }\n\n        // Rasterizing on the main thread since sending/queue large canvases\n        // might cause OOM.\n        var temporaryPatternCanvas = createMeshCanvas(\n          bounds,\n          scale,\n          coords,\n          colors,\n          figures,\n          shadingFill ? null : background,\n          owner.cachedCanvases,\n          owner.webGLContext\n        );\n\n        if (!shadingFill) {\n          ctx.setTransform.apply(ctx, owner.baseTransform);\n          if (matrix) {\n            ctx.transform.apply(ctx, matrix);\n          }\n        }\n\n        ctx.translate(\n          temporaryPatternCanvas.offsetX,\n          temporaryPatternCanvas.offsetY\n        );\n        ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n\n        return ctx.createPattern(temporaryPatternCanvas.canvas, \"no-repeat\");\n      },\n    };\n  },\n};\n\nShadingIRs.Dummy = {\n  fromIR: function Dummy_fromIR() {\n    return {\n      type: \"Pattern\",\n      getPattern: function Dummy_fromIR_getPattern() {\n        return \"hotpink\";\n      },\n    };\n  },\n};\n\nfunction getShadingPatternFromIR(raw) {\n  var shadingIR = ShadingIRs[raw[0]];\n  if (!shadingIR) {\n    throw new Error(`Unknown IR type: ${raw[0]}`);\n  }\n  return shadingIR.fromIR(raw);\n}\n\n/**\n * @type {any}\n */\nvar TilingPattern = (function TilingPatternClosure() {\n  var PaintType = {\n    COLORED: 1,\n    UNCOLORED: 2,\n  };\n\n  var MAX_PATTERN_SIZE = 3000; // 10in @ 300dpi shall be enough\n\n  // eslint-disable-next-line no-shadow\n  function TilingPattern(IR, color, ctx, canvasGraphicsFactory, baseTransform) {\n    this.operatorList = IR[2];\n    this.matrix = IR[3] || [1, 0, 0, 1, 0, 0];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.color = color;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n    this.type = \"Pattern\";\n    this.ctx = ctx;\n  }\n\n  TilingPattern.prototype = {\n    createPatternCanvas: function TilinPattern_createPatternCanvas(owner) {\n      var operatorList = this.operatorList;\n      var bbox = this.bbox;\n      var xstep = this.xstep;\n      var ystep = this.ystep;\n      var paintType = this.paintType;\n      var tilingType = this.tilingType;\n      var color = this.color;\n      var canvasGraphicsFactory = this.canvasGraphicsFactory;\n\n      info(\"TilingType: \" + tilingType);\n\n      // A tiling pattern as defined by PDF spec 8.7.2 is a cell whose size is\n      // described by bbox, and may repeat regularly by shifting the cell by\n      // xstep and ystep.\n      // Because the HTML5 canvas API does not support pattern repetition with\n      // gaps in between, we use the xstep/ystep instead of the bbox's size.\n      //\n      // This has the following consequences (similarly for ystep):\n      //\n      // - If xstep is the same as bbox, then there is no observable difference.\n      //\n      // - If xstep is larger than bbox, then the pattern canvas is partially\n      //   empty: the area bounded by bbox is painted, the outside area is void.\n      //\n      // - If xstep is smaller than bbox, then the pixels between xstep and the\n      //   bbox boundary will be missing. This is INCORRECT behavior.\n      //   \"Figures on adjacent tiles should not overlap\" (PDF spec 8.7.3.1),\n      //   but overlapping cells without common pixels are still valid.\n      //   TODO: Fix the implementation, to allow this scenario to be painted\n      //   correctly.\n\n      var x0 = bbox[0],\n        y0 = bbox[1],\n        x1 = bbox[2],\n        y1 = bbox[3];\n\n      // Obtain scale from matrix and current transformation matrix.\n      var matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n      var curMatrixScale = Util.singularValueDecompose2dScale(\n        this.baseTransform\n      );\n      var combinedScale = [\n        matrixScale[0] * curMatrixScale[0],\n        matrixScale[1] * curMatrixScale[1],\n      ];\n\n      // Use width and height values that are as close as possible to the end\n      // result when the pattern is used. Too low value makes the pattern look\n      // blurry. Too large value makes it look too crispy.\n      var dimx = this.getSizeAndScale(\n        xstep,\n        this.ctx.canvas.width,\n        combinedScale[0]\n      );\n      var dimy = this.getSizeAndScale(\n        ystep,\n        this.ctx.canvas.height,\n        combinedScale[1]\n      );\n\n      var tmpCanvas = owner.cachedCanvases.getCanvas(\n        \"pattern\",\n        dimx.size,\n        dimy.size,\n        true\n      );\n      var tmpCtx = tmpCanvas.context;\n      var graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n      graphics.groupLevel = owner.groupLevel;\n\n      this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n\n      graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);\n\n      // transform coordinates to pattern space\n      graphics.transform(1, 0, 0, 1, -x0, -y0);\n\n      this.clipBbox(graphics, bbox, x0, y0, x1, y1);\n\n      graphics.executeOperatorList(operatorList);\n\n      this.ctx.transform(1, 0, 0, 1, x0, y0);\n\n      // Rescale canvas so that the ctx.createPattern call generates a pattern\n      // with the desired size.\n      this.ctx.scale(1 / dimx.scale, 1 / dimy.scale);\n      return tmpCanvas.canvas;\n    },\n\n    getSizeAndScale: function TilingPattern_getSizeAndScale(\n      step,\n      realOutputSize,\n      scale\n    ) {\n      // xstep / ystep may be negative -- normalize.\n      step = Math.abs(step);\n      // MAX_PATTERN_SIZE is used to avoid OOM situation.\n      // Use the destination canvas's size if it is bigger than the hard-coded\n      // limit of MAX_PATTERN_SIZE to avoid clipping patterns that cover the\n      // whole canvas.\n      var maxSize = Math.max(MAX_PATTERN_SIZE, realOutputSize);\n      var size = Math.ceil(step * scale);\n      if (size >= maxSize) {\n        size = maxSize;\n      } else {\n        scale = size / step;\n      }\n      return { scale, size };\n    },\n\n    clipBbox: function clipBbox(graphics, bbox, x0, y0, x1, y1) {\n      if (Array.isArray(bbox) && bbox.length === 4) {\n        var bboxWidth = x1 - x0;\n        var bboxHeight = y1 - y0;\n        graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n        graphics.clip();\n        graphics.endPath();\n      }\n    },\n\n    setFillAndStrokeStyleToContext: function setFillAndStrokeStyleToContext(\n      graphics,\n      paintType,\n      color\n    ) {\n      const context = graphics.ctx,\n        current = graphics.current;\n      switch (paintType) {\n        case PaintType.COLORED:\n          var ctx = this.ctx;\n          context.fillStyle = ctx.fillStyle;\n          context.strokeStyle = ctx.strokeStyle;\n          current.fillColor = ctx.fillStyle;\n          current.strokeColor = ctx.strokeStyle;\n          break;\n        case PaintType.UNCOLORED:\n          var cssColor = Util.makeCssRgb(color[0], color[1], color[2]);\n          context.fillStyle = cssColor;\n          context.strokeStyle = cssColor;\n          // Set color needed by image masks (fixes issues 3226 and 8741).\n          current.fillColor = cssColor;\n          current.strokeColor = cssColor;\n          break;\n        default:\n          throw new FormatError(`Unsupported paint type: ${paintType}`);\n      }\n    },\n\n    getPattern: function TilingPattern_getPattern(ctx, owner) {\n      ctx = this.ctx;\n      // PDF spec 8.7.2 NOTE 1: pattern's matrix is relative to initial matrix.\n      ctx.setTransform.apply(ctx, this.baseTransform);\n      ctx.transform.apply(ctx, this.matrix);\n\n      var temporaryPatternCanvas = this.createPatternCanvas(owner);\n\n      return ctx.createPattern(temporaryPatternCanvas, \"repeat\");\n    },\n  };\n\n  return TilingPattern;\n})();\n\nexport { getShadingPatternFromIR, TilingPattern };\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @typedef {Object} GlobalWorkerOptionsType\n * @property {Worker | null} workerPort - Defines global port for worker\n *   process. Overrides the `workerSrc` option.\n * @property {string} workerSrc - A string containing the path and filename\n *   of the worker file.\n *\n *   NOTE: The `workerSrc` option should always be set, in order to prevent any\n *         issues when using the PDF.js library.\n */\n\n/** @type {GlobalWorkerOptionsType} */\nconst GlobalWorkerOptions = Object.create(null);\n\nGlobalWorkerOptions.workerPort =\n  GlobalWorkerOptions.workerPort === undefined\n    ? null\n    : GlobalWorkerOptions.workerPort;\n\nGlobalWorkerOptions.workerSrc =\n  GlobalWorkerOptions.workerSrc === undefined\n    ? \"\"\n    : GlobalWorkerOptions.workerSrc;\n\nexport { GlobalWorkerOptions };\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint no-var: error, prefer-const: error */\n\nimport {\n  AbortException,\n  assert,\n  createPromiseCapability,\n  MissingPDFException,\n  UnexpectedResponseException,\n  UnknownErrorException,\n} from \"./util.js\";\n\nconst CallbackKind = {\n  UNKNOWN: 0,\n  DATA: 1,\n  ERROR: 2,\n};\n\nconst StreamKind = {\n  UNKNOWN: 0,\n  CANCEL: 1,\n  CANCEL_COMPLETE: 2,\n  CLOSE: 3,\n  ENQUEUE: 4,\n  ERROR: 5,\n  PULL: 6,\n  PULL_COMPLETE: 7,\n  START_COMPLETE: 8,\n};\n\nfunction wrapReason(reason) {\n  if (\n    typeof PDFJSDev === \"undefined\" ||\n    PDFJSDev.test(\"!PRODUCTION || TESTING\")\n  ) {\n    assert(\n      reason instanceof Error ||\n        (typeof reason === \"object\" && reason !== null),\n      'wrapReason: Expected \"reason\" to be a (possibly cloned) Error.'\n    );\n  } else {\n    if (typeof reason !== \"object\" || reason === null) {\n      return reason;\n    }\n  }\n  switch (reason.name) {\n    case \"AbortException\":\n      return new AbortException(reason.message);\n    case \"MissingPDFException\":\n      return new MissingPDFException(reason.message);\n    case \"UnexpectedResponseException\":\n      return new UnexpectedResponseException(reason.message, reason.status);\n    case \"UnknownErrorException\":\n      return new UnknownErrorException(reason.message, reason.details);\n    default:\n      return new UnknownErrorException(reason.message, reason.toString());\n  }\n}\n\nclass MessageHandler {\n  constructor(sourceName, targetName, comObj) {\n    this.sourceName = sourceName;\n    this.targetName = targetName;\n    this.comObj = comObj;\n    this.callbackId = 1;\n    this.streamId = 1;\n    this.postMessageTransfers = true;\n    this.streamSinks = Object.create(null);\n    this.streamControllers = Object.create(null);\n    this.callbackCapabilities = Object.create(null);\n    this.actionHandler = Object.create(null);\n\n    this._onComObjOnMessage = event => {\n      const data = event.data;\n      if (data.targetName !== this.sourceName) {\n        return;\n      }\n      if (data.stream) {\n        this._processStreamMessage(data);\n        return;\n      }\n      if (data.callback) {\n        const callbackId = data.callbackId;\n        const capability = this.callbackCapabilities[callbackId];\n        if (!capability) {\n          throw new Error(`Cannot resolve callback ${callbackId}`);\n        }\n        delete this.callbackCapabilities[callbackId];\n\n        if (data.callback === CallbackKind.DATA) {\n          capability.resolve(data.data);\n        } else if (data.callback === CallbackKind.ERROR) {\n          capability.reject(wrapReason(data.reason));\n        } else {\n          throw new Error(\"Unexpected callback case\");\n        }\n        return;\n      }\n      const action = this.actionHandler[data.action];\n      if (!action) {\n        throw new Error(`Unknown action from worker: ${data.action}`);\n      }\n      if (data.callbackId) {\n        const cbSourceName = this.sourceName;\n        const cbTargetName = data.sourceName;\n        new Promise(function (resolve) {\n          resolve(action(data.data));\n        }).then(\n          function (result) {\n            comObj.postMessage({\n              sourceName: cbSourceName,\n              targetName: cbTargetName,\n              callback: CallbackKind.DATA,\n              callbackId: data.callbackId,\n              data: result,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName: cbSourceName,\n              targetName: cbTargetName,\n              callback: CallbackKind.ERROR,\n              callbackId: data.callbackId,\n              reason: wrapReason(reason),\n            });\n          }\n        );\n        return;\n      }\n      if (data.streamId) {\n        this._createStreamSink(data);\n        return;\n      }\n      action(data.data);\n    };\n    comObj.addEventListener(\"message\", this._onComObjOnMessage);\n  }\n\n  on(actionName, handler) {\n    if (\n      typeof PDFJSDev === \"undefined\" ||\n      PDFJSDev.test(\"!PRODUCTION || TESTING\")\n    ) {\n      assert(\n        typeof handler === \"function\",\n        'MessageHandler.on: Expected \"handler\" to be a function.'\n      );\n    }\n    const ah = this.actionHandler;\n    if (ah[actionName]) {\n      throw new Error(`There is already an actionName called \"${actionName}\"`);\n    }\n    ah[actionName] = handler;\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   */\n  send(actionName, data, transfers) {\n    this._postMessage(\n      {\n        sourceName: this.sourceName,\n        targetName: this.targetName,\n        action: actionName,\n        data,\n      },\n      transfers\n    );\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * Expects that the other side will callback with the response.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   * @returns {Promise} Promise to be resolved with response data.\n   */\n  sendWithPromise(actionName, data, transfers) {\n    const callbackId = this.callbackId++;\n    const capability = createPromiseCapability();\n    this.callbackCapabilities[callbackId] = capability;\n    try {\n      this._postMessage(\n        {\n          sourceName: this.sourceName,\n          targetName: this.targetName,\n          action: actionName,\n          callbackId,\n          data,\n        },\n        transfers\n      );\n    } catch (ex) {\n      capability.reject(ex);\n    }\n    return capability.promise;\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * Expect that the other side will callback to signal 'start_complete'.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Object} queueingStrategy - Strategy to signal backpressure based on\n   *                 internal queue.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   * @returns {ReadableStream} ReadableStream to read data in chunks.\n   */\n  sendWithStream(actionName, data, queueingStrategy, transfers) {\n    const streamId = this.streamId++;\n    const sourceName = this.sourceName;\n    const targetName = this.targetName;\n    const comObj = this.comObj;\n\n    return new ReadableStream(\n      {\n        start: controller => {\n          const startCapability = createPromiseCapability();\n          this.streamControllers[streamId] = {\n            controller,\n            startCall: startCapability,\n            pullCall: null,\n            cancelCall: null,\n            isClosed: false,\n          };\n          this._postMessage(\n            {\n              sourceName,\n              targetName,\n              action: actionName,\n              streamId,\n              data,\n              desiredSize: controller.desiredSize,\n            },\n            transfers\n          );\n          // Return Promise for Async process, to signal success/failure.\n          return startCapability.promise;\n        },\n\n        pull: controller => {\n          const pullCapability = createPromiseCapability();\n          this.streamControllers[streamId].pullCall = pullCapability;\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL,\n            streamId,\n            desiredSize: controller.desiredSize,\n          });\n          // Returning Promise will not call \"pull\"\n          // again until current pull is resolved.\n          return pullCapability.promise;\n        },\n\n        cancel: reason => {\n          assert(reason instanceof Error, \"cancel must have a valid reason\");\n          const cancelCapability = createPromiseCapability();\n          this.streamControllers[streamId].cancelCall = cancelCapability;\n          this.streamControllers[streamId].isClosed = true;\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL,\n            streamId,\n            reason: wrapReason(reason),\n          });\n          // Return Promise to signal success or failure.\n          return cancelCapability.promise;\n        },\n      },\n      queueingStrategy\n    );\n  }\n\n  /**\n   * @private\n   */\n  _createStreamSink(data) {\n    const self = this;\n    const action = this.actionHandler[data.action];\n    const streamId = data.streamId;\n    const sourceName = this.sourceName;\n    const targetName = data.sourceName;\n    const comObj = this.comObj;\n\n    const streamSink = {\n      enqueue(chunk, size = 1, transfers) {\n        if (this.isCancelled) {\n          return;\n        }\n        const lastDesiredSize = this.desiredSize;\n        this.desiredSize -= size;\n        // Enqueue decreases the desiredSize property of sink,\n        // so when it changes from positive to negative,\n        // set ready as unresolved promise.\n        if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n          this.sinkCapability = createPromiseCapability();\n          this.ready = this.sinkCapability.promise;\n        }\n        self._postMessage(\n          {\n            sourceName,\n            targetName,\n            stream: StreamKind.ENQUEUE,\n            streamId,\n            chunk,\n          },\n          transfers\n        );\n      },\n\n      close() {\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CLOSE,\n          streamId,\n        });\n        delete self.streamSinks[streamId];\n      },\n\n      error(reason) {\n        assert(reason instanceof Error, \"error must have a valid reason\");\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ERROR,\n          streamId,\n          reason: wrapReason(reason),\n        });\n      },\n\n      sinkCapability: createPromiseCapability(),\n      onPull: null,\n      onCancel: null,\n      isCancelled: false,\n      desiredSize: data.desiredSize,\n      ready: null,\n    };\n\n    streamSink.sinkCapability.resolve();\n    streamSink.ready = streamSink.sinkCapability.promise;\n    this.streamSinks[streamId] = streamSink;\n    new Promise(function (resolve) {\n      resolve(action(data.data, streamSink));\n    }).then(\n      function () {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.START_COMPLETE,\n          streamId,\n          success: true,\n        });\n      },\n      function (reason) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.START_COMPLETE,\n          streamId,\n          reason: wrapReason(reason),\n        });\n      }\n    );\n  }\n\n  /**\n   * @private\n   */\n  _processStreamMessage(data) {\n    const streamId = data.streamId;\n    const sourceName = this.sourceName;\n    const targetName = data.sourceName;\n    const comObj = this.comObj;\n\n    switch (data.stream) {\n      case StreamKind.START_COMPLETE:\n        if (data.success) {\n          this.streamControllers[streamId].startCall.resolve();\n        } else {\n          this.streamControllers[streamId].startCall.reject(\n            wrapReason(data.reason)\n          );\n        }\n        break;\n      case StreamKind.PULL_COMPLETE:\n        if (data.success) {\n          this.streamControllers[streamId].pullCall.resolve();\n        } else {\n          this.streamControllers[streamId].pullCall.reject(\n            wrapReason(data.reason)\n          );\n        }\n        break;\n      case StreamKind.PULL:\n        // Ignore any pull after close is called.\n        if (!this.streamSinks[streamId]) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true,\n          });\n          break;\n        }\n        // Pull increases the desiredSize property of sink,\n        // so when it changes from negative to positive,\n        // set ready property as resolved promise.\n        if (\n          this.streamSinks[streamId].desiredSize <= 0 &&\n          data.desiredSize > 0\n        ) {\n          this.streamSinks[streamId].sinkCapability.resolve();\n        }\n        // Reset desiredSize property of sink on every pull.\n        this.streamSinks[streamId].desiredSize = data.desiredSize;\n        const { onPull } = this.streamSinks[data.streamId];\n        new Promise(function (resolve) {\n          resolve(onPull && onPull());\n        }).then(\n          function () {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              success: true,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              reason: wrapReason(reason),\n            });\n          }\n        );\n        break;\n      case StreamKind.ENQUEUE:\n        assert(\n          this.streamControllers[streamId],\n          \"enqueue should have stream controller\"\n        );\n        if (this.streamControllers[streamId].isClosed) {\n          break;\n        }\n        this.streamControllers[streamId].controller.enqueue(data.chunk);\n        break;\n      case StreamKind.CLOSE:\n        assert(\n          this.streamControllers[streamId],\n          \"close should have stream controller\"\n        );\n        if (this.streamControllers[streamId].isClosed) {\n          break;\n        }\n        this.streamControllers[streamId].isClosed = true;\n        this.streamControllers[streamId].controller.close();\n        this._deleteStreamController(streamId);\n        break;\n      case StreamKind.ERROR:\n        assert(\n          this.streamControllers[streamId],\n          \"error should have stream controller\"\n        );\n        this.streamControllers[streamId].controller.error(\n          wrapReason(data.reason)\n        );\n        this._deleteStreamController(streamId);\n        break;\n      case StreamKind.CANCEL_COMPLETE:\n        if (data.success) {\n          this.streamControllers[streamId].cancelCall.resolve();\n        } else {\n          this.streamControllers[streamId].cancelCall.reject(\n            wrapReason(data.reason)\n          );\n        }\n        this._deleteStreamController(streamId);\n        break;\n      case StreamKind.CANCEL:\n        if (!this.streamSinks[streamId]) {\n          break;\n        }\n        const { onCancel } = this.streamSinks[data.streamId];\n        new Promise(function (resolve) {\n          resolve(onCancel && onCancel(wrapReason(data.reason)));\n        }).then(\n          function () {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL_COMPLETE,\n              streamId,\n              success: true,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL_COMPLETE,\n              streamId,\n              reason: wrapReason(reason),\n            });\n          }\n        );\n        this.streamSinks[streamId].sinkCapability.reject(\n          wrapReason(data.reason)\n        );\n        this.streamSinks[streamId].isCancelled = true;\n        delete this.streamSinks[streamId];\n        break;\n      default:\n        throw new Error(\"Unexpected stream case\");\n    }\n  }\n\n  /**\n   * @private\n   */\n  async _deleteStreamController(streamId) {\n    // Delete the `streamController` only when the start, pull, and cancel\n    // capabilities have settled, to prevent `TypeError`s.\n    await Promise.allSettled(\n      [\n        this.streamControllers[streamId].startCall,\n        this.streamControllers[streamId].pullCall,\n        this.streamControllers[streamId].cancelCall,\n      ].map(function (capability) {\n        return capability && capability.promise;\n      })\n    );\n    delete this.streamControllers[streamId];\n  }\n\n  /**\n   * Sends raw message to the comObj.\n   * @param {Object} message - Raw message.\n   * @param transfers List of transfers/ArrayBuffers, or undefined.\n   * @private\n   */\n  _postMessage(message, transfers) {\n    if (transfers && this.postMessageTransfers) {\n      this.comObj.postMessage(message, transfers);\n    } else {\n      this.comObj.postMessage(message);\n    }\n  }\n\n  destroy() {\n    this.comObj.removeEventListener(\"message\", this._onComObjOnMessage);\n  }\n}\n\nexport { MessageHandler };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from \"../shared/util.js\";\nimport { SimpleXMLParser } from \"./xml_parser.js\";\n\nclass Metadata {\n  constructor(data) {\n    assert(typeof data === \"string\", \"Metadata: input is not a string\");\n\n    // Ghostscript may produce invalid metadata, so try to repair that first.\n    data = this._repair(data);\n\n    // Convert the string to an XML document.\n    const parser = new SimpleXMLParser();\n    const xmlDocument = parser.parseFromString(data);\n\n    this._metadataMap = new Map();\n\n    if (xmlDocument) {\n      this._parse(xmlDocument);\n    }\n  }\n\n  _repair(data) {\n    // Start by removing any \"junk\" before the first tag (see issue 10395).\n    return data\n      .replace(/^[^<]+/, \"\")\n      .replace(/>\\\\376\\\\377([^<]+)/g, function (all, codes) {\n        const bytes = codes\n          .replace(/\\\\([0-3])([0-7])([0-7])/g, function (code, d1, d2, d3) {\n            return String.fromCharCode(d1 * 64 + d2 * 8 + d3 * 1);\n          })\n          .replace(/&(amp|apos|gt|lt|quot);/g, function (str, name) {\n            switch (name) {\n              case \"amp\":\n                return \"&\";\n              case \"apos\":\n                return \"'\";\n              case \"gt\":\n                return \">\";\n              case \"lt\":\n                return \"<\";\n              case \"quot\":\n                return '\"';\n            }\n            throw new Error(`_repair: ${name} isn't defined.`);\n          });\n\n        let chars = \"\";\n        for (let i = 0, ii = bytes.length; i < ii; i += 2) {\n          const code = bytes.charCodeAt(i) * 256 + bytes.charCodeAt(i + 1);\n          if (\n            code >= /* Space = */ 32 &&\n            code < /* Delete = */ 127 &&\n            code !== /* '<' = */ 60 &&\n            code !== /* '>' = */ 62 &&\n            code !== /* '&' = */ 38\n          ) {\n            chars += String.fromCharCode(code);\n          } else {\n            chars += \"&#x\" + (0x10000 + code).toString(16).substring(1) + \";\";\n          }\n        }\n\n        return \">\" + chars;\n      });\n  }\n\n  _parse(xmlDocument) {\n    let rdf = xmlDocument.documentElement;\n\n    if (rdf.nodeName.toLowerCase() !== \"rdf:rdf\") {\n      // Wrapped in <xmpmeta>\n      rdf = rdf.firstChild;\n      while (rdf && rdf.nodeName.toLowerCase() !== \"rdf:rdf\") {\n        rdf = rdf.nextSibling;\n      }\n    }\n\n    const nodeName = rdf ? rdf.nodeName.toLowerCase() : null;\n    if (!rdf || nodeName !== \"rdf:rdf\" || !rdf.hasChildNodes()) {\n      return;\n    }\n\n    const children = rdf.childNodes;\n    for (let i = 0, ii = children.length; i < ii; i++) {\n      const desc = children[i];\n      if (desc.nodeName.toLowerCase() !== \"rdf:description\") {\n        continue;\n      }\n\n      for (let j = 0, jj = desc.childNodes.length; j < jj; j++) {\n        if (desc.childNodes[j].nodeName.toLowerCase() !== \"#text\") {\n          const entry = desc.childNodes[j];\n          const name = entry.nodeName.toLowerCase();\n\n          this._metadataMap.set(name, entry.textContent.trim());\n        }\n      }\n    }\n  }\n\n  get(name) {\n    return this._metadataMap.has(name) ? this._metadataMap.get(name) : null;\n  }\n\n  getAll() {\n    return Object.fromEntries(this._metadataMap);\n  }\n\n  has(name) {\n    return this._metadataMap.has(name);\n  }\n}\n\nexport { Metadata };\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// The code for XMLParserBase copied from\n// https://github.com/mozilla/shumway/blob/16451d8836fa85f4b16eeda8b4bda2fa9e2b22b0/src/avm2/natives/xml.ts\n\nconst XMLParserErrorCode = {\n  NoError: 0,\n  EndOfDocument: -1,\n  UnterminatedCdat: -2,\n  UnterminatedXmlDeclaration: -3,\n  UnterminatedDoctypeDeclaration: -4,\n  UnterminatedComment: -5,\n  MalformedElement: -6,\n  OutOfMemory: -7,\n  UnterminatedAttributeValue: -8,\n  UnterminatedElement: -9,\n  ElementNeverBegun: -10,\n};\n\nfunction isWhitespace(s, index) {\n  const ch = s[index];\n  return ch === \" \" || ch === \"\\n\" || ch === \"\\r\" || ch === \"\\t\";\n}\n\nfunction isWhitespaceString(s) {\n  for (let i = 0, ii = s.length; i < ii; i++) {\n    if (!isWhitespace(s, i)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nclass XMLParserBase {\n  _resolveEntities(s) {\n    return s.replace(/&([^;]+);/g, (all, entity) => {\n      if (entity.substring(0, 2) === \"#x\") {\n        return String.fromCharCode(parseInt(entity.substring(2), 16));\n      } else if (entity.substring(0, 1) === \"#\") {\n        return String.fromCharCode(parseInt(entity.substring(1), 10));\n      }\n      switch (entity) {\n        case \"lt\":\n          return \"<\";\n        case \"gt\":\n          return \">\";\n        case \"amp\":\n          return \"&\";\n        case \"quot\":\n          return '\"';\n      }\n      return this.onResolveEntity(entity);\n    });\n  }\n\n  _parseContent(s, start) {\n    const attributes = [];\n    let pos = start;\n\n    function skipWs() {\n      while (pos < s.length && isWhitespace(s, pos)) {\n        ++pos;\n      }\n    }\n\n    while (\n      pos < s.length &&\n      !isWhitespace(s, pos) &&\n      s[pos] !== \">\" &&\n      s[pos] !== \"/\"\n    ) {\n      ++pos;\n    }\n    const name = s.substring(start, pos);\n    skipWs();\n    while (\n      pos < s.length &&\n      s[pos] !== \">\" &&\n      s[pos] !== \"/\" &&\n      s[pos] !== \"?\"\n    ) {\n      skipWs();\n      let attrName = \"\",\n        attrValue = \"\";\n      while (pos < s.length && !isWhitespace(s, pos) && s[pos] !== \"=\") {\n        attrName += s[pos];\n        ++pos;\n      }\n      skipWs();\n      if (s[pos] !== \"=\") {\n        return null;\n      }\n      ++pos;\n      skipWs();\n      const attrEndChar = s[pos];\n      if (attrEndChar !== '\"' && attrEndChar !== \"'\") {\n        return null;\n      }\n      const attrEndIndex = s.indexOf(attrEndChar, ++pos);\n      if (attrEndIndex < 0) {\n        return null;\n      }\n      attrValue = s.substring(pos, attrEndIndex);\n      attributes.push({\n        name: attrName,\n        value: this._resolveEntities(attrValue),\n      });\n      pos = attrEndIndex + 1;\n      skipWs();\n    }\n    return {\n      name,\n      attributes,\n      parsed: pos - start,\n    };\n  }\n\n  _parseProcessingInstruction(s, start) {\n    let pos = start;\n\n    function skipWs() {\n      while (pos < s.length && isWhitespace(s, pos)) {\n        ++pos;\n      }\n    }\n\n    while (\n      pos < s.length &&\n      !isWhitespace(s, pos) &&\n      s[pos] !== \">\" &&\n      s[pos] !== \"/\"\n    ) {\n      ++pos;\n    }\n    const name = s.substring(start, pos);\n    skipWs();\n    const attrStart = pos;\n    while (pos < s.length && (s[pos] !== \"?\" || s[pos + 1] !== \">\")) {\n      ++pos;\n    }\n    const value = s.substring(attrStart, pos);\n    return {\n      name,\n      value,\n      parsed: pos - start,\n    };\n  }\n\n  parseXml(s) {\n    let i = 0;\n    while (i < s.length) {\n      const ch = s[i];\n      let j = i;\n      if (ch === \"<\") {\n        ++j;\n        const ch2 = s[j];\n        let q;\n        switch (ch2) {\n          case \"/\":\n            ++j;\n            q = s.indexOf(\">\", j);\n            if (q < 0) {\n              this.onError(XMLParserErrorCode.UnterminatedElement);\n              return;\n            }\n            this.onEndElement(s.substring(j, q));\n            j = q + 1;\n            break;\n          case \"?\":\n            ++j;\n            const pi = this._parseProcessingInstruction(s, j);\n            if (s.substring(j + pi.parsed, j + pi.parsed + 2) !== \"?>\") {\n              this.onError(XMLParserErrorCode.UnterminatedXmlDeclaration);\n              return;\n            }\n            this.onPi(pi.name, pi.value);\n            j += pi.parsed + 2;\n            break;\n          case \"!\":\n            if (s.substring(j + 1, j + 3) === \"--\") {\n              q = s.indexOf(\"-->\", j + 3);\n              if (q < 0) {\n                this.onError(XMLParserErrorCode.UnterminatedComment);\n                return;\n              }\n              this.onComment(s.substring(j + 3, q));\n              j = q + 3;\n            } else if (s.substring(j + 1, j + 8) === \"[CDATA[\") {\n              q = s.indexOf(\"]]>\", j + 8);\n              if (q < 0) {\n                this.onError(XMLParserErrorCode.UnterminatedCdat);\n                return;\n              }\n              this.onCdata(s.substring(j + 8, q));\n              j = q + 3;\n            } else if (s.substring(j + 1, j + 8) === \"DOCTYPE\") {\n              const q2 = s.indexOf(\"[\", j + 8);\n              let complexDoctype = false;\n              q = s.indexOf(\">\", j + 8);\n              if (q < 0) {\n                this.onError(XMLParserErrorCode.UnterminatedDoctypeDeclaration);\n                return;\n              }\n              if (q2 > 0 && q > q2) {\n                q = s.indexOf(\"]>\", j + 8);\n                if (q < 0) {\n                  this.onError(\n                    XMLParserErrorCode.UnterminatedDoctypeDeclaration\n                  );\n                  return;\n                }\n                complexDoctype = true;\n              }\n              const doctypeContent = s.substring(\n                j + 8,\n                q + (complexDoctype ? 1 : 0)\n              );\n              this.onDoctype(doctypeContent);\n              j = q + (complexDoctype ? 2 : 1);\n            } else {\n              this.onError(XMLParserErrorCode.MalformedElement);\n              return;\n            }\n            break;\n          default:\n            const content = this._parseContent(s, j);\n            if (content === null) {\n              this.onError(XMLParserErrorCode.MalformedElement);\n              return;\n            }\n            let isClosed = false;\n            if (\n              s.substring(j + content.parsed, j + content.parsed + 2) === \"/>\"\n            ) {\n              isClosed = true;\n            } else if (\n              s.substring(j + content.parsed, j + content.parsed + 1) !== \">\"\n            ) {\n              this.onError(XMLParserErrorCode.UnterminatedElement);\n              return;\n            }\n            this.onBeginElement(content.name, content.attributes, isClosed);\n            j += content.parsed + (isClosed ? 2 : 1);\n            break;\n        }\n      } else {\n        while (j < s.length && s[j] !== \"<\") {\n          j++;\n        }\n        const text = s.substring(i, j);\n        this.onText(this._resolveEntities(text));\n      }\n      i = j;\n    }\n  }\n\n  onResolveEntity(name) {\n    return `&${name};`;\n  }\n\n  onPi(name, value) {}\n\n  onComment(text) {}\n\n  onCdata(text) {}\n\n  onDoctype(doctypeContent) {}\n\n  onText(text) {}\n\n  onBeginElement(name, attributes, isEmpty) {}\n\n  onEndElement(name) {}\n\n  onError(code) {}\n}\n\nclass SimpleDOMNode {\n  constructor(nodeName, nodeValue) {\n    this.nodeName = nodeName;\n    this.nodeValue = nodeValue;\n\n    Object.defineProperty(this, \"parentNode\", { value: null, writable: true });\n  }\n\n  get firstChild() {\n    return this.childNodes && this.childNodes[0];\n  }\n\n  get nextSibling() {\n    const childNodes = this.parentNode.childNodes;\n    if (!childNodes) {\n      return undefined;\n    }\n    const index = childNodes.indexOf(this);\n    if (index === -1) {\n      return undefined;\n    }\n    return childNodes[index + 1];\n  }\n\n  get textContent() {\n    if (!this.childNodes) {\n      return this.nodeValue || \"\";\n    }\n    return this.childNodes\n      .map(function (child) {\n        return child.textContent;\n      })\n      .join(\"\");\n  }\n\n  hasChildNodes() {\n    return this.childNodes && this.childNodes.length > 0;\n  }\n}\n\nclass SimpleXMLParser extends XMLParserBase {\n  constructor() {\n    super();\n    this._currentFragment = null;\n    this._stack = null;\n    this._errorCode = XMLParserErrorCode.NoError;\n  }\n\n  parseFromString(data) {\n    this._currentFragment = [];\n    this._stack = [];\n    this._errorCode = XMLParserErrorCode.NoError;\n\n    this.parseXml(data);\n\n    if (this._errorCode !== XMLParserErrorCode.NoError) {\n      return undefined; // return undefined on error\n    }\n\n    // We should only have one root.\n    const [documentElement] = this._currentFragment;\n    if (!documentElement) {\n      return undefined; // Return undefined if no root was found.\n    }\n    return { documentElement };\n  }\n\n  onResolveEntity(name) {\n    switch (name) {\n      case \"apos\":\n        return \"'\";\n    }\n    return super.onResolveEntity(name);\n  }\n\n  onText(text) {\n    if (isWhitespaceString(text)) {\n      return;\n    }\n    const node = new SimpleDOMNode(\"#text\", text);\n    this._currentFragment.push(node);\n  }\n\n  onCdata(text) {\n    const node = new SimpleDOMNode(\"#text\", text);\n    this._currentFragment.push(node);\n  }\n\n  onBeginElement(name, attributes, isEmpty) {\n    const node = new SimpleDOMNode(name);\n    node.childNodes = [];\n    this._currentFragment.push(node);\n    if (isEmpty) {\n      return;\n    }\n    this._stack.push(this._currentFragment);\n    this._currentFragment = node.childNodes;\n  }\n\n  onEndElement(name) {\n    this._currentFragment = this._stack.pop() || [];\n    const lastElement = this._currentFragment[this._currentFragment.length - 1];\n    if (!lastElement) {\n      return;\n    }\n    for (let i = 0, ii = lastElement.childNodes.length; i < ii; i++) {\n      lastElement.childNodes[i].parentNode = lastElement;\n    }\n  }\n\n  onError(code) {\n    this._errorCode = code;\n  }\n}\n\nexport { SimpleXMLParser };\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { warn } from \"../shared/util.js\";\n\nclass OptionalContentGroup {\n  constructor(name, intent) {\n    this.visible = true;\n    this.name = name;\n    this.intent = intent;\n  }\n}\n\nclass OptionalContentConfig {\n  constructor(data) {\n    this.name = null;\n    this.creator = null;\n    this._order = null;\n    this._groups = new Map();\n\n    if (data === null) {\n      return;\n    }\n    this.name = data.name;\n    this.creator = data.creator;\n    this._order = data.order;\n    for (const group of data.groups) {\n      this._groups.set(\n        group.id,\n        new OptionalContentGroup(group.name, group.intent)\n      );\n    }\n\n    if (data.baseState === \"OFF\") {\n      for (const group of this._groups) {\n        group.visible = false;\n      }\n    }\n\n    for (const on of data.on) {\n      this._groups.get(on).visible = true;\n    }\n\n    for (const off of data.off) {\n      this._groups.get(off).visible = false;\n    }\n  }\n\n  isVisible(group) {\n    if (group.type === \"OCG\") {\n      if (!this._groups.has(group.id)) {\n        warn(`Optional content group not found: ${group.id}`);\n        return true;\n      }\n      return this._groups.get(group.id).visible;\n    } else if (group.type === \"OCMD\") {\n      // Per the spec, the expression should be preferred if available. Until\n      // we implement this, just fallback to using the group policy for now.\n      if (group.expression) {\n        warn(\"Visibility expression not supported yet.\");\n      }\n      if (!group.policy || group.policy === \"AnyOn\") {\n        // Default\n        for (const id of group.ids) {\n          if (!this._groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this._groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOn\") {\n        for (const id of group.ids) {\n          if (!this._groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this._groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      } else if (group.policy === \"AnyOff\") {\n        for (const id of group.ids) {\n          if (!this._groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this._groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOff\") {\n        for (const id of group.ids) {\n          if (!this._groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this._groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n      warn(`Unknown optional content policy ${group.policy}.`);\n      return true;\n    }\n    warn(`Unknown group type ${group.type}.`);\n    return true;\n  }\n\n  setVisibility(id, visible = true) {\n    if (!this._groups.has(id)) {\n      warn(`Optional content group not found: ${id}`);\n      return;\n    }\n    this._groups.get(id).visible = !!visible;\n  }\n\n  getOrder() {\n    if (!this._groups.size) {\n      return null;\n    }\n    if (this._order) {\n      return this._order.slice();\n    }\n    return Array.from(this._groups.keys());\n  }\n\n  getGroups() {\n    if (!this._groups.size) {\n      return null;\n    }\n    return Object.fromEntries(this._groups);\n  }\n\n  getGroup(id) {\n    return this._groups.get(id) || null;\n  }\n}\n\nexport { OptionalContentConfig };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint no-var: error */\n\nimport { assert, createPromiseCapability } from \"../shared/util.js\";\n\n/** @implements {IPDFStream} */\nclass PDFDataTransportStream {\n  constructor(params, pdfDataRangeTransport) {\n    assert(\n      pdfDataRangeTransport,\n      'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.'\n    );\n\n    this._queuedChunks = [];\n    this._progressiveDone = params.progressiveDone || false;\n\n    const initialData = params.initialData;\n    if (initialData && initialData.length > 0) {\n      const buffer = new Uint8Array(initialData).buffer;\n      this._queuedChunks.push(buffer);\n    }\n\n    this._pdfDataRangeTransport = pdfDataRangeTransport;\n    this._isStreamingSupported = !params.disableStream;\n    this._isRangeSupported = !params.disableRange;\n    this._contentLength = params.length;\n\n    this._fullRequestReader = null;\n    this._rangeReaders = [];\n\n    this._pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n      this._onReceiveData({ begin, chunk });\n    });\n\n    this._pdfDataRangeTransport.addProgressListener((loaded, total) => {\n      this._onProgress({ loaded, total });\n    });\n\n    this._pdfDataRangeTransport.addProgressiveReadListener(chunk => {\n      this._onReceiveData({ chunk });\n    });\n\n    this._pdfDataRangeTransport.addProgressiveDoneListener(() => {\n      this._onProgressiveDone();\n    });\n\n    this._pdfDataRangeTransport.transportReady();\n  }\n\n  _onReceiveData(args) {\n    const buffer = new Uint8Array(args.chunk).buffer;\n    if (args.begin === undefined) {\n      if (this._fullRequestReader) {\n        this._fullRequestReader._enqueue(buffer);\n      } else {\n        this._queuedChunks.push(buffer);\n      }\n    } else {\n      const found = this._rangeReaders.some(function (rangeReader) {\n        if (rangeReader._begin !== args.begin) {\n          return false;\n        }\n        rangeReader._enqueue(buffer);\n        return true;\n      });\n      assert(\n        found,\n        \"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\"\n      );\n    }\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader ? this._fullRequestReader._loaded : 0;\n  }\n\n  _onProgress(evt) {\n    if (evt.total === undefined) {\n      // Reporting to first range reader, if it exists.\n      const firstReader = this._rangeReaders[0];\n      if (firstReader && firstReader.onProgress) {\n        firstReader.onProgress({ loaded: evt.loaded });\n      }\n    } else {\n      const fullReader = this._fullRequestReader;\n      if (fullReader && fullReader.onProgress) {\n        fullReader.onProgress({ loaded: evt.loaded, total: evt.total });\n      }\n    }\n  }\n\n  _onProgressiveDone() {\n    if (this._fullRequestReader) {\n      this._fullRequestReader.progressiveDone();\n    }\n    this._progressiveDone = true;\n  }\n\n  _removeRangeReader(reader) {\n    const i = this._rangeReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeReaders.splice(i, 1);\n    }\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFDataTransportStream.getFullReader can only be called once.\"\n    );\n    const queuedChunks = this._queuedChunks;\n    this._queuedChunks = null;\n    return new PDFDataTransportStreamReader(\n      this,\n      queuedChunks,\n      this._progressiveDone\n    );\n  }\n\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n    this._pdfDataRangeTransport.requestDataRange(begin, end);\n    this._rangeReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    if (this._fullRequestReader) {\n      this._fullRequestReader.cancel(reason);\n    }\n    const readers = this._rangeReaders.slice(0);\n    readers.forEach(function (rangeReader) {\n      rangeReader.cancel(reason);\n    });\n    this._pdfDataRangeTransport.abort();\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFDataTransportStreamReader {\n  constructor(stream, queuedChunks, progressiveDone = false) {\n    this._stream = stream;\n    this._done = progressiveDone || false;\n    this._filename = null;\n    this._queuedChunks = queuedChunks || [];\n    this._loaded = 0;\n    for (const chunk of this._queuedChunks) {\n      this._loaded += chunk.byteLength;\n    }\n    this._requests = [];\n    this._headersReady = Promise.resolve();\n    stream._fullRequestReader = this;\n\n    this.onProgress = null;\n  }\n\n  _enqueue(chunk) {\n    if (this._done) {\n      return; // Ignore new data.\n    }\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({ value: chunk, done: false });\n    } else {\n      this._queuedChunks.push(chunk);\n    }\n    this._loaded += chunk.byteLength;\n  }\n\n  get headersReady() {\n    return this._headersReady;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get isRangeSupported() {\n    return this._stream._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._stream._isStreamingSupported;\n  }\n\n  get contentLength() {\n    return this._stream._contentLength;\n  }\n\n  async read() {\n    if (this._queuedChunks.length > 0) {\n      const chunk = this._queuedChunks.shift();\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = createPromiseCapability();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    this._requests.forEach(function (requestCapability) {\n      requestCapability.resolve({ value: undefined, done: true });\n    });\n    this._requests = [];\n  }\n\n  progressiveDone() {\n    if (this._done) {\n      return;\n    }\n    this._done = true;\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFDataTransportStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._begin = begin;\n    this._end = end;\n    this._queuedChunk = null;\n    this._requests = [];\n    this._done = false;\n\n    this.onProgress = null;\n  }\n\n  _enqueue(chunk) {\n    if (this._done) {\n      return; // ignore new data\n    }\n    if (this._requests.length === 0) {\n      this._queuedChunk = chunk;\n    } else {\n      const requestsCapability = this._requests.shift();\n      requestsCapability.resolve({ value: chunk, done: false });\n      this._requests.forEach(function (requestCapability) {\n        requestCapability.resolve({ value: undefined, done: true });\n      });\n      this._requests = [];\n    }\n    this._done = true;\n    this._stream._removeRangeReader(this);\n  }\n\n  get isStreamingSupported() {\n    return false;\n  }\n\n  async read() {\n    if (this._queuedChunk) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = createPromiseCapability();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    this._requests.forEach(function (requestCapability) {\n      requestCapability.resolve({ value: undefined, done: true });\n    });\n    this._requests = [];\n    this._stream._removeRangeReader(this);\n  }\n}\n\nexport { PDFDataTransportStream };\n","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint-disable no-multi-str */\n\nimport { shadow } from \"../shared/util.js\";\n\nclass WebGLContext {\n  constructor({ enable = false }) {\n    this._enabled = enable === true;\n  }\n\n  get isEnabled() {\n    let enabled = this._enabled;\n    if (enabled) {\n      enabled = WebGLUtils.tryInitGL();\n    }\n    return shadow(this, \"isEnabled\", enabled);\n  }\n\n  composeSMask({ layer, mask, properties }) {\n    return WebGLUtils.composeSMask(layer, mask, properties);\n  }\n\n  drawFigures({ width, height, backgroundColor, figures, context }) {\n    return WebGLUtils.drawFigures(\n      width,\n      height,\n      backgroundColor,\n      figures,\n      context\n    );\n  }\n\n  clear() {\n    WebGLUtils.cleanup();\n  }\n}\n\nvar WebGLUtils = (function WebGLUtilsClosure() {\n  function loadShader(gl, code, shaderType) {\n    var shader = gl.createShader(shaderType);\n    gl.shaderSource(shader, code);\n    gl.compileShader(shader);\n    var compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n    if (!compiled) {\n      var errorMsg = gl.getShaderInfoLog(shader);\n      throw new Error(\"Error during shader compilation: \" + errorMsg);\n    }\n    return shader;\n  }\n  function createVertexShader(gl, code) {\n    return loadShader(gl, code, gl.VERTEX_SHADER);\n  }\n  function createFragmentShader(gl, code) {\n    return loadShader(gl, code, gl.FRAGMENT_SHADER);\n  }\n  function createProgram(gl, shaders) {\n    var program = gl.createProgram();\n    for (var i = 0, ii = shaders.length; i < ii; ++i) {\n      gl.attachShader(program, shaders[i]);\n    }\n    gl.linkProgram(program);\n    var linked = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!linked) {\n      var errorMsg = gl.getProgramInfoLog(program);\n      throw new Error(\"Error during program linking: \" + errorMsg);\n    }\n    return program;\n  }\n  function createTexture(gl, image, textureId) {\n    gl.activeTexture(textureId);\n    var texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n\n    // Set the parameters so we can render any size image.\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n    // Upload the image into the texture.\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n    return texture;\n  }\n\n  var currentGL, currentCanvas;\n  function generateGL() {\n    if (currentGL) {\n      return;\n    }\n\n    // The temporary canvas is used in the WebGL context.\n    currentCanvas = document.createElement(\"canvas\");\n    currentGL = currentCanvas.getContext(\"webgl\", {\n      premultipliedalpha: false,\n    });\n  }\n\n  var smaskVertexShaderCode =\n    \"\\\n  attribute vec2 a_position;                                    \\\n  attribute vec2 a_texCoord;                                    \\\n                                                                \\\n  uniform vec2 u_resolution;                                    \\\n                                                                \\\n  varying vec2 v_texCoord;                                      \\\n                                                                \\\n  void main() {                                                 \\\n    vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;   \\\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);          \\\n                                                                \\\n    v_texCoord = a_texCoord;                                    \\\n  }                                                             \";\n\n  var smaskFragmentShaderCode =\n    \"\\\n  precision mediump float;                                      \\\n                                                                \\\n  uniform vec4 u_backdrop;                                      \\\n  uniform int u_subtype;                                        \\\n  uniform sampler2D u_image;                                    \\\n  uniform sampler2D u_mask;                                     \\\n                                                                \\\n  varying vec2 v_texCoord;                                      \\\n                                                                \\\n  void main() {                                                 \\\n    vec4 imageColor = texture2D(u_image, v_texCoord);           \\\n    vec4 maskColor = texture2D(u_mask, v_texCoord);             \\\n    if (u_backdrop.a > 0.0) {                                   \\\n      maskColor.rgb = maskColor.rgb * maskColor.a +             \\\n                      u_backdrop.rgb * (1.0 - maskColor.a);     \\\n    }                                                           \\\n    float lum;                                                  \\\n    if (u_subtype == 0) {                                       \\\n      lum = maskColor.a;                                        \\\n    } else {                                                    \\\n      lum = maskColor.r * 0.3 + maskColor.g * 0.59 +            \\\n            maskColor.b * 0.11;                                 \\\n    }                                                           \\\n    imageColor.a *= lum;                                        \\\n    imageColor.rgb *= imageColor.a;                             \\\n    gl_FragColor = imageColor;                                  \\\n  }                                                             \";\n\n  var smaskCache = null;\n\n  function initSmaskGL() {\n    var canvas, gl;\n\n    generateGL();\n    canvas = currentCanvas;\n    currentCanvas = null;\n    gl = currentGL;\n    currentGL = null;\n\n    // setup a GLSL program\n    var vertexShader = createVertexShader(gl, smaskVertexShaderCode);\n    var fragmentShader = createFragmentShader(gl, smaskFragmentShaderCode);\n    var program = createProgram(gl, [vertexShader, fragmentShader]);\n    gl.useProgram(program);\n\n    var cache = {};\n    cache.gl = gl;\n    cache.canvas = canvas;\n    cache.resolutionLocation = gl.getUniformLocation(program, \"u_resolution\");\n    cache.positionLocation = gl.getAttribLocation(program, \"a_position\");\n    cache.backdropLocation = gl.getUniformLocation(program, \"u_backdrop\");\n    cache.subtypeLocation = gl.getUniformLocation(program, \"u_subtype\");\n\n    var texCoordLocation = gl.getAttribLocation(program, \"a_texCoord\");\n    var texLayerLocation = gl.getUniformLocation(program, \"u_image\");\n    var texMaskLocation = gl.getUniformLocation(program, \"u_mask\");\n\n    // provide texture coordinates for the rectangle.\n    var texCoordBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);\n    // prettier-ignore\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n      0.0, 0.0,\n      1.0, 0.0,\n      0.0, 1.0,\n      0.0, 1.0,\n      1.0, 0.0,\n      1.0, 1.0]), gl.STATIC_DRAW);\n    gl.enableVertexAttribArray(texCoordLocation);\n    gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);\n\n    gl.uniform1i(texLayerLocation, 0);\n    gl.uniform1i(texMaskLocation, 1);\n\n    smaskCache = cache;\n  }\n\n  function composeSMask(layer, mask, properties) {\n    var width = layer.width,\n      height = layer.height;\n\n    if (!smaskCache) {\n      initSmaskGL();\n    }\n    var cache = smaskCache,\n      canvas = cache.canvas,\n      gl = cache.gl;\n    canvas.width = width;\n    canvas.height = height;\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    gl.uniform2f(cache.resolutionLocation, width, height);\n\n    if (properties.backdrop) {\n      gl.uniform4f(\n        cache.resolutionLocation,\n        properties.backdrop[0],\n        properties.backdrop[1],\n        properties.backdrop[2],\n        1\n      );\n    } else {\n      gl.uniform4f(cache.resolutionLocation, 0, 0, 0, 0);\n    }\n    gl.uniform1i(\n      cache.subtypeLocation,\n      properties.subtype === \"Luminosity\" ? 1 : 0\n    );\n\n    // Create a textures\n    var texture = createTexture(gl, layer, gl.TEXTURE0);\n    var maskTexture = createTexture(gl, mask, gl.TEXTURE1);\n\n    // Create a buffer and put a single clipspace rectangle in\n    // it (2 triangles)\n    var buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    // prettier-ignore\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n      0, 0,\n      width, 0,\n      0, height,\n      0, height,\n      width, 0,\n      width, height]), gl.STATIC_DRAW);\n    gl.enableVertexAttribArray(cache.positionLocation);\n    gl.vertexAttribPointer(cache.positionLocation, 2, gl.FLOAT, false, 0, 0);\n\n    // draw\n    gl.clearColor(0, 0, 0, 0);\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    gl.drawArrays(gl.TRIANGLES, 0, 6);\n\n    gl.flush();\n\n    gl.deleteTexture(texture);\n    gl.deleteTexture(maskTexture);\n    gl.deleteBuffer(buffer);\n\n    return canvas;\n  }\n\n  var figuresVertexShaderCode =\n    \"\\\n  attribute vec2 a_position;                                    \\\n  attribute vec3 a_color;                                       \\\n                                                                \\\n  uniform vec2 u_resolution;                                    \\\n  uniform vec2 u_scale;                                         \\\n  uniform vec2 u_offset;                                        \\\n                                                                \\\n  varying vec4 v_color;                                         \\\n                                                                \\\n  void main() {                                                 \\\n    vec2 position = (a_position + u_offset) * u_scale;          \\\n    vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;     \\\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);          \\\n                                                                \\\n    v_color = vec4(a_color / 255.0, 1.0);                       \\\n  }                                                             \";\n\n  var figuresFragmentShaderCode =\n    \"\\\n  precision mediump float;                                      \\\n                                                                \\\n  varying vec4 v_color;                                         \\\n                                                                \\\n  void main() {                                                 \\\n    gl_FragColor = v_color;                                     \\\n  }                                                             \";\n\n  var figuresCache = null;\n\n  function initFiguresGL() {\n    var canvas, gl;\n\n    generateGL();\n    canvas = currentCanvas;\n    currentCanvas = null;\n    gl = currentGL;\n    currentGL = null;\n\n    // setup a GLSL program\n    var vertexShader = createVertexShader(gl, figuresVertexShaderCode);\n    var fragmentShader = createFragmentShader(gl, figuresFragmentShaderCode);\n    var program = createProgram(gl, [vertexShader, fragmentShader]);\n    gl.useProgram(program);\n\n    var cache = {};\n    cache.gl = gl;\n    cache.canvas = canvas;\n    cache.resolutionLocation = gl.getUniformLocation(program, \"u_resolution\");\n    cache.scaleLocation = gl.getUniformLocation(program, \"u_scale\");\n    cache.offsetLocation = gl.getUniformLocation(program, \"u_offset\");\n    cache.positionLocation = gl.getAttribLocation(program, \"a_position\");\n    cache.colorLocation = gl.getAttribLocation(program, \"a_color\");\n\n    figuresCache = cache;\n  }\n\n  function drawFigures(width, height, backgroundColor, figures, context) {\n    if (!figuresCache) {\n      initFiguresGL();\n    }\n    var cache = figuresCache,\n      canvas = cache.canvas,\n      gl = cache.gl;\n\n    canvas.width = width;\n    canvas.height = height;\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    gl.uniform2f(cache.resolutionLocation, width, height);\n\n    // count triangle points\n    var count = 0;\n    var i, ii, rows;\n    for (i = 0, ii = figures.length; i < ii; i++) {\n      switch (figures[i].type) {\n        case \"lattice\":\n          rows = (figures[i].coords.length / figures[i].verticesPerRow) | 0;\n          count += (rows - 1) * (figures[i].verticesPerRow - 1) * 6;\n          break;\n        case \"triangles\":\n          count += figures[i].coords.length;\n          break;\n      }\n    }\n    // transfer data\n    var coords = new Float32Array(count * 2);\n    var colors = new Uint8Array(count * 3);\n    var coordsMap = context.coords,\n      colorsMap = context.colors;\n    var pIndex = 0,\n      cIndex = 0;\n    for (i = 0, ii = figures.length; i < ii; i++) {\n      var figure = figures[i],\n        ps = figure.coords,\n        cs = figure.colors;\n      switch (figure.type) {\n        case \"lattice\":\n          var cols = figure.verticesPerRow;\n          rows = (ps.length / cols) | 0;\n          for (var row = 1; row < rows; row++) {\n            var offset = row * cols + 1;\n            for (var col = 1; col < cols; col++, offset++) {\n              coords[pIndex] = coordsMap[ps[offset - cols - 1]];\n              coords[pIndex + 1] = coordsMap[ps[offset - cols - 1] + 1];\n              coords[pIndex + 2] = coordsMap[ps[offset - cols]];\n              coords[pIndex + 3] = coordsMap[ps[offset - cols] + 1];\n              coords[pIndex + 4] = coordsMap[ps[offset - 1]];\n              coords[pIndex + 5] = coordsMap[ps[offset - 1] + 1];\n              colors[cIndex] = colorsMap[cs[offset - cols - 1]];\n              colors[cIndex + 1] = colorsMap[cs[offset - cols - 1] + 1];\n              colors[cIndex + 2] = colorsMap[cs[offset - cols - 1] + 2];\n              colors[cIndex + 3] = colorsMap[cs[offset - cols]];\n              colors[cIndex + 4] = colorsMap[cs[offset - cols] + 1];\n              colors[cIndex + 5] = colorsMap[cs[offset - cols] + 2];\n              colors[cIndex + 6] = colorsMap[cs[offset - 1]];\n              colors[cIndex + 7] = colorsMap[cs[offset - 1] + 1];\n              colors[cIndex + 8] = colorsMap[cs[offset - 1] + 2];\n\n              coords[pIndex + 6] = coords[pIndex + 2];\n              coords[pIndex + 7] = coords[pIndex + 3];\n              coords[pIndex + 8] = coords[pIndex + 4];\n              coords[pIndex + 9] = coords[pIndex + 5];\n              coords[pIndex + 10] = coordsMap[ps[offset]];\n              coords[pIndex + 11] = coordsMap[ps[offset] + 1];\n              colors[cIndex + 9] = colors[cIndex + 3];\n              colors[cIndex + 10] = colors[cIndex + 4];\n              colors[cIndex + 11] = colors[cIndex + 5];\n              colors[cIndex + 12] = colors[cIndex + 6];\n              colors[cIndex + 13] = colors[cIndex + 7];\n              colors[cIndex + 14] = colors[cIndex + 8];\n              colors[cIndex + 15] = colorsMap[cs[offset]];\n              colors[cIndex + 16] = colorsMap[cs[offset] + 1];\n              colors[cIndex + 17] = colorsMap[cs[offset] + 2];\n              pIndex += 12;\n              cIndex += 18;\n            }\n          }\n          break;\n        case \"triangles\":\n          for (var j = 0, jj = ps.length; j < jj; j++) {\n            coords[pIndex] = coordsMap[ps[j]];\n            coords[pIndex + 1] = coordsMap[ps[j] + 1];\n            colors[cIndex] = colorsMap[cs[j]];\n            colors[cIndex + 1] = colorsMap[cs[j] + 1];\n            colors[cIndex + 2] = colorsMap[cs[j] + 2];\n            pIndex += 2;\n            cIndex += 3;\n          }\n          break;\n      }\n    }\n\n    // draw\n    if (backgroundColor) {\n      gl.clearColor(\n        backgroundColor[0] / 255,\n        backgroundColor[1] / 255,\n        backgroundColor[2] / 255,\n        1.0\n      );\n    } else {\n      gl.clearColor(0, 0, 0, 0);\n    }\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    var coordsBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, coordsBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, coords, gl.STATIC_DRAW);\n    gl.enableVertexAttribArray(cache.positionLocation);\n    gl.vertexAttribPointer(cache.positionLocation, 2, gl.FLOAT, false, 0, 0);\n\n    var colorsBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, colorsBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, colors, gl.STATIC_DRAW);\n    gl.enableVertexAttribArray(cache.colorLocation);\n    gl.vertexAttribPointer(\n      cache.colorLocation,\n      3,\n      gl.UNSIGNED_BYTE,\n      false,\n      0,\n      0\n    );\n\n    gl.uniform2f(cache.scaleLocation, context.scaleX, context.scaleY);\n    gl.uniform2f(cache.offsetLocation, context.offsetX, context.offsetY);\n\n    gl.drawArrays(gl.TRIANGLES, 0, count);\n\n    gl.flush();\n\n    gl.deleteBuffer(coordsBuffer);\n    gl.deleteBuffer(colorsBuffer);\n\n    return canvas;\n  }\n\n  return {\n    tryInitGL() {\n      try {\n        generateGL();\n        return !!currentGL;\n      } catch (ex) {}\n      return false;\n    },\n\n    composeSMask,\n\n    drawFigures,\n\n    cleanup() {\n      if (smaskCache && smaskCache.canvas) {\n        smaskCache.canvas.width = 0;\n        smaskCache.canvas.height = 0;\n      }\n      if (figuresCache && figuresCache.canvas) {\n        figuresCache.canvas.width = 0;\n        figuresCache.canvas.height = 0;\n      }\n      smaskCache = null;\n      figuresCache = null;\n    },\n  };\n})();\n\nexport { WebGLContext };\n","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint no-var: error */\n\nimport {\n  addLinkAttributes,\n  DOMSVGFactory,\n  getFilenameFromUrl,\n  LinkTarget,\n  PDFDateString,\n} from \"./display_utils.js\";\nimport {\n  AnnotationBorderStyleType,\n  AnnotationType,\n  stringToPDFString,\n  unreachable,\n  Util,\n  warn,\n} from \"../shared/util.js\";\nimport { AnnotationStorage } from \"./annotation_storage.js\";\n\n/**\n * @typedef {Object} AnnotationElementParameters\n * @property {Object} data\n * @property {HTMLDivElement} layer\n * @property {PDFPage} page\n * @property {PageViewport} viewport\n * @property {IPDFLinkService} linkService\n * @property {DownloadManager} downloadManager\n * @property {AnnotationStorage} [annotationStorage]\n * @property {string} [imageResourcesPath] - Path for image resources, mainly\n *   for annotation icons. Include trailing slash.\n * @property {boolean} renderInteractiveForms\n * @property {Object} svgFactory\n */\n\nclass AnnotationElementFactory {\n  /**\n   * @param {AnnotationElementParameters} parameters\n   * @returns {AnnotationElement}\n   */\n  static create(parameters) {\n    const subtype = parameters.data.annotationType;\n\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n\n      case AnnotationType.WIDGET:\n        const fieldType = parameters.data.fieldType;\n\n        switch (fieldType) {\n          case \"Tx\":\n            return new TextWidgetAnnotationElement(parameters);\n          case \"Btn\":\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            return new PushButtonWidgetAnnotationElement(parameters);\n          case \"Ch\":\n            return new ChoiceWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n\n      case AnnotationType.FREETEXT:\n        return new FreeTextAnnotationElement(parameters);\n\n      case AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n\n      case AnnotationType.SQUARE:\n        return new SquareAnnotationElement(parameters);\n\n      case AnnotationType.CIRCLE:\n        return new CircleAnnotationElement(parameters);\n\n      case AnnotationType.POLYLINE:\n        return new PolylineAnnotationElement(parameters);\n\n      case AnnotationType.CARET:\n        return new CaretAnnotationElement(parameters);\n\n      case AnnotationType.INK:\n        return new InkAnnotationElement(parameters);\n\n      case AnnotationType.POLYGON:\n        return new PolygonAnnotationElement(parameters);\n\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n\n      case AnnotationType.STAMP:\n        return new StampAnnotationElement(parameters);\n\n      case AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n}\n\nclass AnnotationElement {\n  constructor(parameters, isRenderable = false, ignoreBorder = false) {\n    this.isRenderable = isRenderable;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.page = parameters.page;\n    this.viewport = parameters.viewport;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderInteractiveForms = parameters.renderInteractiveForms;\n    this.svgFactory = parameters.svgFactory;\n    this.annotationStorage = parameters.annotationStorage;\n\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n  }\n\n  /**\n   * Create an empty container for the annotation's HTML element.\n   *\n   * @private\n   * @param {boolean} ignoreBorder\n   * @memberof AnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  _createContainer(ignoreBorder = false) {\n    const data = this.data,\n      page = this.page,\n      viewport = this.viewport;\n    const container = document.createElement(\"section\");\n    let width = data.rect[2] - data.rect[0];\n    let height = data.rect[3] - data.rect[1];\n\n    container.setAttribute(\"data-annotation-id\", data.id);\n\n    // Do *not* modify `data.rect`, since that will corrupt the annotation\n    // position on subsequent calls to `_createContainer` (see issue 6804).\n    const rect = Util.normalizeRect([\n      data.rect[0],\n      page.view[3] - data.rect[1] + page.view[1],\n      data.rect[2],\n      page.view[3] - data.rect[3] + page.view[1],\n    ]);\n\n    container.style.transform = `matrix(${viewport.transform.join(\",\")})`;\n    container.style.transformOrigin = `-${rect[0]}px -${rect[1]}px`;\n\n    if (!ignoreBorder && data.borderStyle.width > 0) {\n      container.style.borderWidth = `${data.borderStyle.width}px`;\n      if (data.borderStyle.style !== AnnotationBorderStyleType.UNDERLINE) {\n        // Underline styles only have a bottom border, so we do not need\n        // to adjust for all borders. This yields a similar result as\n        // Adobe Acrobat/Reader.\n        width = width - 2 * data.borderStyle.width;\n        height = height - 2 * data.borderStyle.width;\n      }\n\n      const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n      const verticalRadius = data.borderStyle.verticalCornerRadius;\n      if (horizontalRadius > 0 || verticalRadius > 0) {\n        const radius = `${horizontalRadius}px / ${verticalRadius}px`;\n        container.style.borderRadius = radius;\n      }\n\n      switch (data.borderStyle.style) {\n        case AnnotationBorderStyleType.SOLID:\n          container.style.borderStyle = \"solid\";\n          break;\n\n        case AnnotationBorderStyleType.DASHED:\n          container.style.borderStyle = \"dashed\";\n          break;\n\n        case AnnotationBorderStyleType.BEVELED:\n          warn(\"Unimplemented border style: beveled\");\n          break;\n\n        case AnnotationBorderStyleType.INSET:\n          warn(\"Unimplemented border style: inset\");\n          break;\n\n        case AnnotationBorderStyleType.UNDERLINE:\n          container.style.borderBottomStyle = \"solid\";\n          break;\n\n        default:\n          break;\n      }\n\n      if (data.color) {\n        container.style.borderColor = Util.makeCssRgb(\n          data.color[0] | 0,\n          data.color[1] | 0,\n          data.color[2] | 0\n        );\n      } else {\n        // Transparent (invisible) border, so do not draw it at all.\n        container.style.borderWidth = 0;\n      }\n    }\n\n    container.style.left = `${rect[0]}px`;\n    container.style.top = `${rect[1]}px`;\n    container.style.width = `${width}px`;\n    container.style.height = `${height}px`;\n    return container;\n  }\n\n  /**\n   * Create a popup for the annotation's HTML element. This is used for\n   * annotations that do not have a Popup entry in the dictionary, but\n   * are of a type that works with popups (such as Highlight annotations).\n   *\n   * @private\n   * @param {HTMLSectionElement} container\n   * @param {HTMLDivElement|HTMLImageElement|null} trigger\n   * @param {Object} data\n   * @memberof AnnotationElement\n   */\n  _createPopup(container, trigger, data) {\n    // If no trigger element is specified, create it.\n    if (!trigger) {\n      trigger = document.createElement(\"div\");\n      trigger.style.height = container.style.height;\n      trigger.style.width = container.style.width;\n      container.appendChild(trigger);\n    }\n\n    const popupElement = new PopupElement({\n      container,\n      trigger,\n      color: data.color,\n      title: data.title,\n      modificationDate: data.modificationDate,\n      contents: data.contents,\n      hideWrapper: true,\n    });\n    const popup = popupElement.render();\n\n    // Position the popup next to the annotation's container.\n    popup.style.left = container.style.width;\n\n    container.appendChild(popup);\n  }\n\n  /**\n   * Render the annotation's HTML element in the empty container.\n   *\n   * @public\n   * @memberof AnnotationElement\n   */\n  render() {\n    unreachable(\"Abstract method `AnnotationElement.render` called\");\n  }\n}\n\nclass LinkAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.url ||\n      parameters.data.dest ||\n      parameters.data.action\n    );\n    super(parameters, isRenderable);\n  }\n\n  /**\n   * Render the link annotation's HTML element in the empty container.\n   *\n   * @public\n   * @memberof LinkAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    this.container.className = \"linkAnnotation\";\n\n    const { data, linkService } = this;\n    const link = document.createElement(\"a\");\n\n    if (data.url) {\n      addLinkAttributes(link, {\n        url: data.url,\n        target: data.newWindow\n          ? LinkTarget.BLANK\n          : linkService.externalLinkTarget,\n        rel: linkService.externalLinkRel,\n        enabled: linkService.externalLinkEnabled,\n      });\n    } else if (data.action) {\n      this._bindNamedAction(link, data.action);\n    } else {\n      this._bindLink(link, data.dest);\n    }\n\n    this.container.appendChild(link);\n    return this.container;\n  }\n\n  /**\n   * Bind internal links to the link element.\n   *\n   * @private\n   * @param {Object} link\n   * @param {Object} destination\n   * @memberof LinkAnnotationElement\n   */\n  _bindLink(link, destination) {\n    link.href = this.linkService.getDestinationHash(destination);\n    link.onclick = () => {\n      if (destination) {\n        this.linkService.navigateTo(destination);\n      }\n      return false;\n    };\n    if (destination) {\n      link.className = \"internalLink\";\n    }\n  }\n\n  /**\n   * Bind named actions to the link element.\n   *\n   * @private\n   * @param {Object} link\n   * @param {Object} action\n   * @memberof LinkAnnotationElement\n   */\n  _bindNamedAction(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeNamedAction(action);\n      return false;\n    };\n    link.className = \"internalLink\";\n  }\n}\n\nclass TextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.title ||\n      parameters.data.contents\n    );\n    super(parameters, isRenderable);\n  }\n\n  /**\n   * Render the text annotation's HTML element in the empty container.\n   *\n   * @public\n   * @memberof TextAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    this.container.className = \"textAnnotation\";\n\n    const image = document.createElement(\"img\");\n    image.style.height = this.container.style.height;\n    image.style.width = this.container.style.width;\n    image.src =\n      this.imageResourcesPath +\n      \"annotation-\" +\n      this.data.name.toLowerCase() +\n      \".svg\";\n    image.alt = \"[{{type}} Annotation]\";\n    image.dataset.l10nId = \"text_annotation_type\";\n    image.dataset.l10nArgs = JSON.stringify({ type: this.data.name });\n\n    if (!this.data.hasPopup) {\n      this._createPopup(this.container, image, this.data);\n    }\n\n    this.container.appendChild(image);\n    return this.container;\n  }\n}\n\nclass WidgetAnnotationElement extends AnnotationElement {\n  /**\n   * Render the widget annotation's HTML element in the empty container.\n   *\n   * @public\n   * @memberof WidgetAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    // Show only the container for unsupported field types.\n    return this.container;\n  }\n}\n\nclass TextWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    const isRenderable =\n      parameters.renderInteractiveForms ||\n      (!parameters.data.hasAppearance && !!parameters.data.fieldValue);\n    super(parameters, isRenderable);\n  }\n\n  /**\n   * Render the text widget annotation's HTML element in the empty container.\n   *\n   * @public\n   * @memberof TextWidgetAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    const TEXT_ALIGNMENT = [\"left\", \"center\", \"right\"];\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n\n    this.container.className = \"textWidgetAnnotation\";\n\n    let element = null;\n    if (this.renderInteractiveForms) {\n      // NOTE: We cannot set the values using `element.value` below, since it\n      //       prevents the AnnotationLayer rasterizer in `test/driver.js`\n      //       from parsing the elements correctly for the reference tests.\n      const textContent = storage.getOrCreateValue(id, this.data.fieldValue);\n\n      if (this.data.multiLine) {\n        element = document.createElement(\"textarea\");\n        element.textContent = textContent;\n      } else {\n        element = document.createElement(\"input\");\n        element.type = \"text\";\n        element.setAttribute(\"value\", textContent);\n      }\n\n      element.addEventListener(\"input\", function (event) {\n        storage.setValue(id, event.target.value);\n      });\n\n      element.disabled = this.data.readOnly;\n      element.name = this.data.fieldName;\n\n      if (this.data.maxLen !== null) {\n        element.maxLength = this.data.maxLen;\n      }\n\n      if (this.data.comb) {\n        const fieldWidth = this.data.rect[2] - this.data.rect[0];\n        const combWidth = fieldWidth / this.data.maxLen;\n\n        element.classList.add(\"comb\");\n        element.style.letterSpacing = `calc(${combWidth}px - 1ch)`;\n      }\n    } else {\n      element = document.createElement(\"div\");\n      element.textContent = this.data.fieldValue;\n      element.style.verticalAlign = \"middle\";\n      element.style.display = \"table-cell\";\n\n      let font = null;\n      if (\n        this.data.fontRefName &&\n        this.page.commonObjs.has(this.data.fontRefName)\n      ) {\n        font = this.page.commonObjs.get(this.data.fontRefName);\n      }\n      this._setTextStyle(element, font);\n    }\n\n    if (this.data.textAlignment !== null) {\n      element.style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n    }\n\n    this.container.appendChild(element);\n    return this.container;\n  }\n\n  /**\n   * Apply text styles to the text in the element.\n   *\n   * @private\n   * @param {HTMLDivElement} element\n   * @param {Object} font\n   * @memberof TextWidgetAnnotationElement\n   */\n  _setTextStyle(element, font) {\n    // TODO: This duplicates some of the logic in CanvasGraphics.setFont().\n    const style = element.style;\n    style.fontSize = `${this.data.fontSize}px`;\n    style.direction = this.data.fontDirection < 0 ? \"rtl\" : \"ltr\";\n\n    if (!font) {\n      return;\n    }\n\n    let bold = \"normal\";\n    if (font.black) {\n      bold = \"900\";\n    } else if (font.bold) {\n      bold = \"bold\";\n    }\n    style.fontWeight = bold;\n    style.fontStyle = font.italic ? \"italic\" : \"normal\";\n\n    // Use a reasonable default font if the font doesn't specify a fallback.\n    const fontFamily = font.loadedName ? `\"${font.loadedName}\", ` : \"\";\n    const fallbackName = font.fallbackName || \"Helvetica, sans-serif\";\n    style.fontFamily = fontFamily + fallbackName;\n  }\n}\n\nclass CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, parameters.renderInteractiveForms);\n  }\n\n  /**\n   * Render the checkbox widget annotation's HTML element\n   * in the empty container.\n   *\n   * @public\n   * @memberof CheckboxWidgetAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    const value = storage.getOrCreateValue(\n      id,\n      data.fieldValue && data.fieldValue !== \"Off\"\n    );\n\n    this.container.className = \"buttonWidgetAnnotation checkBox\";\n\n    const element = document.createElement(\"input\");\n    element.disabled = data.readOnly;\n    element.type = \"checkbox\";\n    element.name = this.data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n\n    element.addEventListener(\"change\", function (event) {\n      storage.setValue(id, event.target.checked);\n    });\n\n    this.container.appendChild(element);\n    return this.container;\n  }\n}\n\nclass RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, parameters.renderInteractiveForms);\n  }\n\n  /**\n   * Render the radio button widget annotation's HTML element\n   * in the empty container.\n   *\n   * @public\n   * @memberof RadioButtonWidgetAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    this.container.className = \"buttonWidgetAnnotation radioButton\";\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    const value = storage.getOrCreateValue(\n      id,\n      data.fieldValue === data.buttonValue\n    );\n\n    const element = document.createElement(\"input\");\n    element.disabled = data.readOnly;\n    element.type = \"radio\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n\n    element.addEventListener(\"change\", function (event) {\n      const name = event.target.name;\n      for (const radio of document.getElementsByName(name)) {\n        if (radio !== event.target) {\n          storage.setValue(\n            radio.parentNode.getAttribute(\"data-annotation-id\"),\n            false\n          );\n        }\n      }\n      storage.setValue(id, event.target.checked);\n    });\n\n    this.container.appendChild(element);\n    return this.container;\n  }\n}\n\nclass PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n  /**\n   * Render the push button widget annotation's HTML element\n   * in the empty container.\n   *\n   * @public\n   * @memberof PushButtonWidgetAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    // The rendering and functionality of a push button widget annotation is\n    // equal to that of a link annotation, but may have more functionality, such\n    // as performing actions on form fields (resetting, submitting, et cetera).\n    const container = super.render();\n    container.className = \"buttonWidgetAnnotation pushButton\";\n    return container;\n  }\n}\n\nclass ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, parameters.renderInteractiveForms);\n  }\n\n  /**\n   * Render the choice widget annotation's HTML element in the empty\n   * container.\n   *\n   * @public\n   * @memberof ChoiceWidgetAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    this.container.className = \"choiceWidgetAnnotation\";\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n\n    // For printing/saving we currently only support choice widgets with one\n    // option selection. Therefore, listboxes (#12189) and comboboxes (#12224)\n    // are not properly printed/saved yet, so we only store the first item in\n    // the field value array instead of the entire array. Once support for those\n    // two field types is implemented, we should use the same pattern as the\n    // other interactive widgets where the return value of `getOrCreateValue` is\n    // used and the full array of field values is stored.\n    storage.getOrCreateValue(\n      id,\n      this.data.fieldValue.length > 0 ? this.data.fieldValue[0] : null\n    );\n\n    const selectElement = document.createElement(\"select\");\n    selectElement.disabled = this.data.readOnly;\n    selectElement.name = this.data.fieldName;\n\n    if (!this.data.combo) {\n      // List boxes have a size and (optionally) multiple selection.\n      selectElement.size = this.data.options.length;\n      if (this.data.multiSelect) {\n        selectElement.multiple = true;\n      }\n    }\n\n    // Insert the options into the choice field.\n    for (const option of this.data.options) {\n      const optionElement = document.createElement(\"option\");\n      optionElement.textContent = option.displayValue;\n      optionElement.value = option.exportValue;\n      if (this.data.fieldValue.includes(option.exportValue)) {\n        optionElement.setAttribute(\"selected\", true);\n      }\n      selectElement.appendChild(optionElement);\n    }\n\n    selectElement.addEventListener(\"input\", function (event) {\n      const options = event.target.options;\n      const value = options[options.selectedIndex].value;\n      storage.setValue(id, value);\n    });\n\n    this.container.appendChild(selectElement);\n    return this.container;\n  }\n}\n\nclass PopupAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(parameters.data.title || parameters.data.contents);\n    super(parameters, isRenderable);\n  }\n\n  /**\n   * Render the popup annotation's HTML element in the empty container.\n   *\n   * @public\n   * @memberof PopupAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    // Do not render popup annotations for parent elements with these types as\n    // they create the popups themselves (because of custom trigger divs).\n    const IGNORE_TYPES = [\n      \"Line\",\n      \"Square\",\n      \"Circle\",\n      \"PolyLine\",\n      \"Polygon\",\n      \"Ink\",\n    ];\n\n    this.container.className = \"popupAnnotation\";\n\n    if (IGNORE_TYPES.includes(this.data.parentType)) {\n      return this.container;\n    }\n\n    const selector = `[data-annotation-id=\"${this.data.parentId}\"]`;\n    const parentElement = this.layer.querySelector(selector);\n    if (!parentElement) {\n      return this.container;\n    }\n\n    const popup = new PopupElement({\n      container: this.container,\n      trigger: parentElement,\n      color: this.data.color,\n      title: this.data.title,\n      modificationDate: this.data.modificationDate,\n      contents: this.data.contents,\n    });\n\n    // Position the popup next to the parent annotation's container.\n    // PDF viewers ignore a popup annotation's rectangle.\n    const parentLeft = parseFloat(parentElement.style.left);\n    const parentWidth = parseFloat(parentElement.style.width);\n    this.container.style.transformOrigin = `-${parentLeft + parentWidth}px -${\n      parentElement.style.top\n    }`;\n    this.container.style.left = `${parentLeft + parentWidth}px`;\n\n    this.container.appendChild(popup.render());\n    return this.container;\n  }\n}\n\nclass PopupElement {\n  constructor(parameters) {\n    this.container = parameters.container;\n    this.trigger = parameters.trigger;\n    this.color = parameters.color;\n    this.title = parameters.title;\n    this.modificationDate = parameters.modificationDate;\n    this.contents = parameters.contents;\n    this.hideWrapper = parameters.hideWrapper || false;\n\n    this.pinned = false;\n  }\n\n  /**\n   * Render the popup's HTML element.\n   *\n   * @public\n   * @memberof PopupElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    const BACKGROUND_ENLIGHT = 0.7;\n\n    const wrapper = document.createElement(\"div\");\n    wrapper.className = \"popupWrapper\";\n\n    // For Popup annotations we hide the entire section because it contains\n    // only the popup. However, for Text annotations without a separate Popup\n    // annotation, we cannot hide the entire container as the image would\n    // disappear too. In that special case, hiding the wrapper suffices.\n    this.hideElement = this.hideWrapper ? wrapper : this.container;\n    this.hideElement.setAttribute(\"hidden\", true);\n\n    const popup = document.createElement(\"div\");\n    popup.className = \"popup\";\n\n    const color = this.color;\n    if (color) {\n      // Enlighten the color.\n      const r = BACKGROUND_ENLIGHT * (255 - color[0]) + color[0];\n      const g = BACKGROUND_ENLIGHT * (255 - color[1]) + color[1];\n      const b = BACKGROUND_ENLIGHT * (255 - color[2]) + color[2];\n      popup.style.backgroundColor = Util.makeCssRgb(r | 0, g | 0, b | 0);\n    }\n\n    const title = document.createElement(\"h1\");\n    title.textContent = this.title;\n    popup.appendChild(title);\n\n    // The modification date is shown in the popup instead of the creation\n    // date if it is available and can be parsed correctly, which is\n    // consistent with other viewers such as Adobe Acrobat.\n    const dateObject = PDFDateString.toDateObject(this.modificationDate);\n    if (dateObject) {\n      const modificationDate = document.createElement(\"span\");\n      modificationDate.textContent = \"{{date}}, {{time}}\";\n      modificationDate.dataset.l10nId = \"annotation_date_string\";\n      modificationDate.dataset.l10nArgs = JSON.stringify({\n        date: dateObject.toLocaleDateString(),\n        time: dateObject.toLocaleTimeString(),\n      });\n      popup.appendChild(modificationDate);\n    }\n\n    const contents = this._formatContents(this.contents);\n    popup.appendChild(contents);\n\n    // Attach the event listeners to the trigger element.\n    this.trigger.addEventListener(\"click\", this._toggle.bind(this));\n    this.trigger.addEventListener(\"mouseover\", this._show.bind(this, false));\n    this.trigger.addEventListener(\"mouseout\", this._hide.bind(this, false));\n    popup.addEventListener(\"click\", this._hide.bind(this, true));\n\n    wrapper.appendChild(popup);\n    return wrapper;\n  }\n\n  /**\n   * Format the contents of the popup by adding newlines where necessary.\n   *\n   * @private\n   * @param {string} contents\n   * @memberof PopupElement\n   * @returns {HTMLParagraphElement}\n   */\n  _formatContents(contents) {\n    const p = document.createElement(\"p\");\n    const lines = contents.split(/(?:\\r\\n?|\\n)/);\n    for (let i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      p.appendChild(document.createTextNode(line));\n      if (i < ii - 1) {\n        p.appendChild(document.createElement(\"br\"));\n      }\n    }\n    return p;\n  }\n\n  /**\n   * Toggle the visibility of the popup.\n   *\n   * @private\n   * @memberof PopupElement\n   */\n  _toggle() {\n    if (this.pinned) {\n      this._hide(true);\n    } else {\n      this._show(true);\n    }\n  }\n\n  /**\n   * Show the popup.\n   *\n   * @private\n   * @param {boolean} pin\n   * @memberof PopupElement\n   */\n  _show(pin = false) {\n    if (pin) {\n      this.pinned = true;\n    }\n    if (this.hideElement.hasAttribute(\"hidden\")) {\n      this.hideElement.removeAttribute(\"hidden\");\n      this.container.style.zIndex += 1;\n    }\n  }\n\n  /**\n   * Hide the popup.\n   *\n   * @private\n   * @param {boolean} unpin\n   * @memberof PopupElement\n   */\n  _hide(unpin = true) {\n    if (unpin) {\n      this.pinned = false;\n    }\n    if (!this.hideElement.hasAttribute(\"hidden\") && !this.pinned) {\n      this.hideElement.setAttribute(\"hidden\", true);\n      this.container.style.zIndex -= 1;\n    }\n  }\n}\n\nclass FreeTextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.title ||\n      parameters.data.contents\n    );\n    super(parameters, isRenderable, /* ignoreBorder = */ true);\n  }\n\n  /**\n   * Render the free text annotation's HTML element in the empty container.\n   *\n   * @public\n   * @memberof FreeTextAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    this.container.className = \"freeTextAnnotation\";\n\n    if (!this.data.hasPopup) {\n      this._createPopup(this.container, null, this.data);\n    }\n    return this.container;\n  }\n}\n\nclass LineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.title ||\n      parameters.data.contents\n    );\n    super(parameters, isRenderable, /* ignoreBorder = */ true);\n  }\n\n  /**\n   * Render the line annotation's HTML element in the empty container.\n   *\n   * @public\n   * @memberof LineAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    this.container.className = \"lineAnnotation\";\n\n    // Create an invisible line with the same starting and ending coordinates\n    // that acts as the trigger for the popup. Only the line itself should\n    // trigger the popup, not the entire container.\n    const data = this.data;\n    const width = data.rect[2] - data.rect[0];\n    const height = data.rect[3] - data.rect[1];\n    const svg = this.svgFactory.create(width, height);\n\n    // PDF coordinates are calculated from a bottom left origin, so transform\n    // the line coordinates to a top left origin for the SVG element.\n    const line = this.svgFactory.createElement(\"svg:line\");\n    line.setAttribute(\"x1\", data.rect[2] - data.lineCoordinates[0]);\n    line.setAttribute(\"y1\", data.rect[3] - data.lineCoordinates[1]);\n    line.setAttribute(\"x2\", data.rect[2] - data.lineCoordinates[2]);\n    line.setAttribute(\"y2\", data.rect[3] - data.lineCoordinates[3]);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    line.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    line.setAttribute(\"stroke\", \"transparent\");\n\n    svg.appendChild(line);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the line instead\n    // of to the entire container (which is the default).\n    this._createPopup(this.container, line, data);\n\n    return this.container;\n  }\n}\n\nclass SquareAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.title ||\n      parameters.data.contents\n    );\n    super(parameters, isRenderable, /* ignoreBorder = */ true);\n  }\n\n  /**\n   * Render the square annotation's HTML element in the empty container.\n   *\n   * @public\n   * @memberof SquareAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    this.container.className = \"squareAnnotation\";\n\n    // Create an invisible square with the same rectangle that acts as the\n    // trigger for the popup. Only the square itself should trigger the\n    // popup, not the entire container.\n    const data = this.data;\n    const width = data.rect[2] - data.rect[0];\n    const height = data.rect[3] - data.rect[1];\n    const svg = this.svgFactory.create(width, height);\n\n    // The browser draws half of the borders inside the square and half of\n    // the borders outside the square by default. This behavior cannot be\n    // changed programmatically, so correct for that here.\n    const borderWidth = data.borderStyle.width;\n    const square = this.svgFactory.createElement(\"svg:rect\");\n    square.setAttribute(\"x\", borderWidth / 2);\n    square.setAttribute(\"y\", borderWidth / 2);\n    square.setAttribute(\"width\", width - borderWidth);\n    square.setAttribute(\"height\", height - borderWidth);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    square.setAttribute(\"stroke-width\", borderWidth || 1);\n    square.setAttribute(\"stroke\", \"transparent\");\n    square.setAttribute(\"fill\", \"none\");\n\n    svg.appendChild(square);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the square instead\n    // of to the entire container (which is the default).\n    this._createPopup(this.container, square, data);\n\n    return this.container;\n  }\n}\n\nclass CircleAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.title ||\n      parameters.data.contents\n    );\n    super(parameters, isRenderable, /* ignoreBorder = */ true);\n  }\n\n  /**\n   * Render the circle annotation's HTML element in the empty container.\n   *\n   * @public\n   * @memberof CircleAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    this.container.className = \"circleAnnotation\";\n\n    // Create an invisible circle with the same ellipse that acts as the\n    // trigger for the popup. Only the circle itself should trigger the\n    // popup, not the entire container.\n    const data = this.data;\n    const width = data.rect[2] - data.rect[0];\n    const height = data.rect[3] - data.rect[1];\n    const svg = this.svgFactory.create(width, height);\n\n    // The browser draws half of the borders inside the circle and half of\n    // the borders outside the circle by default. This behavior cannot be\n    // changed programmatically, so correct for that here.\n    const borderWidth = data.borderStyle.width;\n    const circle = this.svgFactory.createElement(\"svg:ellipse\");\n    circle.setAttribute(\"cx\", width / 2);\n    circle.setAttribute(\"cy\", height / 2);\n    circle.setAttribute(\"rx\", width / 2 - borderWidth / 2);\n    circle.setAttribute(\"ry\", height / 2 - borderWidth / 2);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    circle.setAttribute(\"stroke-width\", borderWidth || 1);\n    circle.setAttribute(\"stroke\", \"transparent\");\n    circle.setAttribute(\"fill\", \"none\");\n\n    svg.appendChild(circle);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the circle instead\n    // of to the entire container (which is the default).\n    this._createPopup(this.container, circle, data);\n\n    return this.container;\n  }\n}\n\nclass PolylineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.title ||\n      parameters.data.contents\n    );\n    super(parameters, isRenderable, /* ignoreBorder = */ true);\n\n    this.containerClassName = \"polylineAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n  }\n\n  /**\n   * Render the polyline annotation's HTML element in the empty container.\n   *\n   * @public\n   * @memberof PolylineAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    this.container.className = this.containerClassName;\n\n    // Create an invisible polyline with the same points that acts as the\n    // trigger for the popup. Only the polyline itself should trigger the\n    // popup, not the entire container.\n    const data = this.data;\n    const width = data.rect[2] - data.rect[0];\n    const height = data.rect[3] - data.rect[1];\n    const svg = this.svgFactory.create(width, height);\n\n    // Convert the vertices array to a single points string that the SVG\n    // polyline element expects (\"x1,y1 x2,y2 ...\"). PDF coordinates are\n    // calculated from a bottom left origin, so transform the polyline\n    // coordinates to a top left origin for the SVG element.\n    let points = [];\n    for (const coordinate of data.vertices) {\n      const x = coordinate.x - data.rect[0];\n      const y = data.rect[3] - coordinate.y;\n      points.push(x + \",\" + y);\n    }\n    points = points.join(\" \");\n\n    const polyline = this.svgFactory.createElement(this.svgElementName);\n    polyline.setAttribute(\"points\", points);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    polyline.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    polyline.setAttribute(\"stroke\", \"transparent\");\n    polyline.setAttribute(\"fill\", \"none\");\n\n    svg.appendChild(polyline);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the polyline\n    // instead of to the entire container (which is the default).\n    this._createPopup(this.container, polyline, data);\n\n    return this.container;\n  }\n}\n\nclass PolygonAnnotationElement extends PolylineAnnotationElement {\n  constructor(parameters) {\n    // Polygons are specific forms of polylines, so reuse their logic.\n    super(parameters);\n\n    this.containerClassName = \"polygonAnnotation\";\n    this.svgElementName = \"svg:polygon\";\n  }\n}\n\nclass CaretAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.title ||\n      parameters.data.contents\n    );\n    super(parameters, isRenderable, /* ignoreBorder = */ true);\n  }\n\n  /**\n   * Render the caret annotation's HTML element in the empty container.\n   *\n   * @public\n   * @memberof CaretAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    this.container.className = \"caretAnnotation\";\n\n    if (!this.data.hasPopup) {\n      this._createPopup(this.container, null, this.data);\n    }\n    return this.container;\n  }\n}\n\nclass InkAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.title ||\n      parameters.data.contents\n    );\n    super(parameters, isRenderable, /* ignoreBorder = */ true);\n\n    this.containerClassName = \"inkAnnotation\";\n\n    // Use the polyline SVG element since it allows us to use coordinates\n    // directly and to draw both straight lines and curves.\n    this.svgElementName = \"svg:polyline\";\n  }\n\n  /**\n   * Render the ink annotation's HTML element in the empty container.\n   *\n   * @public\n   * @memberof InkAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    this.container.className = this.containerClassName;\n\n    // Create an invisible polyline with the same points that acts as the\n    // trigger for the popup.\n    const data = this.data;\n    const width = data.rect[2] - data.rect[0];\n    const height = data.rect[3] - data.rect[1];\n    const svg = this.svgFactory.create(width, height);\n\n    for (const inkList of data.inkLists) {\n      // Convert the ink list to a single points string that the SVG\n      // polyline element expects (\"x1,y1 x2,y2 ...\"). PDF coordinates are\n      // calculated from a bottom left origin, so transform the polyline\n      // coordinates to a top left origin for the SVG element.\n      let points = [];\n      for (const coordinate of inkList) {\n        const x = coordinate.x - data.rect[0];\n        const y = data.rect[3] - coordinate.y;\n        points.push(`${x},${y}`);\n      }\n      points = points.join(\" \");\n\n      const polyline = this.svgFactory.createElement(this.svgElementName);\n      polyline.setAttribute(\"points\", points);\n      // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n      // won't be possible to open/close the popup (note e.g. issue 11122).\n      polyline.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n      polyline.setAttribute(\"stroke\", \"transparent\");\n      polyline.setAttribute(\"fill\", \"none\");\n\n      // Create the popup ourselves so that we can bind it to the polyline\n      // instead of to the entire container (which is the default).\n      this._createPopup(this.container, polyline, data);\n\n      svg.appendChild(polyline);\n    }\n\n    this.container.append(svg);\n    return this.container;\n  }\n}\n\nclass HighlightAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.title ||\n      parameters.data.contents\n    );\n    super(parameters, isRenderable, /* ignoreBorder = */ true);\n  }\n\n  /**\n   * Render the highlight annotation's HTML element in the empty container.\n   *\n   * @public\n   * @memberof HighlightAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    this.container.className = \"highlightAnnotation\";\n\n    if (!this.data.hasPopup) {\n      this._createPopup(this.container, null, this.data);\n    }\n    return this.container;\n  }\n}\n\nclass UnderlineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.title ||\n      parameters.data.contents\n    );\n    super(parameters, isRenderable, /* ignoreBorder = */ true);\n  }\n\n  /**\n   * Render the underline annotation's HTML element in the empty container.\n   *\n   * @public\n   * @memberof UnderlineAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    this.container.className = \"underlineAnnotation\";\n\n    if (!this.data.hasPopup) {\n      this._createPopup(this.container, null, this.data);\n    }\n    return this.container;\n  }\n}\n\nclass SquigglyAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.title ||\n      parameters.data.contents\n    );\n    super(parameters, isRenderable, /* ignoreBorder = */ true);\n  }\n\n  /**\n   * Render the squiggly annotation's HTML element in the empty container.\n   *\n   * @public\n   * @memberof SquigglyAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    this.container.className = \"squigglyAnnotation\";\n\n    if (!this.data.hasPopup) {\n      this._createPopup(this.container, null, this.data);\n    }\n    return this.container;\n  }\n}\n\nclass StrikeOutAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.title ||\n      parameters.data.contents\n    );\n    super(parameters, isRenderable, /* ignoreBorder = */ true);\n  }\n\n  /**\n   * Render the strikeout annotation's HTML element in the empty container.\n   *\n   * @public\n   * @memberof StrikeOutAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    this.container.className = \"strikeoutAnnotation\";\n\n    if (!this.data.hasPopup) {\n      this._createPopup(this.container, null, this.data);\n    }\n    return this.container;\n  }\n}\n\nclass StampAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.title ||\n      parameters.data.contents\n    );\n    super(parameters, isRenderable, /* ignoreBorder = */ true);\n  }\n\n  /**\n   * Render the stamp annotation's HTML element in the empty container.\n   *\n   * @public\n   * @memberof StampAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    this.container.className = \"stampAnnotation\";\n\n    if (!this.data.hasPopup) {\n      this._createPopup(this.container, null, this.data);\n    }\n    return this.container;\n  }\n}\n\nclass FileAttachmentAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, /* isRenderable = */ true);\n\n    const { filename, content } = this.data.file;\n    this.filename = getFilenameFromUrl(filename);\n    this.content = content;\n\n    if (this.linkService.eventBus) {\n      this.linkService.eventBus.dispatch(\"fileattachmentannotation\", {\n        source: this,\n        id: stringToPDFString(filename),\n        filename,\n        content,\n      });\n    }\n  }\n\n  /**\n   * Render the file attachment annotation's HTML element in the empty\n   * container.\n   *\n   * @public\n   * @memberof FileAttachmentAnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  render() {\n    this.container.className = \"fileAttachmentAnnotation\";\n\n    const trigger = document.createElement(\"div\");\n    trigger.style.height = this.container.style.height;\n    trigger.style.width = this.container.style.width;\n    trigger.addEventListener(\"dblclick\", this._download.bind(this));\n\n    if (!this.data.hasPopup && (this.data.title || this.data.contents)) {\n      this._createPopup(this.container, trigger, this.data);\n    }\n\n    this.container.appendChild(trigger);\n    return this.container;\n  }\n\n  /**\n   * Download the file attachment associated with this annotation.\n   *\n   * @private\n   * @memberof FileAttachmentAnnotationElement\n   */\n  _download() {\n    if (!this.downloadManager) {\n      warn(\"Download cannot be started due to unavailable download manager\");\n      return;\n    }\n    this.downloadManager.downloadData(this.content, this.filename, \"\");\n  }\n}\n\n/**\n * @typedef {Object} AnnotationLayerParameters\n * @property {PageViewport} viewport\n * @property {HTMLDivElement} div\n * @property {Array} annotations\n * @property {PDFPage} page\n * @property {IPDFLinkService} linkService\n * @property {DownloadManager} downloadManager\n * @property {string} [imageResourcesPath] - Path for image resources, mainly\n *   for annotation icons. Include trailing slash.\n * @property {boolean} renderInteractiveForms\n */\n\nclass AnnotationLayer {\n  /**\n   * Render a new annotation layer with all annotation elements.\n   *\n   * @public\n   * @param {AnnotationLayerParameters} parameters\n   * @memberof AnnotationLayer\n   */\n  static render(parameters) {\n    const sortedAnnotations = [],\n      popupAnnotations = [];\n    // Ensure that Popup annotations are handled last, since they're dependant\n    // upon the parent annotation having already been rendered (please refer to\n    // the `PopupAnnotationElement.render` method); fixes issue 11362.\n    for (const data of parameters.annotations) {\n      if (!data) {\n        continue;\n      }\n      if (data.annotationType === AnnotationType.POPUP) {\n        popupAnnotations.push(data);\n        continue;\n      }\n      sortedAnnotations.push(data);\n    }\n    if (popupAnnotations.length) {\n      sortedAnnotations.push(...popupAnnotations);\n    }\n\n    for (const data of sortedAnnotations) {\n      const element = AnnotationElementFactory.create({\n        data,\n        layer: parameters.div,\n        page: parameters.page,\n        viewport: parameters.viewport,\n        linkService: parameters.linkService,\n        downloadManager: parameters.downloadManager,\n        imageResourcesPath: parameters.imageResourcesPath || \"\",\n        renderInteractiveForms:\n          typeof parameters.renderInteractiveForms === \"boolean\"\n            ? parameters.renderInteractiveForms\n            : true,\n        svgFactory: new DOMSVGFactory(),\n        annotationStorage:\n          parameters.annotationStorage || new AnnotationStorage(),\n      });\n      if (element.isRenderable) {\n        parameters.div.appendChild(element.render());\n      }\n    }\n  }\n\n  /**\n   * Update the annotation elements on existing annotation layer.\n   *\n   * @public\n   * @param {AnnotationLayerParameters} parameters\n   * @memberof AnnotationLayer\n   */\n  static update(parameters) {\n    for (const data of parameters.annotations) {\n      const element = parameters.div.querySelector(\n        `[data-annotation-id=\"${data.id}\"]`\n      );\n      if (element) {\n        element.style.transform = `matrix(${parameters.viewport.transform.join(\n          \",\"\n        )})`;\n      }\n    }\n    parameters.div.removeAttribute(\"hidden\");\n  }\n}\n\nexport { AnnotationLayer };\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AbortException,\n  createPromiseCapability,\n  Util,\n} from \"../shared/util.js\";\n\n/**\n * Text layer render parameters.\n *\n * @typedef {Object} TextLayerRenderParameters\n * @property {import(\"./api\").TextContent} [textContent] - Text content to\n *   render (the object is returned by the page's `getTextContent` method).\n * @property {ReadableStream} [textContentStream] - Text content stream to\n *   render (the stream is returned by the page's `streamTextContent` method).\n * @property {HTMLElement} container - HTML element that will contain text runs.\n * @property {import(\"./display_utils\").PageViewport} viewport - The target\n *   viewport to properly layout the text runs.\n * @property {Array<HTMLElement>} [textDivs] - HTML elements that are correspond\n *   to the text items of the textContent input. This is output and shall be\n *   initially be set to empty array.\n * @property {Array<string>} [textContentItemsStr] - Strings that correspond to\n *    the `str` property of the text items of textContent input. This is output\n *   and shall be initially be set to empty array.\n * @property {number} [timeout] - Delay in milliseconds before rendering of the\n *   text runs occurs.\n * @property {boolean} [enhanceTextSelection] - Whether to turn on the text\n *   selection enhancement.\n */\n\n/**\n * @typedef {Object} TextLayerRenderTask\n * @property {Promise<void>} promise\n * @property {() => void} cancel\n * @property {(expandDivs: boolean) => void} expandTextDivs\n */\n\n/**\n * @type {(renderParameters: TextLayerRenderParameters) => TextLayerRenderTask}\n */\nvar renderTextLayer = (function renderTextLayerClosure() {\n  var MAX_TEXT_DIVS_TO_RENDER = 100000;\n\n  var NonWhitespaceRegexp = /\\S/;\n\n  function isAllWhitespace(str) {\n    return !NonWhitespaceRegexp.test(str);\n  }\n\n  function appendText(task, geom, styles) {\n    // Initialize all used properties to keep the caches monomorphic.\n    var textDiv = document.createElement(\"span\");\n    var textDivProperties = {\n      angle: 0,\n      canvasWidth: 0,\n      isWhitespace: false,\n      originalTransform: null,\n      paddingBottom: 0,\n      paddingLeft: 0,\n      paddingRight: 0,\n      paddingTop: 0,\n      scale: 1,\n    };\n\n    task._textDivs.push(textDiv);\n    if (isAllWhitespace(geom.str)) {\n      textDivProperties.isWhitespace = true;\n      task._textDivProperties.set(textDiv, textDivProperties);\n      return;\n    }\n\n    var tx = Util.transform(task._viewport.transform, geom.transform);\n    var angle = Math.atan2(tx[1], tx[0]);\n    var style = styles[geom.fontName];\n    if (style.vertical) {\n      angle += Math.PI / 2;\n    }\n    var fontHeight = Math.sqrt(tx[2] * tx[2] + tx[3] * tx[3]);\n    var fontAscent = fontHeight;\n    if (style.ascent) {\n      fontAscent = style.ascent * fontAscent;\n    } else if (style.descent) {\n      fontAscent = (1 + style.descent) * fontAscent;\n    }\n\n    let left, top;\n    if (angle === 0) {\n      left = tx[4];\n      top = tx[5] - fontAscent;\n    } else {\n      left = tx[4] + fontAscent * Math.sin(angle);\n      top = tx[5] - fontAscent * Math.cos(angle);\n    }\n    // Setting the style properties individually, rather than all at once,\n    // should be OK since the `textDiv` isn't appended to the document yet.\n    textDiv.style.left = `${left}px`;\n    textDiv.style.top = `${top}px`;\n    textDiv.style.fontSize = `${fontHeight}px`;\n    textDiv.style.fontFamily = style.fontFamily;\n\n    textDiv.textContent = geom.str;\n    // `fontName` is only used by the FontInspector, and we only use `dataset`\n    // here to make the font name available in the debugger.\n    if (task._fontInspectorEnabled) {\n      textDiv.dataset.fontName = geom.fontName;\n    }\n    if (angle !== 0) {\n      textDivProperties.angle = angle * (180 / Math.PI);\n    }\n    // We don't bother scaling single-char text divs, because it has very\n    // little effect on text highlighting. This makes scrolling on docs with\n    // lots of such divs a lot faster.\n    let shouldScaleText = false;\n    if (geom.str.length > 1) {\n      shouldScaleText = true;\n    } else if (geom.transform[0] !== geom.transform[3]) {\n      const absScaleX = Math.abs(geom.transform[0]),\n        absScaleY = Math.abs(geom.transform[3]);\n      // When the horizontal/vertical scaling differs significantly, also scale\n      // even single-char text to improve highlighting (fixes issue11713.pdf).\n      if (\n        absScaleX !== absScaleY &&\n        Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5\n      ) {\n        shouldScaleText = true;\n      }\n    }\n    if (shouldScaleText) {\n      if (style.vertical) {\n        textDivProperties.canvasWidth = geom.height * task._viewport.scale;\n      } else {\n        textDivProperties.canvasWidth = geom.width * task._viewport.scale;\n      }\n    }\n    task._textDivProperties.set(textDiv, textDivProperties);\n    if (task._textContentStream) {\n      task._layoutText(textDiv);\n    }\n\n    if (task._enhanceTextSelection) {\n      var angleCos = 1,\n        angleSin = 0;\n      if (angle !== 0) {\n        angleCos = Math.cos(angle);\n        angleSin = Math.sin(angle);\n      }\n      var divWidth =\n        (style.vertical ? geom.height : geom.width) * task._viewport.scale;\n      var divHeight = fontHeight;\n\n      var m, b;\n      if (angle !== 0) {\n        m = [angleCos, angleSin, -angleSin, angleCos, left, top];\n        b = Util.getAxialAlignedBoundingBox([0, 0, divWidth, divHeight], m);\n      } else {\n        b = [left, top, left + divWidth, top + divHeight];\n      }\n\n      task._bounds.push({\n        left: b[0],\n        top: b[1],\n        right: b[2],\n        bottom: b[3],\n        div: textDiv,\n        size: [divWidth, divHeight],\n        m,\n      });\n    }\n  }\n\n  function render(task) {\n    if (task._canceled) {\n      return;\n    }\n    var textDivs = task._textDivs;\n    var capability = task._capability;\n    var textDivsLength = textDivs.length;\n\n    // No point in rendering many divs as it would make the browser\n    // unusable even after the divs are rendered.\n    if (textDivsLength > MAX_TEXT_DIVS_TO_RENDER) {\n      task._renderingDone = true;\n      capability.resolve();\n      return;\n    }\n\n    if (!task._textContentStream) {\n      for (var i = 0; i < textDivsLength; i++) {\n        task._layoutText(textDivs[i]);\n      }\n    }\n\n    task._renderingDone = true;\n    capability.resolve();\n  }\n\n  function findPositiveMin(ts, offset, count) {\n    let result = 0;\n    for (let i = 0; i < count; i++) {\n      const t = ts[offset++];\n      if (t > 0) {\n        result = result ? Math.min(t, result) : t;\n      }\n    }\n    return result;\n  }\n\n  function expand(task) {\n    var bounds = task._bounds;\n    var viewport = task._viewport;\n\n    var expanded = expandBounds(viewport.width, viewport.height, bounds);\n    for (var i = 0; i < expanded.length; i++) {\n      var div = bounds[i].div;\n      var divProperties = task._textDivProperties.get(div);\n      if (divProperties.angle === 0) {\n        divProperties.paddingLeft = bounds[i].left - expanded[i].left;\n        divProperties.paddingTop = bounds[i].top - expanded[i].top;\n        divProperties.paddingRight = expanded[i].right - bounds[i].right;\n        divProperties.paddingBottom = expanded[i].bottom - bounds[i].bottom;\n        task._textDivProperties.set(div, divProperties);\n        continue;\n      }\n      // Box is rotated -- trying to find padding so rotated div will not\n      // exceed its expanded bounds.\n      var e = expanded[i],\n        b = bounds[i];\n      var m = b.m,\n        c = m[0],\n        s = m[1];\n      // Finding intersections with expanded box.\n      var points = [[0, 0], [0, b.size[1]], [b.size[0], 0], b.size];\n      var ts = new Float64Array(64);\n      points.forEach(function (p, j) {\n        var t = Util.applyTransform(p, m);\n        ts[j + 0] = c && (e.left - t[0]) / c;\n        ts[j + 4] = s && (e.top - t[1]) / s;\n        ts[j + 8] = c && (e.right - t[0]) / c;\n        ts[j + 12] = s && (e.bottom - t[1]) / s;\n\n        ts[j + 16] = s && (e.left - t[0]) / -s;\n        ts[j + 20] = c && (e.top - t[1]) / c;\n        ts[j + 24] = s && (e.right - t[0]) / -s;\n        ts[j + 28] = c && (e.bottom - t[1]) / c;\n\n        ts[j + 32] = c && (e.left - t[0]) / -c;\n        ts[j + 36] = s && (e.top - t[1]) / -s;\n        ts[j + 40] = c && (e.right - t[0]) / -c;\n        ts[j + 44] = s && (e.bottom - t[1]) / -s;\n\n        ts[j + 48] = s && (e.left - t[0]) / s;\n        ts[j + 52] = c && (e.top - t[1]) / -c;\n        ts[j + 56] = s && (e.right - t[0]) / s;\n        ts[j + 60] = c && (e.bottom - t[1]) / -c;\n      });\n      // Not based on math, but to simplify calculations, using cos and sin\n      // absolute values to not exceed the box (it can but insignificantly).\n      var boxScale = 1 + Math.min(Math.abs(c), Math.abs(s));\n      divProperties.paddingLeft = findPositiveMin(ts, 32, 16) / boxScale;\n      divProperties.paddingTop = findPositiveMin(ts, 48, 16) / boxScale;\n      divProperties.paddingRight = findPositiveMin(ts, 0, 16) / boxScale;\n      divProperties.paddingBottom = findPositiveMin(ts, 16, 16) / boxScale;\n      task._textDivProperties.set(div, divProperties);\n    }\n  }\n\n  function expandBounds(width, height, boxes) {\n    var bounds = boxes.map(function (box, i) {\n      return {\n        x1: box.left,\n        y1: box.top,\n        x2: box.right,\n        y2: box.bottom,\n        index: i,\n        x1New: undefined,\n        x2New: undefined,\n      };\n    });\n    expandBoundsLTR(width, bounds);\n    var expanded = new Array(boxes.length);\n    bounds.forEach(function (b) {\n      var i = b.index;\n      expanded[i] = {\n        left: b.x1New,\n        top: 0,\n        right: b.x2New,\n        bottom: 0,\n      };\n    });\n\n    // Rotating on 90 degrees and extending extended boxes. Reusing the bounds\n    // array and objects.\n    boxes.map(function (box, i) {\n      var e = expanded[i],\n        b = bounds[i];\n      b.x1 = box.top;\n      b.y1 = width - e.right;\n      b.x2 = box.bottom;\n      b.y2 = width - e.left;\n      b.index = i;\n      b.x1New = undefined;\n      b.x2New = undefined;\n    });\n    expandBoundsLTR(height, bounds);\n\n    bounds.forEach(function (b) {\n      var i = b.index;\n      expanded[i].top = b.x1New;\n      expanded[i].bottom = b.x2New;\n    });\n    return expanded;\n  }\n\n  function expandBoundsLTR(width, bounds) {\n    // Sorting by x1 coordinate and walk by the bounds in the same order.\n    bounds.sort(function (a, b) {\n      return a.x1 - b.x1 || a.index - b.index;\n    });\n\n    // First we see on the horizon is a fake boundary.\n    var fakeBoundary = {\n      x1: -Infinity,\n      y1: -Infinity,\n      x2: 0,\n      y2: Infinity,\n      index: -1,\n      x1New: 0,\n      x2New: 0,\n    };\n    var horizon = [\n      {\n        start: -Infinity,\n        end: Infinity,\n        boundary: fakeBoundary,\n      },\n    ];\n\n    bounds.forEach(function (boundary) {\n      // Searching for the affected part of horizon.\n      // TODO red-black tree or simple binary search\n      var i = 0;\n      while (i < horizon.length && horizon[i].end <= boundary.y1) {\n        i++;\n      }\n      var j = horizon.length - 1;\n      while (j >= 0 && horizon[j].start >= boundary.y2) {\n        j--;\n      }\n\n      var horizonPart, affectedBoundary;\n      var q,\n        k,\n        maxXNew = -Infinity;\n      for (q = i; q <= j; q++) {\n        horizonPart = horizon[q];\n        affectedBoundary = horizonPart.boundary;\n        var xNew;\n        if (affectedBoundary.x2 > boundary.x1) {\n          // In the middle of the previous element, new x shall be at the\n          // boundary start. Extending if further if the affected boundary\n          // placed on top of the current one.\n          xNew =\n            affectedBoundary.index > boundary.index\n              ? affectedBoundary.x1New\n              : boundary.x1;\n        } else if (affectedBoundary.x2New === undefined) {\n          // We have some space in between, new x in middle will be a fair\n          // choice.\n          xNew = (affectedBoundary.x2 + boundary.x1) / 2;\n        } else {\n          // Affected boundary has x2new set, using it as new x.\n          xNew = affectedBoundary.x2New;\n        }\n        if (xNew > maxXNew) {\n          maxXNew = xNew;\n        }\n      }\n\n      // Set new x1 for current boundary.\n      boundary.x1New = maxXNew;\n\n      // Adjusts new x2 for the affected boundaries.\n      for (q = i; q <= j; q++) {\n        horizonPart = horizon[q];\n        affectedBoundary = horizonPart.boundary;\n        if (affectedBoundary.x2New === undefined) {\n          // Was not set yet, choosing new x if possible.\n          if (affectedBoundary.x2 > boundary.x1) {\n            // Current and affected boundaries intersect. If affected boundary\n            // is placed on top of the current, shrinking the affected.\n            if (affectedBoundary.index > boundary.index) {\n              affectedBoundary.x2New = affectedBoundary.x2;\n            }\n          } else {\n            affectedBoundary.x2New = maxXNew;\n          }\n        } else if (affectedBoundary.x2New > maxXNew) {\n          // Affected boundary is touching new x, pushing it back.\n          affectedBoundary.x2New = Math.max(maxXNew, affectedBoundary.x2);\n        }\n      }\n\n      // Fixing the horizon.\n      var changedHorizon = [],\n        lastBoundary = null;\n      for (q = i; q <= j; q++) {\n        horizonPart = horizon[q];\n        affectedBoundary = horizonPart.boundary;\n        // Checking which boundary will be visible.\n        var useBoundary =\n          affectedBoundary.x2 > boundary.x2 ? affectedBoundary : boundary;\n        if (lastBoundary === useBoundary) {\n          // Merging with previous.\n          changedHorizon[changedHorizon.length - 1].end = horizonPart.end;\n        } else {\n          changedHorizon.push({\n            start: horizonPart.start,\n            end: horizonPart.end,\n            boundary: useBoundary,\n          });\n          lastBoundary = useBoundary;\n        }\n      }\n      if (horizon[i].start < boundary.y1) {\n        changedHorizon[0].start = boundary.y1;\n        changedHorizon.unshift({\n          start: horizon[i].start,\n          end: boundary.y1,\n          boundary: horizon[i].boundary,\n        });\n      }\n      if (boundary.y2 < horizon[j].end) {\n        changedHorizon[changedHorizon.length - 1].end = boundary.y2;\n        changedHorizon.push({\n          start: boundary.y2,\n          end: horizon[j].end,\n          boundary: horizon[j].boundary,\n        });\n      }\n\n      // Set x2 new of boundary that is no longer visible (see overlapping case\n      // above).\n      // TODO more efficient, e.g. via reference counting.\n      for (q = i; q <= j; q++) {\n        horizonPart = horizon[q];\n        affectedBoundary = horizonPart.boundary;\n        if (affectedBoundary.x2New !== undefined) {\n          continue;\n        }\n        var used = false;\n        for (\n          k = i - 1;\n          !used && k >= 0 && horizon[k].start >= affectedBoundary.y1;\n          k--\n        ) {\n          used = horizon[k].boundary === affectedBoundary;\n        }\n        for (\n          k = j + 1;\n          !used && k < horizon.length && horizon[k].end <= affectedBoundary.y2;\n          k++\n        ) {\n          used = horizon[k].boundary === affectedBoundary;\n        }\n        for (k = 0; !used && k < changedHorizon.length; k++) {\n          used = changedHorizon[k].boundary === affectedBoundary;\n        }\n        if (!used) {\n          affectedBoundary.x2New = maxXNew;\n        }\n      }\n\n      Array.prototype.splice.apply(\n        horizon,\n        [i, j - i + 1].concat(changedHorizon)\n      );\n    });\n\n    // Set new x2 for all unset boundaries.\n    horizon.forEach(function (horizonPart) {\n      var affectedBoundary = horizonPart.boundary;\n      if (affectedBoundary.x2New === undefined) {\n        affectedBoundary.x2New = Math.max(width, affectedBoundary.x2);\n      }\n    });\n  }\n\n  /**\n   * Text layer rendering task.\n   *\n   * @param {TextContent} textContent\n   * @param {HTMLElement} container\n   * @param {PageViewport} viewport\n   * @param {Array} textDivs\n   * @param {boolean} enhanceTextSelection\n   * @private\n   */\n  function TextLayerRenderTask({\n    textContent,\n    textContentStream,\n    container,\n    viewport,\n    textDivs,\n    textContentItemsStr,\n    enhanceTextSelection,\n  }) {\n    this._textContent = textContent;\n    this._textContentStream = textContentStream;\n    this._container = container;\n    this._document = container.ownerDocument;\n    this._viewport = viewport;\n    this._textDivs = textDivs || [];\n    this._textContentItemsStr = textContentItemsStr || [];\n    this._enhanceTextSelection = !!enhanceTextSelection;\n    this._fontInspectorEnabled = !!(\n      globalThis.FontInspector && globalThis.FontInspector.enabled\n    );\n\n    this._reader = null;\n    this._layoutTextLastFontSize = null;\n    this._layoutTextLastFontFamily = null;\n    this._layoutTextCtx = null;\n    this._textDivProperties = new WeakMap();\n    this._renderingDone = false;\n    this._canceled = false;\n    this._capability = createPromiseCapability();\n    this._renderTimer = null;\n    this._bounds = [];\n\n    // Always clean-up the temporary canvas once rendering is no longer pending.\n    this._capability.promise\n      .finally(() => {\n        if (this._layoutTextCtx) {\n          // Zeroing the width and height cause Firefox to release graphics\n          // resources immediately, which can greatly reduce memory consumption.\n          this._layoutTextCtx.canvas.width = 0;\n          this._layoutTextCtx.canvas.height = 0;\n          this._layoutTextCtx = null;\n        }\n      })\n      .catch(() => {\n        /* Avoid \"Uncaught promise\" messages in the console. */\n      });\n  }\n  TextLayerRenderTask.prototype = {\n    get promise() {\n      return this._capability.promise;\n    },\n\n    cancel: function TextLayer_cancel() {\n      this._canceled = true;\n      if (this._reader) {\n        this._reader.cancel(new AbortException(\"TextLayer task cancelled.\"));\n        this._reader = null;\n      }\n      if (this._renderTimer !== null) {\n        clearTimeout(this._renderTimer);\n        this._renderTimer = null;\n      }\n      this._capability.reject(new Error(\"TextLayer task cancelled.\"));\n    },\n\n    _processItems(items, styleCache) {\n      for (let i = 0, len = items.length; i < len; i++) {\n        this._textContentItemsStr.push(items[i].str);\n        appendText(this, items[i], styleCache);\n      }\n    },\n\n    _layoutText(textDiv) {\n      const textDivProperties = this._textDivProperties.get(textDiv);\n      if (textDivProperties.isWhitespace) {\n        return;\n      }\n\n      let transform = \"\";\n      if (textDivProperties.canvasWidth !== 0) {\n        const { fontSize, fontFamily } = textDiv.style;\n\n        // Only build font string and set to context if different from last.\n        if (\n          fontSize !== this._layoutTextLastFontSize ||\n          fontFamily !== this._layoutTextLastFontFamily\n        ) {\n          this._layoutTextCtx.font = `${fontSize} ${fontFamily}`;\n          this._layoutTextLastFontSize = fontSize;\n          this._layoutTextLastFontFamily = fontFamily;\n        }\n        // Only measure the width for multi-char text divs, see `appendText`.\n        const { width } = this._layoutTextCtx.measureText(textDiv.textContent);\n\n        if (width > 0) {\n          textDivProperties.scale = textDivProperties.canvasWidth / width;\n          transform = `scaleX(${textDivProperties.scale})`;\n        }\n      }\n      if (textDivProperties.angle !== 0) {\n        transform = `rotate(${textDivProperties.angle}deg) ${transform}`;\n      }\n      if (transform.length > 0) {\n        if (this._enhanceTextSelection) {\n          textDivProperties.originalTransform = transform;\n        }\n        textDiv.style.transform = transform;\n      }\n      this._textDivProperties.set(textDiv, textDivProperties);\n      this._container.appendChild(textDiv);\n    },\n\n    _render: function TextLayer_render(timeout) {\n      const capability = createPromiseCapability();\n      let styleCache = Object.create(null);\n\n      // The temporary canvas is used to measure text length in the DOM.\n      const canvas = this._document.createElement(\"canvas\");\n      if (\n        typeof PDFJSDev === \"undefined\" ||\n        PDFJSDev.test(\"MOZCENTRAL || GENERIC\")\n      ) {\n        canvas.mozOpaque = true;\n      }\n      this._layoutTextCtx = canvas.getContext(\"2d\", { alpha: false });\n\n      if (this._textContent) {\n        const textItems = this._textContent.items;\n        const textStyles = this._textContent.styles;\n        this._processItems(textItems, textStyles);\n        capability.resolve();\n      } else if (this._textContentStream) {\n        const pump = () => {\n          this._reader.read().then(({ value, done }) => {\n            if (done) {\n              capability.resolve();\n              return;\n            }\n\n            Object.assign(styleCache, value.styles);\n            this._processItems(value.items, styleCache);\n            pump();\n          }, capability.reject);\n        };\n\n        this._reader = this._textContentStream.getReader();\n        pump();\n      } else {\n        throw new Error(\n          'Neither \"textContent\" nor \"textContentStream\"' +\n            \" parameters specified.\"\n        );\n      }\n\n      capability.promise.then(() => {\n        styleCache = null;\n        if (!timeout) {\n          // Render right away\n          render(this);\n        } else {\n          // Schedule\n          this._renderTimer = setTimeout(() => {\n            render(this);\n            this._renderTimer = null;\n          }, timeout);\n        }\n      }, this._capability.reject);\n    },\n\n    expandTextDivs: function TextLayer_expandTextDivs(expandDivs) {\n      if (!this._enhanceTextSelection || !this._renderingDone) {\n        return;\n      }\n      if (this._bounds !== null) {\n        expand(this);\n        this._bounds = null;\n      }\n      const transformBuf = [],\n        paddingBuf = [];\n\n      for (var i = 0, ii = this._textDivs.length; i < ii; i++) {\n        const div = this._textDivs[i];\n        const divProps = this._textDivProperties.get(div);\n\n        if (divProps.isWhitespace) {\n          continue;\n        }\n        if (expandDivs) {\n          transformBuf.length = 0;\n          paddingBuf.length = 0;\n\n          if (divProps.originalTransform) {\n            transformBuf.push(divProps.originalTransform);\n          }\n          if (divProps.paddingTop > 0) {\n            paddingBuf.push(`${divProps.paddingTop}px`);\n            transformBuf.push(`translateY(${-divProps.paddingTop}px)`);\n          } else {\n            paddingBuf.push(0);\n          }\n          if (divProps.paddingRight > 0) {\n            paddingBuf.push(`${divProps.paddingRight / divProps.scale}px`);\n          } else {\n            paddingBuf.push(0);\n          }\n          if (divProps.paddingBottom > 0) {\n            paddingBuf.push(`${divProps.paddingBottom}px`);\n          } else {\n            paddingBuf.push(0);\n          }\n          if (divProps.paddingLeft > 0) {\n            paddingBuf.push(`${divProps.paddingLeft / divProps.scale}px`);\n            transformBuf.push(\n              `translateX(${-divProps.paddingLeft / divProps.scale}px)`\n            );\n          } else {\n            paddingBuf.push(0);\n          }\n\n          div.style.padding = paddingBuf.join(\" \");\n          if (transformBuf.length) {\n            div.style.transform = transformBuf.join(\" \");\n          }\n        } else {\n          div.style.padding = null;\n          div.style.transform = divProps.originalTransform;\n        }\n      }\n    },\n  };\n\n  // eslint-disable-next-line no-shadow\n  function renderTextLayer(renderParameters) {\n    var task = new TextLayerRenderTask({\n      textContent: renderParameters.textContent,\n      textContentStream: renderParameters.textContentStream,\n      container: renderParameters.container,\n      viewport: renderParameters.viewport,\n      textDivs: renderParameters.textDivs,\n      textContentItemsStr: renderParameters.textContentItemsStr,\n      enhanceTextSelection: renderParameters.enhanceTextSelection,\n    });\n    task._render(renderParameters.timeout);\n    return task;\n  }\n\n  return renderTextLayer;\n})();\n\nexport { renderTextLayer };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals __non_webpack_require__ */\n/* eslint no-var: error */\n\nimport {\n  createObjectURL,\n  FONT_IDENTITY_MATRIX,\n  IDENTITY_MATRIX,\n  ImageKind,\n  isNum,\n  OPS,\n  TextRenderingMode,\n  Util,\n  warn,\n} from \"../shared/util.js\";\nimport { DOMSVGFactory } from \"./display_utils.js\";\nimport { isNodeJS } from \"../shared/is_node.js\";\n\n/** @type {any} */\nlet SVGGraphics = function () {\n  throw new Error(\"Not implemented: SVGGraphics\");\n};\n\nif (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) {\n  const SVG_DEFAULTS = {\n    fontStyle: \"normal\",\n    fontWeight: \"normal\",\n    fillColor: \"#000000\",\n  };\n  const XML_NS = \"http://www.w3.org/XML/1998/namespace\";\n  const XLINK_NS = \"http://www.w3.org/1999/xlink\";\n  const LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\n  const LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\n\n  const convertImgDataToPng = (function () {\n    const PNG_HEADER = new Uint8Array([\n      0x89,\n      0x50,\n      0x4e,\n      0x47,\n      0x0d,\n      0x0a,\n      0x1a,\n      0x0a,\n    ]);\n    const CHUNK_WRAPPER_SIZE = 12;\n\n    const crcTable = new Int32Array(256);\n    for (let i = 0; i < 256; i++) {\n      let c = i;\n      for (let h = 0; h < 8; h++) {\n        if (c & 1) {\n          c = 0xedb88320 ^ ((c >> 1) & 0x7fffffff);\n        } else {\n          c = (c >> 1) & 0x7fffffff;\n        }\n      }\n      crcTable[i] = c;\n    }\n\n    function crc32(data, start, end) {\n      let crc = -1;\n      for (let i = start; i < end; i++) {\n        const a = (crc ^ data[i]) & 0xff;\n        const b = crcTable[a];\n        crc = (crc >>> 8) ^ b;\n      }\n      return crc ^ -1;\n    }\n\n    function writePngChunk(type, body, data, offset) {\n      let p = offset;\n      const len = body.length;\n\n      data[p] = (len >> 24) & 0xff;\n      data[p + 1] = (len >> 16) & 0xff;\n      data[p + 2] = (len >> 8) & 0xff;\n      data[p + 3] = len & 0xff;\n      p += 4;\n\n      data[p] = type.charCodeAt(0) & 0xff;\n      data[p + 1] = type.charCodeAt(1) & 0xff;\n      data[p + 2] = type.charCodeAt(2) & 0xff;\n      data[p + 3] = type.charCodeAt(3) & 0xff;\n      p += 4;\n\n      data.set(body, p);\n      p += body.length;\n\n      const crc = crc32(data, offset + 4, p);\n      data[p] = (crc >> 24) & 0xff;\n      data[p + 1] = (crc >> 16) & 0xff;\n      data[p + 2] = (crc >> 8) & 0xff;\n      data[p + 3] = crc & 0xff;\n    }\n\n    function adler32(data, start, end) {\n      let a = 1;\n      let b = 0;\n      for (let i = start; i < end; ++i) {\n        a = (a + (data[i] & 0xff)) % 65521;\n        b = (b + a) % 65521;\n      }\n      return (b << 16) | a;\n    }\n\n    /**\n     * @param {Uint8Array} literals The input data.\n     * @returns {Uint8Array} The DEFLATE-compressed data stream in zlib format.\n     *   This is the required format for compressed streams in the PNG format:\n     *   http://www.libpng.org/pub/png/spec/1.2/PNG-Compression.html\n     */\n    function deflateSync(literals) {\n      if (!isNodeJS) {\n        // zlib is certainly not available outside of Node.js. We can either use\n        // the pako library for client-side DEFLATE compression, or use the\n        // canvas API of the browser to obtain a more optimal PNG file.\n        return deflateSyncUncompressed(literals);\n      }\n      try {\n        // NOTE: This implementation is far from perfect, but already way better\n        // than not applying any compression.\n        //\n        // A better algorithm will try to choose a good predictor/filter and\n        // then choose a suitable zlib compression strategy (e.g. 3,Z_RLE).\n        //\n        // Node v0.11.12 zlib.deflateSync is introduced (and returns a Buffer).\n        // Node v3.0.0   Buffer inherits from Uint8Array.\n        // Node v8.0.0   zlib.deflateSync accepts Uint8Array as input.\n        let input;\n        // eslint-disable-next-line no-undef\n        if (parseInt(process.versions.node) >= 8) {\n          input = literals;\n        } else {\n          // eslint-disable-next-line no-undef\n          input = Buffer.from(literals);\n        }\n        const output = __non_webpack_require__(\"zlib\").deflateSync(input, {\n          level: 9,\n        });\n        return output instanceof Uint8Array ? output : new Uint8Array(output);\n      } catch (e) {\n        warn(\n          \"Not compressing PNG because zlib.deflateSync is unavailable: \" + e\n        );\n      }\n\n      return deflateSyncUncompressed(literals);\n    }\n\n    // An implementation of DEFLATE with compression level 0 (Z_NO_COMPRESSION).\n    function deflateSyncUncompressed(literals) {\n      let len = literals.length;\n      const maxBlockLength = 0xffff;\n\n      const deflateBlocks = Math.ceil(len / maxBlockLength);\n      const idat = new Uint8Array(2 + len + deflateBlocks * 5 + 4);\n      let pi = 0;\n      idat[pi++] = 0x78; // compression method and flags\n      idat[pi++] = 0x9c; // flags\n\n      let pos = 0;\n      while (len > maxBlockLength) {\n        // writing non-final DEFLATE blocks type 0 and length of 65535\n        idat[pi++] = 0x00;\n        idat[pi++] = 0xff;\n        idat[pi++] = 0xff;\n        idat[pi++] = 0x00;\n        idat[pi++] = 0x00;\n        idat.set(literals.subarray(pos, pos + maxBlockLength), pi);\n        pi += maxBlockLength;\n        pos += maxBlockLength;\n        len -= maxBlockLength;\n      }\n\n      // writing non-final DEFLATE blocks type 0\n      idat[pi++] = 0x01;\n      idat[pi++] = len & 0xff;\n      idat[pi++] = (len >> 8) & 0xff;\n      idat[pi++] = ~len & 0xffff & 0xff;\n      idat[pi++] = ((~len & 0xffff) >> 8) & 0xff;\n      idat.set(literals.subarray(pos), pi);\n      pi += literals.length - pos;\n\n      const adler = adler32(literals, 0, literals.length); // checksum\n      idat[pi++] = (adler >> 24) & 0xff;\n      idat[pi++] = (adler >> 16) & 0xff;\n      idat[pi++] = (adler >> 8) & 0xff;\n      idat[pi++] = adler & 0xff;\n      return idat;\n    }\n\n    function encode(imgData, kind, forceDataSchema, isMask) {\n      const width = imgData.width;\n      const height = imgData.height;\n      let bitDepth, colorType, lineSize;\n      const bytes = imgData.data;\n\n      switch (kind) {\n        case ImageKind.GRAYSCALE_1BPP:\n          colorType = 0;\n          bitDepth = 1;\n          lineSize = (width + 7) >> 3;\n          break;\n        case ImageKind.RGB_24BPP:\n          colorType = 2;\n          bitDepth = 8;\n          lineSize = width * 3;\n          break;\n        case ImageKind.RGBA_32BPP:\n          colorType = 6;\n          bitDepth = 8;\n          lineSize = width * 4;\n          break;\n        default:\n          throw new Error(\"invalid format\");\n      }\n\n      // prefix every row with predictor 0\n      const literals = new Uint8Array((1 + lineSize) * height);\n      let offsetLiterals = 0,\n        offsetBytes = 0;\n      for (let y = 0; y < height; ++y) {\n        literals[offsetLiterals++] = 0; // no prediction\n        literals.set(\n          bytes.subarray(offsetBytes, offsetBytes + lineSize),\n          offsetLiterals\n        );\n        offsetBytes += lineSize;\n        offsetLiterals += lineSize;\n      }\n\n      if (kind === ImageKind.GRAYSCALE_1BPP && isMask) {\n        // inverting for image masks\n        offsetLiterals = 0;\n        for (let y = 0; y < height; y++) {\n          offsetLiterals++; // skipping predictor\n          for (let i = 0; i < lineSize; i++) {\n            literals[offsetLiterals++] ^= 0xff;\n          }\n        }\n      }\n\n      const ihdr = new Uint8Array([\n        (width >> 24) & 0xff,\n        (width >> 16) & 0xff,\n        (width >> 8) & 0xff,\n        width & 0xff,\n        (height >> 24) & 0xff,\n        (height >> 16) & 0xff,\n        (height >> 8) & 0xff,\n        height & 0xff,\n        bitDepth, // bit depth\n        colorType, // color type\n        0x00, // compression method\n        0x00, // filter method\n        0x00, // interlace method\n      ]);\n      const idat = deflateSync(literals);\n\n      // PNG consists of: header, IHDR+data, IDAT+data, and IEND.\n      const pngLength =\n        PNG_HEADER.length + CHUNK_WRAPPER_SIZE * 3 + ihdr.length + idat.length;\n      const data = new Uint8Array(pngLength);\n      let offset = 0;\n      data.set(PNG_HEADER, offset);\n      offset += PNG_HEADER.length;\n      writePngChunk(\"IHDR\", ihdr, data, offset);\n      offset += CHUNK_WRAPPER_SIZE + ihdr.length;\n      writePngChunk(\"IDATA\", idat, data, offset);\n      offset += CHUNK_WRAPPER_SIZE + idat.length;\n      writePngChunk(\"IEND\", new Uint8Array(0), data, offset);\n\n      return createObjectURL(data, \"image/png\", forceDataSchema);\n    }\n\n    // eslint-disable-next-line no-shadow\n    return function convertImgDataToPng(imgData, forceDataSchema, isMask) {\n      const kind =\n        imgData.kind === undefined ? ImageKind.GRAYSCALE_1BPP : imgData.kind;\n      return encode(imgData, kind, forceDataSchema, isMask);\n    };\n  })();\n\n  class SVGExtraState {\n    constructor() {\n      this.fontSizeScale = 1;\n      this.fontWeight = SVG_DEFAULTS.fontWeight;\n      this.fontSize = 0;\n\n      this.textMatrix = IDENTITY_MATRIX;\n      this.fontMatrix = FONT_IDENTITY_MATRIX;\n      this.leading = 0;\n      this.textRenderingMode = TextRenderingMode.FILL;\n      this.textMatrixScale = 1;\n\n      // Current point (in user coordinates)\n      this.x = 0;\n      this.y = 0;\n\n      // Start of text line (in text coordinates)\n      this.lineX = 0;\n      this.lineY = 0;\n\n      // Character and word spacing\n      this.charSpacing = 0;\n      this.wordSpacing = 0;\n      this.textHScale = 1;\n      this.textRise = 0;\n\n      // Default foreground and background colors\n      this.fillColor = SVG_DEFAULTS.fillColor;\n      this.strokeColor = \"#000000\";\n\n      this.fillAlpha = 1;\n      this.strokeAlpha = 1;\n      this.lineWidth = 1;\n      this.lineJoin = \"\";\n      this.lineCap = \"\";\n      this.miterLimit = 0;\n\n      this.dashArray = [];\n      this.dashPhase = 0;\n\n      this.dependencies = [];\n\n      // Clipping\n      this.activeClipUrl = null;\n      this.clipGroup = null;\n\n      this.maskId = \"\";\n    }\n\n    clone() {\n      return Object.create(this);\n    }\n\n    setCurrentPoint(x, y) {\n      this.x = x;\n      this.y = y;\n    }\n  }\n\n  // eslint-disable-next-line no-inner-declarations\n  function opListToTree(opList) {\n    let opTree = [];\n    const tmp = [];\n\n    for (const opListElement of opList) {\n      if (opListElement.fn === \"save\") {\n        opTree.push({ fnId: 92, fn: \"group\", items: [] });\n        tmp.push(opTree);\n        opTree = opTree[opTree.length - 1].items;\n        continue;\n      }\n\n      if (opListElement.fn === \"restore\") {\n        opTree = tmp.pop();\n      } else {\n        opTree.push(opListElement);\n      }\n    }\n    return opTree;\n  }\n\n  /**\n   * Format a float number as a string.\n   *\n   * @param value {number} - The float number to format.\n   * @returns {string}\n   */\n  // eslint-disable-next-line no-inner-declarations\n  function pf(value) {\n    if (Number.isInteger(value)) {\n      return value.toString();\n    }\n    const s = value.toFixed(10);\n    let i = s.length - 1;\n    if (s[i] !== \"0\") {\n      return s;\n    }\n\n    // Remove trailing zeros.\n    do {\n      i--;\n    } while (s[i] === \"0\");\n    return s.substring(0, s[i] === \".\" ? i : i + 1);\n  }\n\n  /**\n   * Format a transform matrix as a string. The standard rotation, scale and\n   * translation matrices are replaced by their shorter forms, and for\n   * identity matrices an empty string is returned to save memory.\n   *\n   * @param m {Array} - The transform matrix to format.\n   * @returns {string}\n   */\n  // eslint-disable-next-line no-inner-declarations\n  function pm(m) {\n    if (m[4] === 0 && m[5] === 0) {\n      if (m[1] === 0 && m[2] === 0) {\n        if (m[0] === 1 && m[3] === 1) {\n          return \"\";\n        }\n        return `scale(${pf(m[0])} ${pf(m[3])})`;\n      }\n      if (m[0] === m[3] && m[1] === -m[2]) {\n        const a = (Math.acos(m[0]) * 180) / Math.PI;\n        return `rotate(${pf(a)})`;\n      }\n    } else {\n      if (m[0] === 1 && m[1] === 0 && m[2] === 0 && m[3] === 1) {\n        return `translate(${pf(m[4])} ${pf(m[5])})`;\n      }\n    }\n    return (\n      `matrix(${pf(m[0])} ${pf(m[1])} ${pf(m[2])} ${pf(m[3])} ${pf(m[4])} ` +\n      `${pf(m[5])})`\n    );\n  }\n\n  // The counts below are relevant for all pages, so they have to be global\n  // instead of being members of `SVGGraphics` (which is recreated for\n  // each page).\n  let clipCount = 0;\n  let maskCount = 0;\n  let shadingCount = 0;\n\n  // eslint-disable-next-line no-shadow\n  SVGGraphics = class SVGGraphics {\n    constructor(commonObjs, objs, forceDataSchema = false) {\n      this.svgFactory = new DOMSVGFactory();\n\n      this.current = new SVGExtraState();\n      this.transformMatrix = IDENTITY_MATRIX; // Graphics state matrix\n      this.transformStack = [];\n      this.extraStack = [];\n      this.commonObjs = commonObjs;\n      this.objs = objs;\n      this.pendingClip = null;\n      this.pendingEOFill = false;\n\n      this.embedFonts = false;\n      this.embeddedFonts = Object.create(null);\n      this.cssStyle = null;\n      this.forceDataSchema = !!forceDataSchema;\n\n      // In `src/shared/util.js` the operator names are mapped to IDs.\n      // The list below represents the reverse of that, i.e., it maps IDs\n      // to operator names.\n      this._operatorIdMapping = [];\n      for (const op in OPS) {\n        this._operatorIdMapping[OPS[op]] = op;\n      }\n    }\n\n    save() {\n      this.transformStack.push(this.transformMatrix);\n      const old = this.current;\n      this.extraStack.push(old);\n      this.current = old.clone();\n    }\n\n    restore() {\n      this.transformMatrix = this.transformStack.pop();\n      this.current = this.extraStack.pop();\n      this.pendingClip = null;\n      this.tgrp = null;\n    }\n\n    group(items) {\n      this.save();\n      this.executeOpTree(items);\n      this.restore();\n    }\n\n    loadDependencies(operatorList) {\n      const fnArray = operatorList.fnArray;\n      const argsArray = operatorList.argsArray;\n\n      for (let i = 0, ii = fnArray.length; i < ii; i++) {\n        if (fnArray[i] !== OPS.dependency) {\n          continue;\n        }\n\n        for (const obj of argsArray[i]) {\n          const objsPool = obj.startsWith(\"g_\") ? this.commonObjs : this.objs;\n          const promise = new Promise(resolve => {\n            objsPool.get(obj, resolve);\n          });\n          this.current.dependencies.push(promise);\n        }\n      }\n      return Promise.all(this.current.dependencies);\n    }\n\n    transform(a, b, c, d, e, f) {\n      const transformMatrix = [a, b, c, d, e, f];\n      this.transformMatrix = Util.transform(\n        this.transformMatrix,\n        transformMatrix\n      );\n      this.tgrp = null;\n    }\n\n    getSVG(operatorList, viewport) {\n      this.viewport = viewport;\n\n      const svgElement = this._initialize(viewport);\n      return this.loadDependencies(operatorList).then(() => {\n        this.transformMatrix = IDENTITY_MATRIX;\n        this.executeOpTree(this.convertOpList(operatorList));\n        return svgElement;\n      });\n    }\n\n    convertOpList(operatorList) {\n      const operatorIdMapping = this._operatorIdMapping;\n      const argsArray = operatorList.argsArray;\n      const fnArray = operatorList.fnArray;\n      const opList = [];\n      for (let i = 0, ii = fnArray.length; i < ii; i++) {\n        const fnId = fnArray[i];\n        opList.push({\n          fnId,\n          fn: operatorIdMapping[fnId],\n          args: argsArray[i],\n        });\n      }\n      return opListToTree(opList);\n    }\n\n    executeOpTree(opTree) {\n      for (const opTreeElement of opTree) {\n        const fn = opTreeElement.fn;\n        const fnId = opTreeElement.fnId;\n        const args = opTreeElement.args;\n\n        switch (fnId | 0) {\n          case OPS.beginText:\n            this.beginText();\n            break;\n          case OPS.dependency:\n            // Handled in `loadDependencies`, so no warning should be shown.\n            break;\n          case OPS.setLeading:\n            this.setLeading(args);\n            break;\n          case OPS.setLeadingMoveText:\n            this.setLeadingMoveText(args[0], args[1]);\n            break;\n          case OPS.setFont:\n            this.setFont(args);\n            break;\n          case OPS.showText:\n            this.showText(args[0]);\n            break;\n          case OPS.showSpacedText:\n            this.showText(args[0]);\n            break;\n          case OPS.endText:\n            this.endText();\n            break;\n          case OPS.moveText:\n            this.moveText(args[0], args[1]);\n            break;\n          case OPS.setCharSpacing:\n            this.setCharSpacing(args[0]);\n            break;\n          case OPS.setWordSpacing:\n            this.setWordSpacing(args[0]);\n            break;\n          case OPS.setHScale:\n            this.setHScale(args[0]);\n            break;\n          case OPS.setTextMatrix:\n            this.setTextMatrix(\n              args[0],\n              args[1],\n              args[2],\n              args[3],\n              args[4],\n              args[5]\n            );\n            break;\n          case OPS.setTextRise:\n            this.setTextRise(args[0]);\n            break;\n          case OPS.setTextRenderingMode:\n            this.setTextRenderingMode(args[0]);\n            break;\n          case OPS.setLineWidth:\n            this.setLineWidth(args[0]);\n            break;\n          case OPS.setLineJoin:\n            this.setLineJoin(args[0]);\n            break;\n          case OPS.setLineCap:\n            this.setLineCap(args[0]);\n            break;\n          case OPS.setMiterLimit:\n            this.setMiterLimit(args[0]);\n            break;\n          case OPS.setFillRGBColor:\n            this.setFillRGBColor(args[0], args[1], args[2]);\n            break;\n          case OPS.setStrokeRGBColor:\n            this.setStrokeRGBColor(args[0], args[1], args[2]);\n            break;\n          case OPS.setStrokeColorN:\n            this.setStrokeColorN(args);\n            break;\n          case OPS.setFillColorN:\n            this.setFillColorN(args);\n            break;\n          case OPS.shadingFill:\n            this.shadingFill(args[0]);\n            break;\n          case OPS.setDash:\n            this.setDash(args[0], args[1]);\n            break;\n          case OPS.setRenderingIntent:\n            this.setRenderingIntent(args[0]);\n            break;\n          case OPS.setFlatness:\n            this.setFlatness(args[0]);\n            break;\n          case OPS.setGState:\n            this.setGState(args[0]);\n            break;\n          case OPS.fill:\n            this.fill();\n            break;\n          case OPS.eoFill:\n            this.eoFill();\n            break;\n          case OPS.stroke:\n            this.stroke();\n            break;\n          case OPS.fillStroke:\n            this.fillStroke();\n            break;\n          case OPS.eoFillStroke:\n            this.eoFillStroke();\n            break;\n          case OPS.clip:\n            this.clip(\"nonzero\");\n            break;\n          case OPS.eoClip:\n            this.clip(\"evenodd\");\n            break;\n          case OPS.paintSolidColorImageMask:\n            this.paintSolidColorImageMask();\n            break;\n          case OPS.paintImageXObject:\n            this.paintImageXObject(args[0]);\n            break;\n          case OPS.paintInlineImageXObject:\n            this.paintInlineImageXObject(args[0]);\n            break;\n          case OPS.paintImageMaskXObject:\n            this.paintImageMaskXObject(args[0]);\n            break;\n          case OPS.paintFormXObjectBegin:\n            this.paintFormXObjectBegin(args[0], args[1]);\n            break;\n          case OPS.paintFormXObjectEnd:\n            this.paintFormXObjectEnd();\n            break;\n          case OPS.closePath:\n            this.closePath();\n            break;\n          case OPS.closeStroke:\n            this.closeStroke();\n            break;\n          case OPS.closeFillStroke:\n            this.closeFillStroke();\n            break;\n          case OPS.closeEOFillStroke:\n            this.closeEOFillStroke();\n            break;\n          case OPS.nextLine:\n            this.nextLine();\n            break;\n          case OPS.transform:\n            this.transform(\n              args[0],\n              args[1],\n              args[2],\n              args[3],\n              args[4],\n              args[5]\n            );\n            break;\n          case OPS.constructPath:\n            this.constructPath(args[0], args[1]);\n            break;\n          case OPS.endPath:\n            this.endPath();\n            break;\n          case 92:\n            this.group(opTreeElement.items);\n            break;\n          default:\n            warn(`Unimplemented operator ${fn}`);\n            break;\n        }\n      }\n    }\n\n    setWordSpacing(wordSpacing) {\n      this.current.wordSpacing = wordSpacing;\n    }\n\n    setCharSpacing(charSpacing) {\n      this.current.charSpacing = charSpacing;\n    }\n\n    nextLine() {\n      this.moveText(0, this.current.leading);\n    }\n\n    setTextMatrix(a, b, c, d, e, f) {\n      const current = this.current;\n      current.textMatrix = current.lineMatrix = [a, b, c, d, e, f];\n      current.textMatrixScale = Math.sqrt(a * a + b * b);\n\n      current.x = current.lineX = 0;\n      current.y = current.lineY = 0;\n\n      current.xcoords = [];\n      current.ycoords = [];\n      current.tspan = this.svgFactory.createElement(\"svg:tspan\");\n      current.tspan.setAttributeNS(null, \"font-family\", current.fontFamily);\n      current.tspan.setAttributeNS(\n        null,\n        \"font-size\",\n        `${pf(current.fontSize)}px`\n      );\n      current.tspan.setAttributeNS(null, \"y\", pf(-current.y));\n\n      current.txtElement = this.svgFactory.createElement(\"svg:text\");\n      current.txtElement.appendChild(current.tspan);\n    }\n\n    beginText() {\n      const current = this.current;\n      current.x = current.lineX = 0;\n      current.y = current.lineY = 0;\n      current.textMatrix = IDENTITY_MATRIX;\n      current.lineMatrix = IDENTITY_MATRIX;\n      current.textMatrixScale = 1;\n      current.tspan = this.svgFactory.createElement(\"svg:tspan\");\n      current.txtElement = this.svgFactory.createElement(\"svg:text\");\n      current.txtgrp = this.svgFactory.createElement(\"svg:g\");\n      current.xcoords = [];\n      current.ycoords = [];\n    }\n\n    moveText(x, y) {\n      const current = this.current;\n      current.x = current.lineX += x;\n      current.y = current.lineY += y;\n\n      current.xcoords = [];\n      current.ycoords = [];\n      current.tspan = this.svgFactory.createElement(\"svg:tspan\");\n      current.tspan.setAttributeNS(null, \"font-family\", current.fontFamily);\n      current.tspan.setAttributeNS(\n        null,\n        \"font-size\",\n        `${pf(current.fontSize)}px`\n      );\n      current.tspan.setAttributeNS(null, \"y\", pf(-current.y));\n    }\n\n    showText(glyphs) {\n      const current = this.current;\n      const font = current.font;\n      const fontSize = current.fontSize;\n      if (fontSize === 0) {\n        return;\n      }\n\n      const fontSizeScale = current.fontSizeScale;\n      const charSpacing = current.charSpacing;\n      const wordSpacing = current.wordSpacing;\n      const fontDirection = current.fontDirection;\n      const textHScale = current.textHScale * fontDirection;\n      const vertical = font.vertical;\n      const spacingDir = vertical ? 1 : -1;\n      const defaultVMetrics = font.defaultVMetrics;\n      const widthAdvanceScale = fontSize * current.fontMatrix[0];\n\n      let x = 0;\n      for (const glyph of glyphs) {\n        if (glyph === null) {\n          // Word break\n          x += fontDirection * wordSpacing;\n          continue;\n        } else if (isNum(glyph)) {\n          x += (spacingDir * glyph * fontSize) / 1000;\n          continue;\n        }\n\n        const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n        const character = glyph.fontChar;\n        let scaledX, scaledY;\n        let width = glyph.width;\n        if (vertical) {\n          let vx;\n          const vmetric = glyph.vmetric || defaultVMetrics;\n          vx = glyph.vmetric ? vmetric[1] : width * 0.5;\n          vx = -vx * widthAdvanceScale;\n          const vy = vmetric[2] * widthAdvanceScale;\n\n          width = vmetric ? -vmetric[0] : width;\n          scaledX = vx / fontSizeScale;\n          scaledY = (x + vy) / fontSizeScale;\n        } else {\n          scaledX = x / fontSizeScale;\n          scaledY = 0;\n        }\n\n        if (glyph.isInFont || font.missingFile) {\n          current.xcoords.push(current.x + scaledX);\n          if (vertical) {\n            current.ycoords.push(-current.y + scaledY);\n          }\n          current.tspan.textContent += character;\n        } else {\n          // TODO: To assist with text selection, we should replace the missing\n          // character with a space character if charWidth is not zero.\n          // But we cannot just do \"character = ' '\", because the ' ' character\n          // might actually map to a different glyph.\n        }\n\n        let charWidth;\n        if (vertical) {\n          charWidth = width * widthAdvanceScale - spacing * fontDirection;\n        } else {\n          charWidth = width * widthAdvanceScale + spacing * fontDirection;\n        }\n\n        x += charWidth;\n      }\n      current.tspan.setAttributeNS(\n        null,\n        \"x\",\n        current.xcoords.map(pf).join(\" \")\n      );\n      if (vertical) {\n        current.tspan.setAttributeNS(\n          null,\n          \"y\",\n          current.ycoords.map(pf).join(\" \")\n        );\n      } else {\n        current.tspan.setAttributeNS(null, \"y\", pf(-current.y));\n      }\n\n      if (vertical) {\n        current.y -= x;\n      } else {\n        current.x += x * textHScale;\n      }\n\n      current.tspan.setAttributeNS(null, \"font-family\", current.fontFamily);\n      current.tspan.setAttributeNS(\n        null,\n        \"font-size\",\n        `${pf(current.fontSize)}px`\n      );\n      if (current.fontStyle !== SVG_DEFAULTS.fontStyle) {\n        current.tspan.setAttributeNS(null, \"font-style\", current.fontStyle);\n      }\n      if (current.fontWeight !== SVG_DEFAULTS.fontWeight) {\n        current.tspan.setAttributeNS(null, \"font-weight\", current.fontWeight);\n      }\n\n      const fillStrokeMode =\n        current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (\n        fillStrokeMode === TextRenderingMode.FILL ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        if (current.fillColor !== SVG_DEFAULTS.fillColor) {\n          current.tspan.setAttributeNS(null, \"fill\", current.fillColor);\n        }\n        if (current.fillAlpha < 1) {\n          current.tspan.setAttributeNS(null, \"fill-opacity\", current.fillAlpha);\n        }\n      } else if (current.textRenderingMode === TextRenderingMode.ADD_TO_PATH) {\n        // Workaround for Firefox: We must set fill=\"transparent\" because\n        // fill=\"none\" would generate an empty clipping path.\n        current.tspan.setAttributeNS(null, \"fill\", \"transparent\");\n      } else {\n        current.tspan.setAttributeNS(null, \"fill\", \"none\");\n      }\n\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        const lineWidthScale = 1 / (current.textMatrixScale || 1);\n        this._setStrokeAttributes(current.tspan, lineWidthScale);\n      }\n\n      // Include the text rise in the text matrix since the `pm` function\n      // creates the SVG element's `translate` entry (work on a copy to avoid\n      // altering the original text matrix).\n      let textMatrix = current.textMatrix;\n      if (current.textRise !== 0) {\n        textMatrix = textMatrix.slice();\n        textMatrix[5] += current.textRise;\n      }\n\n      current.txtElement.setAttributeNS(\n        null,\n        \"transform\",\n        `${pm(textMatrix)} scale(${pf(textHScale)}, -1)`\n      );\n      current.txtElement.setAttributeNS(XML_NS, \"xml:space\", \"preserve\");\n      current.txtElement.appendChild(current.tspan);\n      current.txtgrp.appendChild(current.txtElement);\n\n      this._ensureTransformGroup().appendChild(current.txtElement);\n    }\n\n    setLeadingMoveText(x, y) {\n      this.setLeading(-y);\n      this.moveText(x, y);\n    }\n\n    addFontStyle(fontObj) {\n      if (!fontObj.data) {\n        throw new Error(\n          \"addFontStyle: No font data available, \" +\n            'ensure that the \"fontExtraProperties\" API parameter is set.'\n        );\n      }\n      if (!this.cssStyle) {\n        this.cssStyle = this.svgFactory.createElement(\"svg:style\");\n        this.cssStyle.setAttributeNS(null, \"type\", \"text/css\");\n        this.defs.appendChild(this.cssStyle);\n      }\n\n      const url = createObjectURL(\n        fontObj.data,\n        fontObj.mimetype,\n        this.forceDataSchema\n      );\n      this.cssStyle.textContent +=\n        `@font-face { font-family: \"${fontObj.loadedName}\";` +\n        ` src: url(${url}); }\\n`;\n    }\n\n    setFont(details) {\n      const current = this.current;\n      const fontObj = this.commonObjs.get(details[0]);\n      let size = details[1];\n      current.font = fontObj;\n\n      if (\n        this.embedFonts &&\n        !fontObj.missingFile &&\n        !this.embeddedFonts[fontObj.loadedName]\n      ) {\n        this.addFontStyle(fontObj);\n        this.embeddedFonts[fontObj.loadedName] = fontObj;\n      }\n\n      current.fontMatrix = fontObj.fontMatrix\n        ? fontObj.fontMatrix\n        : FONT_IDENTITY_MATRIX;\n\n      let bold = \"normal\";\n      if (fontObj.black) {\n        bold = \"900\";\n      } else if (fontObj.bold) {\n        bold = \"bold\";\n      }\n      const italic = fontObj.italic ? \"italic\" : \"normal\";\n\n      if (size < 0) {\n        size = -size;\n        current.fontDirection = -1;\n      } else {\n        current.fontDirection = 1;\n      }\n      current.fontSize = size;\n      current.fontFamily = fontObj.loadedName;\n      current.fontWeight = bold;\n      current.fontStyle = italic;\n\n      current.tspan = this.svgFactory.createElement(\"svg:tspan\");\n      current.tspan.setAttributeNS(null, \"y\", pf(-current.y));\n      current.xcoords = [];\n      current.ycoords = [];\n    }\n\n    endText() {\n      const current = this.current;\n      if (\n        current.textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG &&\n        current.txtElement &&\n        current.txtElement.hasChildNodes()\n      ) {\n        // If no glyphs are shown (i.e. no child nodes), no clipping occurs.\n        current.element = current.txtElement;\n        this.clip(\"nonzero\");\n        this.endPath();\n      }\n    }\n\n    // Path properties\n    setLineWidth(width) {\n      if (width > 0) {\n        this.current.lineWidth = width;\n      }\n    }\n\n    setLineCap(style) {\n      this.current.lineCap = LINE_CAP_STYLES[style];\n    }\n\n    setLineJoin(style) {\n      this.current.lineJoin = LINE_JOIN_STYLES[style];\n    }\n\n    setMiterLimit(limit) {\n      this.current.miterLimit = limit;\n    }\n\n    setStrokeAlpha(strokeAlpha) {\n      this.current.strokeAlpha = strokeAlpha;\n    }\n\n    setStrokeRGBColor(r, g, b) {\n      this.current.strokeColor = Util.makeCssRgb(r, g, b);\n    }\n\n    setFillAlpha(fillAlpha) {\n      this.current.fillAlpha = fillAlpha;\n    }\n\n    setFillRGBColor(r, g, b) {\n      this.current.fillColor = Util.makeCssRgb(r, g, b);\n      this.current.tspan = this.svgFactory.createElement(\"svg:tspan\");\n      this.current.xcoords = [];\n      this.current.ycoords = [];\n    }\n\n    setStrokeColorN(args) {\n      this.current.strokeColor = this._makeColorN_Pattern(args);\n    }\n\n    setFillColorN(args) {\n      this.current.fillColor = this._makeColorN_Pattern(args);\n    }\n\n    shadingFill(args) {\n      const width = this.viewport.width;\n      const height = this.viewport.height;\n      const inv = Util.inverseTransform(this.transformMatrix);\n      const bl = Util.applyTransform([0, 0], inv);\n      const br = Util.applyTransform([0, height], inv);\n      const ul = Util.applyTransform([width, 0], inv);\n      const ur = Util.applyTransform([width, height], inv);\n      const x0 = Math.min(bl[0], br[0], ul[0], ur[0]);\n      const y0 = Math.min(bl[1], br[1], ul[1], ur[1]);\n      const x1 = Math.max(bl[0], br[0], ul[0], ur[0]);\n      const y1 = Math.max(bl[1], br[1], ul[1], ur[1]);\n\n      const rect = this.svgFactory.createElement(\"svg:rect\");\n      rect.setAttributeNS(null, \"x\", x0);\n      rect.setAttributeNS(null, \"y\", y0);\n      rect.setAttributeNS(null, \"width\", x1 - x0);\n      rect.setAttributeNS(null, \"height\", y1 - y0);\n      rect.setAttributeNS(null, \"fill\", this._makeShadingPattern(args));\n      if (this.current.fillAlpha < 1) {\n        rect.setAttributeNS(null, \"fill-opacity\", this.current.fillAlpha);\n      }\n      this._ensureTransformGroup().appendChild(rect);\n    }\n\n    /**\n     * @private\n     */\n    _makeColorN_Pattern(args) {\n      if (args[0] === \"TilingPattern\") {\n        return this._makeTilingPattern(args);\n      }\n      return this._makeShadingPattern(args);\n    }\n\n    /**\n     * @private\n     */\n    _makeTilingPattern(args) {\n      const color = args[1];\n      const operatorList = args[2];\n      const matrix = args[3] || IDENTITY_MATRIX;\n      const [x0, y0, x1, y1] = args[4];\n      const xstep = args[5];\n      const ystep = args[6];\n      const paintType = args[7];\n\n      const tilingId = `shading${shadingCount++}`;\n      const [tx0, ty0] = Util.applyTransform([x0, y0], matrix);\n      const [tx1, ty1] = Util.applyTransform([x1, y1], matrix);\n      const [xscale, yscale] = Util.singularValueDecompose2dScale(matrix);\n      const txstep = xstep * xscale;\n      const tystep = ystep * yscale;\n\n      const tiling = this.svgFactory.createElement(\"svg:pattern\");\n      tiling.setAttributeNS(null, \"id\", tilingId);\n      tiling.setAttributeNS(null, \"patternUnits\", \"userSpaceOnUse\");\n      tiling.setAttributeNS(null, \"width\", txstep);\n      tiling.setAttributeNS(null, \"height\", tystep);\n      tiling.setAttributeNS(null, \"x\", `${tx0}`);\n      tiling.setAttributeNS(null, \"y\", `${ty0}`);\n\n      // Save current state.\n      const svg = this.svg;\n      const transformMatrix = this.transformMatrix;\n      const fillColor = this.current.fillColor;\n      const strokeColor = this.current.strokeColor;\n\n      const bbox = this.svgFactory.create(tx1 - tx0, ty1 - ty0);\n      this.svg = bbox;\n      this.transformMatrix = matrix;\n      if (paintType === 2) {\n        const cssColor = Util.makeCssRgb(...color);\n        this.current.fillColor = cssColor;\n        this.current.strokeColor = cssColor;\n      }\n      this.executeOpTree(this.convertOpList(operatorList));\n\n      // Restore saved state.\n      this.svg = svg;\n      this.transformMatrix = transformMatrix;\n      this.current.fillColor = fillColor;\n      this.current.strokeColor = strokeColor;\n\n      tiling.appendChild(bbox.childNodes[0]);\n      this.defs.appendChild(tiling);\n      return `url(#${tilingId})`;\n    }\n\n    /**\n     * @private\n     */\n    _makeShadingPattern(args) {\n      switch (args[0]) {\n        case \"RadialAxial\":\n          const shadingId = `shading${shadingCount++}`;\n          const colorStops = args[3];\n          let gradient;\n\n          switch (args[1]) {\n            case \"axial\":\n              const point0 = args[4];\n              const point1 = args[5];\n              gradient = this.svgFactory.createElement(\"svg:linearGradient\");\n              gradient.setAttributeNS(null, \"id\", shadingId);\n              gradient.setAttributeNS(null, \"gradientUnits\", \"userSpaceOnUse\");\n              gradient.setAttributeNS(null, \"x1\", point0[0]);\n              gradient.setAttributeNS(null, \"y1\", point0[1]);\n              gradient.setAttributeNS(null, \"x2\", point1[0]);\n              gradient.setAttributeNS(null, \"y2\", point1[1]);\n              break;\n            case \"radial\":\n              const focalPoint = args[4];\n              const circlePoint = args[5];\n              const focalRadius = args[6];\n              const circleRadius = args[7];\n              gradient = this.svgFactory.createElement(\"svg:radialGradient\");\n              gradient.setAttributeNS(null, \"id\", shadingId);\n              gradient.setAttributeNS(null, \"gradientUnits\", \"userSpaceOnUse\");\n              gradient.setAttributeNS(null, \"cx\", circlePoint[0]);\n              gradient.setAttributeNS(null, \"cy\", circlePoint[1]);\n              gradient.setAttributeNS(null, \"r\", circleRadius);\n              gradient.setAttributeNS(null, \"fx\", focalPoint[0]);\n              gradient.setAttributeNS(null, \"fy\", focalPoint[1]);\n              gradient.setAttributeNS(null, \"fr\", focalRadius);\n              break;\n            default:\n              throw new Error(`Unknown RadialAxial type: ${args[1]}`);\n          }\n          for (const colorStop of colorStops) {\n            const stop = this.svgFactory.createElement(\"svg:stop\");\n            stop.setAttributeNS(null, \"offset\", colorStop[0]);\n            stop.setAttributeNS(null, \"stop-color\", colorStop[1]);\n            gradient.appendChild(stop);\n          }\n          this.defs.appendChild(gradient);\n          return `url(#${shadingId})`;\n        case \"Mesh\":\n          warn(\"Unimplemented pattern Mesh\");\n          return null;\n        case \"Dummy\":\n          return \"hotpink\";\n        default:\n          throw new Error(`Unknown IR type: ${args[0]}`);\n      }\n    }\n\n    setDash(dashArray, dashPhase) {\n      this.current.dashArray = dashArray;\n      this.current.dashPhase = dashPhase;\n    }\n\n    constructPath(ops, args) {\n      const current = this.current;\n      let x = current.x,\n        y = current.y;\n      let d = [];\n      let j = 0;\n\n      for (const op of ops) {\n        switch (op | 0) {\n          case OPS.rectangle:\n            x = args[j++];\n            y = args[j++];\n            const width = args[j++];\n            const height = args[j++];\n            const xw = x + width;\n            const yh = y + height;\n            d.push(\n              \"M\",\n              pf(x),\n              pf(y),\n              \"L\",\n              pf(xw),\n              pf(y),\n              \"L\",\n              pf(xw),\n              pf(yh),\n              \"L\",\n              pf(x),\n              pf(yh),\n              \"Z\"\n            );\n            break;\n          case OPS.moveTo:\n            x = args[j++];\n            y = args[j++];\n            d.push(\"M\", pf(x), pf(y));\n            break;\n          case OPS.lineTo:\n            x = args[j++];\n            y = args[j++];\n            d.push(\"L\", pf(x), pf(y));\n            break;\n          case OPS.curveTo:\n            x = args[j + 4];\n            y = args[j + 5];\n            d.push(\n              \"C\",\n              pf(args[j]),\n              pf(args[j + 1]),\n              pf(args[j + 2]),\n              pf(args[j + 3]),\n              pf(x),\n              pf(y)\n            );\n            j += 6;\n            break;\n          case OPS.curveTo2:\n            d.push(\n              \"C\",\n              pf(x),\n              pf(y),\n              pf(args[j]),\n              pf(args[j + 1]),\n              pf(args[j + 2]),\n              pf(args[j + 3])\n            );\n            x = args[j + 2];\n            y = args[j + 3];\n            j += 4;\n            break;\n          case OPS.curveTo3:\n            x = args[j + 2];\n            y = args[j + 3];\n            d.push(\n              \"C\",\n              pf(args[j]),\n              pf(args[j + 1]),\n              pf(x),\n              pf(y),\n              pf(x),\n              pf(y)\n            );\n            j += 4;\n            break;\n          case OPS.closePath:\n            d.push(\"Z\");\n            break;\n        }\n      }\n\n      d = d.join(\" \");\n\n      if (\n        current.path &&\n        ops.length > 0 &&\n        ops[0] !== OPS.rectangle &&\n        ops[0] !== OPS.moveTo\n      ) {\n        // If a path does not start with an OPS.rectangle or OPS.moveTo, it has\n        // probably been divided into two OPS.constructPath operators by\n        // OperatorList. Append the commands to the previous path element.\n        d = current.path.getAttributeNS(null, \"d\") + d;\n      } else {\n        current.path = this.svgFactory.createElement(\"svg:path\");\n        this._ensureTransformGroup().appendChild(current.path);\n      }\n\n      current.path.setAttributeNS(null, \"d\", d);\n      current.path.setAttributeNS(null, \"fill\", \"none\");\n\n      // Saving a reference in current.element so that it can be addressed\n      // in 'fill' and 'stroke'\n      current.element = current.path;\n      current.setCurrentPoint(x, y);\n    }\n\n    endPath() {\n      const current = this.current;\n\n      // Painting operators end a path.\n      current.path = null;\n\n      if (!this.pendingClip) {\n        return;\n      }\n      if (!current.element) {\n        this.pendingClip = null;\n        return;\n      }\n\n      // Add the current path to a clipping path.\n      const clipId = `clippath${clipCount++}`;\n      const clipPath = this.svgFactory.createElement(\"svg:clipPath\");\n      clipPath.setAttributeNS(null, \"id\", clipId);\n      clipPath.setAttributeNS(null, \"transform\", pm(this.transformMatrix));\n\n      // A deep clone is needed when text is used as a clipping path.\n      const clipElement = current.element.cloneNode(true);\n      if (this.pendingClip === \"evenodd\") {\n        clipElement.setAttributeNS(null, \"clip-rule\", \"evenodd\");\n      } else {\n        clipElement.setAttributeNS(null, \"clip-rule\", \"nonzero\");\n      }\n      this.pendingClip = null;\n      clipPath.appendChild(clipElement);\n      this.defs.appendChild(clipPath);\n\n      if (current.activeClipUrl) {\n        // The previous clipping group content can go out of order -- resetting\n        // cached clipGroups.\n        current.clipGroup = null;\n        this.extraStack.forEach(function (prev) {\n          prev.clipGroup = null;\n        });\n        // Intersect with the previous clipping path.\n        clipPath.setAttributeNS(null, \"clip-path\", current.activeClipUrl);\n      }\n      current.activeClipUrl = `url(#${clipId})`;\n\n      this.tgrp = null;\n    }\n\n    clip(type) {\n      this.pendingClip = type;\n    }\n\n    closePath() {\n      const current = this.current;\n      if (current.path) {\n        const d = `${current.path.getAttributeNS(null, \"d\")}Z`;\n        current.path.setAttributeNS(null, \"d\", d);\n      }\n    }\n\n    setLeading(leading) {\n      this.current.leading = -leading;\n    }\n\n    setTextRise(textRise) {\n      this.current.textRise = textRise;\n    }\n\n    setTextRenderingMode(textRenderingMode) {\n      this.current.textRenderingMode = textRenderingMode;\n    }\n\n    setHScale(scale) {\n      this.current.textHScale = scale / 100;\n    }\n\n    setRenderingIntent(intent) {\n      // This operation is ignored since we haven't found a use case for it yet.\n    }\n\n    setFlatness(flatness) {\n      // This operation is ignored since we haven't found a use case for it yet.\n    }\n\n    setGState(states) {\n      for (const [key, value] of states) {\n        switch (key) {\n          case \"LW\":\n            this.setLineWidth(value);\n            break;\n          case \"LC\":\n            this.setLineCap(value);\n            break;\n          case \"LJ\":\n            this.setLineJoin(value);\n            break;\n          case \"ML\":\n            this.setMiterLimit(value);\n            break;\n          case \"D\":\n            this.setDash(value[0], value[1]);\n            break;\n          case \"RI\":\n            this.setRenderingIntent(value);\n            break;\n          case \"FL\":\n            this.setFlatness(value);\n            break;\n          case \"Font\":\n            this.setFont(value);\n            break;\n          case \"CA\":\n            this.setStrokeAlpha(value);\n            break;\n          case \"ca\":\n            this.setFillAlpha(value);\n            break;\n          default:\n            warn(`Unimplemented graphic state operator ${key}`);\n            break;\n        }\n      }\n    }\n\n    fill() {\n      const current = this.current;\n      if (current.element) {\n        current.element.setAttributeNS(null, \"fill\", current.fillColor);\n        current.element.setAttributeNS(null, \"fill-opacity\", current.fillAlpha);\n        this.endPath();\n      }\n    }\n\n    stroke() {\n      const current = this.current;\n      if (current.element) {\n        this._setStrokeAttributes(current.element);\n        current.element.setAttributeNS(null, \"fill\", \"none\");\n        this.endPath();\n      }\n    }\n\n    /**\n     * @private\n     */\n    _setStrokeAttributes(element, lineWidthScale = 1) {\n      const current = this.current;\n      let dashArray = current.dashArray;\n      if (lineWidthScale !== 1 && dashArray.length > 0) {\n        dashArray = dashArray.map(function (value) {\n          return lineWidthScale * value;\n        });\n      }\n      element.setAttributeNS(null, \"stroke\", current.strokeColor);\n      element.setAttributeNS(null, \"stroke-opacity\", current.strokeAlpha);\n      element.setAttributeNS(null, \"stroke-miterlimit\", pf(current.miterLimit));\n      element.setAttributeNS(null, \"stroke-linecap\", current.lineCap);\n      element.setAttributeNS(null, \"stroke-linejoin\", current.lineJoin);\n      element.setAttributeNS(\n        null,\n        \"stroke-width\",\n        pf(lineWidthScale * current.lineWidth) + \"px\"\n      );\n      element.setAttributeNS(\n        null,\n        \"stroke-dasharray\",\n        dashArray.map(pf).join(\" \")\n      );\n      element.setAttributeNS(\n        null,\n        \"stroke-dashoffset\",\n        pf(lineWidthScale * current.dashPhase) + \"px\"\n      );\n    }\n\n    eoFill() {\n      if (this.current.element) {\n        this.current.element.setAttributeNS(null, \"fill-rule\", \"evenodd\");\n      }\n      this.fill();\n    }\n\n    fillStroke() {\n      // Order is important since stroke wants fill to be none.\n      // First stroke, then if fill needed, it will be overwritten.\n      this.stroke();\n      this.fill();\n    }\n\n    eoFillStroke() {\n      if (this.current.element) {\n        this.current.element.setAttributeNS(null, \"fill-rule\", \"evenodd\");\n      }\n      this.fillStroke();\n    }\n\n    closeStroke() {\n      this.closePath();\n      this.stroke();\n    }\n\n    closeFillStroke() {\n      this.closePath();\n      this.fillStroke();\n    }\n\n    closeEOFillStroke() {\n      this.closePath();\n      this.eoFillStroke();\n    }\n\n    paintSolidColorImageMask() {\n      const rect = this.svgFactory.createElement(\"svg:rect\");\n      rect.setAttributeNS(null, \"x\", \"0\");\n      rect.setAttributeNS(null, \"y\", \"0\");\n      rect.setAttributeNS(null, \"width\", \"1px\");\n      rect.setAttributeNS(null, \"height\", \"1px\");\n      rect.setAttributeNS(null, \"fill\", this.current.fillColor);\n\n      this._ensureTransformGroup().appendChild(rect);\n    }\n\n    paintImageXObject(objId) {\n      const imgData = objId.startsWith(\"g_\")\n        ? this.commonObjs.get(objId)\n        : this.objs.get(objId);\n      if (!imgData) {\n        warn(`Dependent image with object ID ${objId} is not ready yet`);\n        return;\n      }\n      this.paintInlineImageXObject(imgData);\n    }\n\n    paintInlineImageXObject(imgData, mask) {\n      const width = imgData.width;\n      const height = imgData.height;\n\n      const imgSrc = convertImgDataToPng(imgData, this.forceDataSchema, !!mask);\n      const cliprect = this.svgFactory.createElement(\"svg:rect\");\n      cliprect.setAttributeNS(null, \"x\", \"0\");\n      cliprect.setAttributeNS(null, \"y\", \"0\");\n      cliprect.setAttributeNS(null, \"width\", pf(width));\n      cliprect.setAttributeNS(null, \"height\", pf(height));\n      this.current.element = cliprect;\n      this.clip(\"nonzero\");\n\n      const imgEl = this.svgFactory.createElement(\"svg:image\");\n      imgEl.setAttributeNS(XLINK_NS, \"xlink:href\", imgSrc);\n      imgEl.setAttributeNS(null, \"x\", \"0\");\n      imgEl.setAttributeNS(null, \"y\", pf(-height));\n      imgEl.setAttributeNS(null, \"width\", pf(width) + \"px\");\n      imgEl.setAttributeNS(null, \"height\", pf(height) + \"px\");\n      imgEl.setAttributeNS(\n        null,\n        \"transform\",\n        `scale(${pf(1 / width)} ${pf(-1 / height)})`\n      );\n      if (mask) {\n        mask.appendChild(imgEl);\n      } else {\n        this._ensureTransformGroup().appendChild(imgEl);\n      }\n    }\n\n    paintImageMaskXObject(imgData) {\n      const current = this.current;\n      const width = imgData.width;\n      const height = imgData.height;\n      const fillColor = current.fillColor;\n\n      current.maskId = `mask${maskCount++}`;\n      const mask = this.svgFactory.createElement(\"svg:mask\");\n      mask.setAttributeNS(null, \"id\", current.maskId);\n\n      const rect = this.svgFactory.createElement(\"svg:rect\");\n      rect.setAttributeNS(null, \"x\", \"0\");\n      rect.setAttributeNS(null, \"y\", \"0\");\n      rect.setAttributeNS(null, \"width\", pf(width));\n      rect.setAttributeNS(null, \"height\", pf(height));\n      rect.setAttributeNS(null, \"fill\", fillColor);\n      rect.setAttributeNS(null, \"mask\", `url(#${current.maskId})`);\n\n      this.defs.appendChild(mask);\n      this._ensureTransformGroup().appendChild(rect);\n\n      this.paintInlineImageXObject(imgData, mask);\n    }\n\n    paintFormXObjectBegin(matrix, bbox) {\n      if (Array.isArray(matrix) && matrix.length === 6) {\n        this.transform(\n          matrix[0],\n          matrix[1],\n          matrix[2],\n          matrix[3],\n          matrix[4],\n          matrix[5]\n        );\n      }\n\n      if (bbox) {\n        const width = bbox[2] - bbox[0];\n        const height = bbox[3] - bbox[1];\n\n        const cliprect = this.svgFactory.createElement(\"svg:rect\");\n        cliprect.setAttributeNS(null, \"x\", bbox[0]);\n        cliprect.setAttributeNS(null, \"y\", bbox[1]);\n        cliprect.setAttributeNS(null, \"width\", pf(width));\n        cliprect.setAttributeNS(null, \"height\", pf(height));\n        this.current.element = cliprect;\n        this.clip(\"nonzero\");\n        this.endPath();\n      }\n    }\n\n    paintFormXObjectEnd() {}\n\n    /**\n     * @private\n     */\n    _initialize(viewport) {\n      const svg = this.svgFactory.create(viewport.width, viewport.height);\n\n      // Create the definitions element.\n      const definitions = this.svgFactory.createElement(\"svg:defs\");\n      svg.appendChild(definitions);\n      this.defs = definitions;\n\n      // Create the root group element, which acts a container for all other\n      // groups and applies the viewport transform.\n      const rootGroup = this.svgFactory.createElement(\"svg:g\");\n      rootGroup.setAttributeNS(null, \"transform\", pm(viewport.transform));\n      svg.appendChild(rootGroup);\n\n      // For the construction of the SVG image we are only interested in the\n      // root group, so we expose it as the entry point of the SVG image for\n      // the other code in this class.\n      this.svg = rootGroup;\n\n      return svg;\n    }\n\n    /**\n     * @private\n     */\n    _ensureClipGroup() {\n      if (!this.current.clipGroup) {\n        const clipGroup = this.svgFactory.createElement(\"svg:g\");\n        clipGroup.setAttributeNS(null, \"clip-path\", this.current.activeClipUrl);\n        this.svg.appendChild(clipGroup);\n        this.current.clipGroup = clipGroup;\n      }\n      return this.current.clipGroup;\n    }\n\n    /**\n     * @private\n     */\n    _ensureTransformGroup() {\n      if (!this.tgrp) {\n        this.tgrp = this.svgFactory.createElement(\"svg:g\");\n        this.tgrp.setAttributeNS(null, \"transform\", pm(this.transformMatrix));\n        if (this.current.activeClipUrl) {\n          this._ensureClipGroup().appendChild(this.tgrp);\n        } else {\n          this.svg.appendChild(this.tgrp);\n        }\n      }\n      return this.tgrp;\n    }\n  };\n}\n\nexport { SVGGraphics };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals __non_webpack_require__ */\n\nimport {\n  AbortException,\n  assert,\n  createPromiseCapability,\n  MissingPDFException,\n} from \"../shared/util.js\";\nimport {\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n} from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./node_stream.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nconst fs = __non_webpack_require__(\"fs\");\nconst http = __non_webpack_require__(\"http\");\nconst https = __non_webpack_require__(\"https\");\nconst url = __non_webpack_require__(\"url\");\n\nconst fileUriRegex = /^file:\\/\\/\\/[a-zA-Z]:\\//;\n\nfunction parseUrl(sourceUrl) {\n  const parsedUrl = url.parse(sourceUrl);\n  if (parsedUrl.protocol === \"file:\" || parsedUrl.host) {\n    return parsedUrl;\n  }\n  // Prepending 'file:///' to Windows absolute path.\n  if (/^[a-z]:[/\\\\]/i.test(sourceUrl)) {\n    return url.parse(`file:///${sourceUrl}`);\n  }\n  // Changes protocol to 'file:' if url refers to filesystem.\n  if (!parsedUrl.host) {\n    parsedUrl.protocol = \"file:\";\n  }\n  return parsedUrl;\n}\n\nclass PDFNodeStream {\n  constructor(source) {\n    this.source = source;\n    this.url = parseUrl(source.url);\n    this.isHttp =\n      this.url.protocol === \"http:\" || this.url.protocol === \"https:\";\n    // Check if url refers to filesystem.\n    this.isFsUrl = this.url.protocol === \"file:\";\n    this.httpHeaders = (this.isHttp && source.httpHeaders) || {};\n\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader ? this._fullRequestReader._loaded : 0;\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFNodeStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = this.isFsUrl\n      ? new PDFNodeStreamFsFullReader(this)\n      : new PDFNodeStreamFullReader(this);\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(start, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const rangeReader = this.isFsUrl\n      ? new PDFNodeStreamFsRangeReader(this, start, end)\n      : new PDFNodeStreamRangeReader(this, start, end);\n    this._rangeRequestReaders.push(rangeReader);\n    return rangeReader;\n  }\n\n  cancelAllRequests(reason) {\n    if (this._fullRequestReader) {\n      this._fullRequestReader.cancel(reason);\n    }\n\n    const readers = this._rangeRequestReaders.slice(0);\n    readers.forEach(function (reader) {\n      reader.cancel(reason);\n    });\n  }\n}\n\nclass BaseFullReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    const source = stream.source;\n    this._contentLength = source.length; // optional\n    this._loaded = 0;\n    this._filename = null;\n\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n\n    this._readableStream = null;\n    this._readCapability = createPromiseCapability();\n    this._headersCapability = createPromiseCapability();\n  }\n\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = createPromiseCapability();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    if (this.onProgress) {\n      this.onProgress({\n        loaded: this._loaded,\n        total: this._contentLength,\n      });\n    }\n    // Ensure that `read()` method returns ArrayBuffer.\n    const buffer = new Uint8Array(chunk).buffer;\n    return { value: buffer, done: false };\n  }\n\n  cancel(reason) {\n    // Call `this._error()` method when cancel is called\n    // before _readableStream is set.\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"end\", () => {\n      // Destroy readable to minimize resource usage.\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n\n    // We need to stop reading when range is supported and streaming is\n    // disabled.\n    if (!this._isStreamingSupported && this._isRangeSupported) {\n      this._error(new AbortException(\"streaming is disabled\"));\n    }\n\n    // Destroy ReadableStream if already in errored state.\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\nclass BaseRangeReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    this._loaded = 0;\n    this._readableStream = null;\n    this._readCapability = createPromiseCapability();\n    const source = stream.source;\n    this._isStreamingSupported = !source.disableStream;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = createPromiseCapability();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    if (this.onProgress) {\n      this.onProgress({ loaded: this._loaded });\n    }\n    // Ensure that `read()` method returns ArrayBuffer.\n    const buffer = new Uint8Array(chunk).buffer;\n    return { value: buffer, done: false };\n  }\n\n  cancel(reason) {\n    // Call `this._error()` method when cancel is called\n    // before _readableStream is set.\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"end\", () => {\n      // Destroy readableStream to minimize resource usage.\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n\n    // Destroy readableStream if already in errored state.\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\nfunction createRequestOptions(parsedUrl, headers) {\n  return {\n    protocol: parsedUrl.protocol,\n    auth: parsedUrl.auth,\n    host: parsedUrl.hostname,\n    port: parsedUrl.port,\n    path: parsedUrl.path,\n    method: \"GET\",\n    headers,\n  };\n}\n\nclass PDFNodeStreamFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n\n    const handleResponse = response => {\n      if (response.statusCode === 404) {\n        const error = new MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        this._headersCapability.reject(error);\n        return;\n      }\n      this._headersCapability.resolve();\n      this._setReadableStream(response);\n\n      const getResponseHeader = name => {\n        // Make sure that headers name are in lower case, as mentioned\n        // here: https://nodejs.org/api/http.html#http_message_headers.\n        return this._readableStream.headers[name.toLowerCase()];\n      };\n      const {\n        allowRangeRequests,\n        suggestedLength,\n      } = validateRangeRequestCapabilities({\n        getResponseHeader,\n        isHttp: stream.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange,\n      });\n\n      this._isRangeSupported = allowRangeRequests;\n      // Setting right content length.\n      this._contentLength = suggestedLength || this._contentLength;\n\n      this._filename = extractFilenameFromHeader(getResponseHeader);\n    };\n\n    this._request = null;\n    if (this._url.protocol === \"http:\") {\n      this._request = http.request(\n        createRequestOptions(this._url, stream.httpHeaders),\n        handleResponse\n      );\n    } else {\n      this._request = https.request(\n        createRequestOptions(this._url, stream.httpHeaders),\n        handleResponse\n      );\n    }\n\n    this._request.on(\"error\", reason => {\n      this._storedError = reason;\n      this._headersCapability.reject(reason);\n    });\n    // Note: `request.end(data)` is used to write `data` to request body\n    // and notify end of request. But one should always call `request.end()`\n    // even if there is no data to write -- (to notify the end of request).\n    this._request.end();\n  }\n}\n\nclass PDFNodeStreamRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n\n    this._httpHeaders = {};\n    for (const property in stream.httpHeaders) {\n      const value = stream.httpHeaders[property];\n      if (typeof value === \"undefined\") {\n        continue;\n      }\n      this._httpHeaders[property] = value;\n    }\n    this._httpHeaders.Range = `bytes=${start}-${end - 1}`;\n\n    const handleResponse = response => {\n      if (response.statusCode === 404) {\n        const error = new MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        return;\n      }\n      this._setReadableStream(response);\n    };\n\n    this._request = null;\n    if (this._url.protocol === \"http:\") {\n      this._request = http.request(\n        createRequestOptions(this._url, this._httpHeaders),\n        handleResponse\n      );\n    } else {\n      this._request = https.request(\n        createRequestOptions(this._url, this._httpHeaders),\n        handleResponse\n      );\n    }\n\n    this._request.on(\"error\", reason => {\n      this._storedError = reason;\n    });\n    this._request.end();\n  }\n}\n\nclass PDFNodeStreamFsFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n\n    let path = decodeURIComponent(this._url.path);\n\n    // Remove the extra slash to get right path from url like `file:///C:/`\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, \"\");\n    }\n\n    fs.lstat(path, (error, stat) => {\n      if (error) {\n        if (error.code === \"ENOENT\") {\n          error = new MissingPDFException(`Missing PDF \"${path}\".`);\n        }\n        this._storedError = error;\n        this._headersCapability.reject(error);\n        return;\n      }\n      // Setting right content length.\n      this._contentLength = stat.size;\n\n      this._setReadableStream(fs.createReadStream(path));\n      this._headersCapability.resolve();\n    });\n  }\n}\n\nclass PDFNodeStreamFsRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n\n    let path = decodeURIComponent(this._url.path);\n\n    // Remove the extra slash to get right path from url like `file:///C:/`\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, \"\");\n    }\n\n    this._setReadableStream(fs.createReadStream(path, { start, end: end - 1 }));\n  }\n}\n\nexport { PDFNodeStream };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert,\n  MissingPDFException,\n  UnexpectedResponseException,\n} from \"../shared/util.js\";\nimport { getFilenameFromContentDispositionHeader } from \"./content_disposition.js\";\n\nfunction validateRangeRequestCapabilities({\n  getResponseHeader,\n  isHttp,\n  rangeChunkSize,\n  disableRange,\n}) {\n  assert(rangeChunkSize > 0, \"Range chunk size must be larger than zero\");\n  const returnValues = {\n    allowRangeRequests: false,\n    suggestedLength: undefined,\n  };\n\n  const length = parseInt(getResponseHeader(\"Content-Length\"), 10);\n  if (!Number.isInteger(length)) {\n    return returnValues;\n  }\n\n  returnValues.suggestedLength = length;\n\n  if (length <= 2 * rangeChunkSize) {\n    // The file size is smaller than the size of two chunks, so it does not\n    // make any sense to abort the request and retry with a range request.\n    return returnValues;\n  }\n\n  if (disableRange || !isHttp) {\n    return returnValues;\n  }\n  if (getResponseHeader(\"Accept-Ranges\") !== \"bytes\") {\n    return returnValues;\n  }\n\n  const contentEncoding = getResponseHeader(\"Content-Encoding\") || \"identity\";\n  if (contentEncoding !== \"identity\") {\n    return returnValues;\n  }\n\n  returnValues.allowRangeRequests = true;\n  return returnValues;\n}\n\nfunction extractFilenameFromHeader(getResponseHeader) {\n  const contentDisposition = getResponseHeader(\"Content-Disposition\");\n  if (contentDisposition) {\n    let filename = getFilenameFromContentDispositionHeader(contentDisposition);\n    if (filename.includes(\"%\")) {\n      try {\n        filename = decodeURIComponent(filename);\n      } catch (ex) {}\n    }\n    if (/\\.pdf$/i.test(filename)) {\n      return filename;\n    }\n  }\n  return null;\n}\n\nfunction createResponseStatusError(status, url) {\n  if (status === 404 || (status === 0 && url.startsWith(\"file:\"))) {\n    return new MissingPDFException('Missing PDF \"' + url + '\".');\n  }\n  return new UnexpectedResponseException(\n    \"Unexpected server response (\" +\n      status +\n      ') while retrieving PDF \"' +\n      url +\n      '\".',\n    status\n  );\n}\n\nfunction validateResponseStatus(status) {\n  return status === 200 || status === 206;\n}\n\nexport {\n  createResponseStatusError,\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n  validateResponseStatus,\n};\n","/* Copyright 2017 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// This getFilenameFromContentDispositionHeader function is adapted from\n// https://github.com/Rob--W/open-in-browser/blob/7e2e35a38b8b4e981b11da7b2f01df0149049e92/extension/content-disposition.js\n// with the following changes:\n// - Modified to conform to PDF.js's coding style.\n// - Support UTF-8 decoding when TextDecoder is unsupported.\n// - Move return to the end of the function to prevent Babel from dropping the\n//   function declarations.\n\n/**\n * Extract file name from the Content-Disposition HTTP response header.\n *\n * @param {string} contentDisposition\n * @returns {string} Filename, if found in the Content-Disposition header.\n */\nfunction getFilenameFromContentDispositionHeader(contentDisposition) {\n  let needsEncodingFixup = true;\n\n  // filename*=ext-value (\"ext-value\" from RFC 5987, referenced by RFC 6266).\n  let tmp = toParamRegExp(\"filename\\\\*\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = unescape(filename);\n    filename = rfc5987decode(filename);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n\n  // Continuations (RFC 2231 section 3, referenced by RFC 5987 section 3.1).\n  // filename*n*=part\n  // filename*n=part\n  tmp = rfc2231getparam(contentDisposition);\n  if (tmp) {\n    // RFC 2047, section\n    const filename = rfc2047decode(tmp);\n    return fixupEncoding(filename);\n  }\n\n  // filename=value (RFC 5987, section 4.1).\n  tmp = toParamRegExp(\"filename\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n\n  // After this line there are only function declarations. We cannot put\n  // \"return\" here for readability because babel would then drop the function\n  // declarations...\n  function toParamRegExp(attributePattern, flags) {\n    return new RegExp(\n      \"(?:^|;)\\\\s*\" +\n        attributePattern +\n        \"\\\\s*=\\\\s*\" +\n        // Captures: value = token | quoted-string\n        // (RFC 2616, section 3.6 and referenced by RFC 6266 4.1)\n        \"(\" +\n        '[^\";\\\\s][^;\\\\s]*' +\n        \"|\" +\n        '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' +\n        \")\",\n      flags\n    );\n  }\n  function textdecode(encoding, value) {\n    if (encoding) {\n      if (!/^[\\x00-\\xFF]+$/.test(value)) {\n        return value;\n      }\n      try {\n        const decoder = new TextDecoder(encoding, { fatal: true });\n        const bytes = Array.from(value, function (ch) {\n          return ch.charCodeAt(0) & 0xff;\n        });\n        value = decoder.decode(new Uint8Array(bytes));\n        needsEncodingFixup = false;\n      } catch (e) {\n        // TextDecoder constructor threw - unrecognized encoding.\n        // Or TextDecoder API is not available (in IE / Edge).\n        if (/^utf-?8$/i.test(encoding)) {\n          // UTF-8 is commonly used, try to support it in another way:\n          try {\n            value = decodeURIComponent(escape(value));\n            needsEncodingFixup = false;\n          } catch (err) {}\n        }\n      }\n    }\n    return value;\n  }\n  function fixupEncoding(value) {\n    if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n      // Maybe multi-byte UTF-8.\n      value = textdecode(\"utf-8\", value);\n      if (needsEncodingFixup) {\n        // Try iso-8859-1 encoding.\n        value = textdecode(\"iso-8859-1\", value);\n      }\n    }\n    return value;\n  }\n  function rfc2231getparam(contentDispositionStr) {\n    const matches = [];\n    let match;\n    // Iterate over all filename*n= and filename*n*= with n being an integer\n    // of at least zero. Any non-zero number must not start with '0'.\n    const iter = toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\", \"ig\");\n    while ((match = iter.exec(contentDispositionStr)) !== null) {\n      let [, n, quot, part] = match; // eslint-disable-line prefer-const\n      n = parseInt(n, 10);\n      if (n in matches) {\n        // Ignore anything after the invalid second filename*0.\n        if (n === 0) {\n          break;\n        }\n        continue;\n      }\n      matches[n] = [quot, part];\n    }\n    const parts = [];\n    for (let n = 0; n < matches.length; ++n) {\n      if (!(n in matches)) {\n        // Numbers must be consecutive. Truncate when there is a hole.\n        break;\n      }\n      let [quot, part] = matches[n]; // eslint-disable-line prefer-const\n      part = rfc2616unquote(part);\n      if (quot) {\n        part = unescape(part);\n        if (n === 0) {\n          part = rfc5987decode(part);\n        }\n      }\n      parts.push(part);\n    }\n    return parts.join(\"\");\n  }\n  function rfc2616unquote(value) {\n    if (value.startsWith('\"')) {\n      const parts = value.slice(1).split('\\\\\"');\n      // Find the first unescaped \" and terminate there.\n      for (let i = 0; i < parts.length; ++i) {\n        const quotindex = parts[i].indexOf('\"');\n        if (quotindex !== -1) {\n          parts[i] = parts[i].slice(0, quotindex);\n          parts.length = i + 1; // Truncates and stop the iteration.\n        }\n        parts[i] = parts[i].replace(/\\\\(.)/g, \"$1\");\n      }\n      value = parts.join('\"');\n    }\n    return value;\n  }\n  function rfc5987decode(extvalue) {\n    // Decodes \"ext-value\" from RFC 5987.\n    const encodingend = extvalue.indexOf(\"'\");\n    if (encodingend === -1) {\n      // Some servers send \"filename*=\" without encoding 'language' prefix,\n      // e.g. in https://github.com/Rob--W/open-in-browser/issues/26\n      // Let's accept the value like Firefox (57) (Chrome 62 rejects it).\n      return extvalue;\n    }\n    const encoding = extvalue.slice(0, encodingend);\n    const langvalue = extvalue.slice(encodingend + 1);\n    // Ignore language (RFC 5987 section 3.2.1, and RFC 6266 section 4.1 ).\n    const value = langvalue.replace(/^[^']*'/, \"\");\n    return textdecode(encoding, value);\n  }\n  function rfc2047decode(value) {\n    // RFC 2047-decode the result. Firefox tried to drop support for it, but\n    // backed out because some servers use it - https://bugzil.la/875615\n    // Firefox's condition for decoding is here: https://searchfox.org/mozilla-central/rev/4a590a5a15e35d88a3b23dd6ac3c471cf85b04a8/netwerk/mime/nsMIMEHeaderParamImpl.cpp#742-748\n\n    // We are more strict and only recognize RFC 2047-encoding if the value\n    // starts with \"=?\", since then it is likely that the full value is\n    // RFC 2047-encoded.\n\n    // Firefox also decodes words even where RFC 2047 section 5 states:\n    // \"An 'encoded-word' MUST NOT appear within a 'quoted-string'.\"\n    if (!value.startsWith(\"=?\") || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n      return value;\n    }\n    // RFC 2047, section 2.4\n    // encoded-word = \"=?\" charset \"?\" encoding \"?\" encoded-text \"?=\"\n    // charset = token (but let's restrict to characters that denote a\n    //       possibly valid encoding).\n    // encoding = q or b\n    // encoded-text = any printable ASCII character other than ? or space.\n    //        ... but Firefox permits ? and space.\n    return value.replace(\n      /=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g,\n      function (matches, charset, encoding, text) {\n        if (encoding === \"q\" || encoding === \"Q\") {\n          // RFC 2047 section 4.2.\n          text = text.replace(/_/g, \" \");\n          text = text.replace(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n            return String.fromCharCode(parseInt(hex, 16));\n          });\n          return textdecode(charset, text);\n        } // else encoding is b or B - base64 (RFC 2047 section 4.1)\n        try {\n          text = atob(text);\n        } catch (e) {}\n        return textdecode(charset, text);\n      }\n    );\n  }\n\n  return \"\";\n}\n\nexport { getFilenameFromContentDispositionHeader };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint no-var: error */\n\nimport {\n  assert,\n  createPromiseCapability,\n  stringToBytes,\n} from \"../shared/util.js\";\nimport {\n  createResponseStatusError,\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n} from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./network.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nconst OK_RESPONSE = 200;\nconst PARTIAL_CONTENT_RESPONSE = 206;\n\nfunction getArrayBuffer(xhr) {\n  const data = xhr.response;\n  if (typeof data !== \"string\") {\n    return data;\n  }\n  const array = stringToBytes(data);\n  return array.buffer;\n}\n\nclass NetworkManager {\n  constructor(url, args) {\n    this.url = url;\n    args = args || {};\n    this.isHttp = /^https?:/i.test(url);\n    this.httpHeaders = (this.isHttp && args.httpHeaders) || {};\n    this.withCredentials = args.withCredentials || false;\n    this.getXhr =\n      args.getXhr ||\n      function NetworkManager_getXhr() {\n        return new XMLHttpRequest();\n      };\n\n    this.currXhrId = 0;\n    this.pendingRequests = Object.create(null);\n  }\n\n  requestRange(begin, end, listeners) {\n    const args = {\n      begin,\n      end,\n    };\n    for (const prop in listeners) {\n      args[prop] = listeners[prop];\n    }\n    return this.request(args);\n  }\n\n  requestFull(listeners) {\n    return this.request(listeners);\n  }\n\n  request(args) {\n    const xhr = this.getXhr();\n    const xhrId = this.currXhrId++;\n    const pendingRequest = (this.pendingRequests[xhrId] = {\n      xhr,\n    });\n\n    xhr.open(\"GET\", this.url);\n    xhr.withCredentials = this.withCredentials;\n    for (const property in this.httpHeaders) {\n      const value = this.httpHeaders[property];\n      if (typeof value === \"undefined\") {\n        continue;\n      }\n      xhr.setRequestHeader(property, value);\n    }\n    if (this.isHttp && \"begin\" in args && \"end\" in args) {\n      xhr.setRequestHeader(\"Range\", `bytes=${args.begin}-${args.end - 1}`);\n      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n    } else {\n      pendingRequest.expectedStatus = OK_RESPONSE;\n    }\n    xhr.responseType = \"arraybuffer\";\n\n    if (args.onError) {\n      xhr.onerror = function (evt) {\n        args.onError(xhr.status);\n      };\n    }\n    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n    xhr.onprogress = this.onProgress.bind(this, xhrId);\n\n    pendingRequest.onHeadersReceived = args.onHeadersReceived;\n    pendingRequest.onDone = args.onDone;\n    pendingRequest.onError = args.onError;\n    pendingRequest.onProgress = args.onProgress;\n\n    xhr.send(null);\n\n    return xhrId;\n  }\n\n  onProgress(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      // Maybe abortRequest was called...\n      return;\n    }\n\n    if (pendingRequest.onProgress) {\n      pendingRequest.onProgress(evt);\n    }\n  }\n\n  onStateChange(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      // Maybe abortRequest was called...\n      return;\n    }\n\n    const xhr = pendingRequest.xhr;\n    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n      pendingRequest.onHeadersReceived();\n      delete pendingRequest.onHeadersReceived;\n    }\n\n    if (xhr.readyState !== 4) {\n      return;\n    }\n\n    if (!(xhrId in this.pendingRequests)) {\n      // The XHR request might have been aborted in onHeadersReceived()\n      // callback, in which case we should abort request.\n      return;\n    }\n\n    delete this.pendingRequests[xhrId];\n\n    // Success status == 0 can be on ftp, file and other protocols.\n    if (xhr.status === 0 && this.isHttp) {\n      if (pendingRequest.onError) {\n        pendingRequest.onError(xhr.status);\n      }\n      return;\n    }\n    const xhrStatus = xhr.status || OK_RESPONSE;\n\n    // From http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.2:\n    // \"A server MAY ignore the Range header\". This means it's possible to\n    // get a 200 rather than a 206 response from a range request.\n    const ok_response_on_range_request =\n      xhrStatus === OK_RESPONSE &&\n      pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n\n    if (\n      !ok_response_on_range_request &&\n      xhrStatus !== pendingRequest.expectedStatus\n    ) {\n      if (pendingRequest.onError) {\n        pendingRequest.onError(xhr.status);\n      }\n      return;\n    }\n\n    const chunk = getArrayBuffer(xhr);\n    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n      const rangeHeader = xhr.getResponseHeader(\"Content-Range\");\n      const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n      pendingRequest.onDone({\n        begin: parseInt(matches[1], 10),\n        chunk,\n      });\n    } else if (chunk) {\n      pendingRequest.onDone({\n        begin: 0,\n        chunk,\n      });\n    } else if (pendingRequest.onError) {\n      pendingRequest.onError(xhr.status);\n    }\n  }\n\n  getRequestXhr(xhrId) {\n    return this.pendingRequests[xhrId].xhr;\n  }\n\n  isPendingRequest(xhrId) {\n    return xhrId in this.pendingRequests;\n  }\n\n  abortRequest(xhrId) {\n    const xhr = this.pendingRequests[xhrId].xhr;\n    delete this.pendingRequests[xhrId];\n    xhr.abort();\n  }\n}\n\n/** @implements {IPDFStream} */\nclass PDFNetworkStream {\n  constructor(source) {\n    this._source = source;\n    this._manager = new NetworkManager(source.url, {\n      httpHeaders: source.httpHeaders,\n      withCredentials: source.withCredentials,\n    });\n    this._rangeChunkSize = source.rangeChunkSize;\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  _onRangeRequestReaderClosed(reader) {\n    const i = this._rangeRequestReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeRequestReaders.splice(i, 1);\n    }\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFNetworkStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(\n      this._manager,\n      this._source\n    );\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(begin, end) {\n    const reader = new PDFNetworkStreamRangeRequestReader(\n      this._manager,\n      begin,\n      end\n    );\n    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    if (this._fullRequestReader) {\n      this._fullRequestReader.cancel(reason);\n    }\n    const readers = this._rangeRequestReaders.slice(0);\n    readers.forEach(function (reader) {\n      reader.cancel(reason);\n    });\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFNetworkStreamFullRequestReader {\n  constructor(manager, source) {\n    this._manager = manager;\n\n    const args = {\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this),\n    };\n    this._url = source.url;\n    this._fullRequestId = manager.requestFull(args);\n    this._headersReceivedCapability = createPromiseCapability();\n    this._disableRange = source.disableRange || false;\n    this._contentLength = source.length; // Optional\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    this._isStreamingSupported = false;\n    this._isRangeSupported = false;\n\n    this._cachedChunks = [];\n    this._requests = [];\n    this._done = false;\n    this._storedError = undefined;\n    this._filename = null;\n\n    this.onProgress = null;\n  }\n\n  _onHeadersReceived() {\n    const fullRequestXhrId = this._fullRequestId;\n    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n\n    const getResponseHeader = name => {\n      return fullRequestXhr.getResponseHeader(name);\n    };\n    const {\n      allowRangeRequests,\n      suggestedLength,\n    } = validateRangeRequestCapabilities({\n      getResponseHeader,\n      isHttp: this._manager.isHttp,\n      rangeChunkSize: this._rangeChunkSize,\n      disableRange: this._disableRange,\n    });\n\n    if (allowRangeRequests) {\n      this._isRangeSupported = true;\n    }\n    // Setting right content length.\n    this._contentLength = suggestedLength || this._contentLength;\n\n    this._filename = extractFilenameFromHeader(getResponseHeader);\n\n    if (this._isRangeSupported) {\n      // NOTE: by cancelling the full request, and then issuing range\n      // requests, there will be an issue for sites where you can only\n      // request the pdf once. However, if this is the case, then the\n      // server should not be returning that it can support range requests.\n      this._manager.abortRequest(fullRequestXhrId);\n    }\n\n    this._headersReceivedCapability.resolve();\n  }\n\n  _onDone(args) {\n    if (args) {\n      if (this._requests.length > 0) {\n        const requestCapability = this._requests.shift();\n        requestCapability.resolve({ value: args.chunk, done: false });\n      } else {\n        this._cachedChunks.push(args.chunk);\n      }\n    }\n    this._done = true;\n    if (this._cachedChunks.length > 0) {\n      return;\n    }\n    this._requests.forEach(function (requestCapability) {\n      requestCapability.resolve({ value: undefined, done: true });\n    });\n    this._requests = [];\n  }\n\n  _onError(status) {\n    const url = this._url;\n    const exception = createResponseStatusError(status, url);\n    this._storedError = exception;\n    this._headersReceivedCapability.reject(exception);\n    this._requests.forEach(function (requestCapability) {\n      requestCapability.reject(exception);\n    });\n    this._requests = [];\n    this._cachedChunks = [];\n  }\n\n  _onProgress(data) {\n    if (this.onProgress) {\n      this.onProgress({\n        loaded: data.loaded,\n        total: data.lengthComputable ? data.total : this._contentLength,\n      });\n    }\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get headersReady() {\n    return this._headersReceivedCapability.promise;\n  }\n\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._cachedChunks.length > 0) {\n      const chunk = this._cachedChunks.shift();\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = createPromiseCapability();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    this._headersReceivedCapability.reject(reason);\n    this._requests.forEach(function (requestCapability) {\n      requestCapability.resolve({ value: undefined, done: true });\n    });\n    this._requests = [];\n    if (this._manager.isPendingRequest(this._fullRequestId)) {\n      this._manager.abortRequest(this._fullRequestId);\n    }\n    this._fullRequestReader = null;\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFNetworkStreamRangeRequestReader {\n  constructor(manager, begin, end) {\n    this._manager = manager;\n    const args = {\n      onDone: this._onDone.bind(this),\n      onProgress: this._onProgress.bind(this),\n    };\n    this._requestId = manager.requestRange(begin, end, args);\n    this._requests = [];\n    this._queuedChunk = null;\n    this._done = false;\n\n    this.onProgress = null;\n    this.onClosed = null;\n  }\n\n  _close() {\n    if (this.onClosed) {\n      this.onClosed(this);\n    }\n  }\n\n  _onDone(data) {\n    const chunk = data.chunk;\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({ value: chunk, done: false });\n    } else {\n      this._queuedChunk = chunk;\n    }\n    this._done = true;\n    this._requests.forEach(function (requestCapability) {\n      requestCapability.resolve({ value: undefined, done: true });\n    });\n    this._requests = [];\n    this._close();\n  }\n\n  _onProgress(evt) {\n    if (!this.isStreamingSupported && this.onProgress) {\n      this.onProgress({\n        loaded: evt.loaded,\n      });\n    }\n  }\n\n  get isStreamingSupported() {\n    return false;\n  }\n\n  async read() {\n    if (this._queuedChunk !== null) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = createPromiseCapability();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    this._requests.forEach(function (requestCapability) {\n      requestCapability.resolve({ value: undefined, done: true });\n    });\n    this._requests = [];\n    if (this._manager.isPendingRequest(this._requestId)) {\n      this._manager.abortRequest(this._requestId);\n    }\n    this._close();\n  }\n}\n\nexport { PDFNetworkStream };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint no-var: error */\n\nimport {\n  AbortException,\n  assert,\n  createPromiseCapability,\n} from \"../shared/util.js\";\nimport {\n  createResponseStatusError,\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n  validateResponseStatus,\n} from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./fetch_stream.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nfunction createFetchOptions(headers, withCredentials, abortController) {\n  return {\n    method: \"GET\",\n    headers,\n    signal: abortController && abortController.signal,\n    mode: \"cors\",\n    credentials: withCredentials ? \"include\" : \"same-origin\",\n    redirect: \"follow\",\n  };\n}\n\nfunction createHeaders(httpHeaders) {\n  const headers = new Headers();\n  for (const property in httpHeaders) {\n    const value = httpHeaders[property];\n    if (typeof value === \"undefined\") {\n      continue;\n    }\n    headers.append(property, value);\n  }\n  return headers;\n}\n\n/** @implements {IPDFStream} */\nclass PDFFetchStream {\n  constructor(source) {\n    this.source = source;\n    this.isHttp = /^https?:/i.test(source.url);\n    this.httpHeaders = (this.isHttp && source.httpHeaders) || {};\n\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader ? this._fullRequestReader._loaded : 0;\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFFetchStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = new PDFFetchStreamReader(this);\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFFetchStreamRangeReader(this, begin, end);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    if (this._fullRequestReader) {\n      this._fullRequestReader.cancel(reason);\n    }\n    const readers = this._rangeRequestReaders.slice(0);\n    readers.forEach(function (reader) {\n      reader.cancel(reason);\n    });\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFFetchStreamReader {\n  constructor(stream) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    this._filename = null;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._contentLength = source.length;\n    this._headersCapability = createPromiseCapability();\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    if (typeof AbortController !== \"undefined\") {\n      this._abortController = new AbortController();\n    }\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n\n    this._headers = createHeaders(this._stream.httpHeaders);\n\n    const url = source.url;\n    fetch(\n      url,\n      createFetchOptions(\n        this._headers,\n        this._withCredentials,\n        this._abortController\n      )\n    )\n      .then(response => {\n        if (!validateResponseStatus(response.status)) {\n          throw createResponseStatusError(response.status, url);\n        }\n        this._reader = response.body.getReader();\n        this._headersCapability.resolve();\n\n        const getResponseHeader = name => {\n          return response.headers.get(name);\n        };\n        const {\n          allowRangeRequests,\n          suggestedLength,\n        } = validateRangeRequestCapabilities({\n          getResponseHeader,\n          isHttp: this._stream.isHttp,\n          rangeChunkSize: this._rangeChunkSize,\n          disableRange: this._disableRange,\n        });\n\n        this._isRangeSupported = allowRangeRequests;\n        // Setting right content length.\n        this._contentLength = suggestedLength || this._contentLength;\n\n        this._filename = extractFilenameFromHeader(getResponseHeader);\n\n        // We need to stop reading when range is supported and streaming is\n        // disabled.\n        if (!this._isStreamingSupported && this._isRangeSupported) {\n          this.cancel(new AbortException(\"Streaming is disabled.\"));\n        }\n      })\n      .catch(this._headersCapability.reject);\n\n    this.onProgress = null;\n  }\n\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._headersCapability.promise;\n    const { value, done } = await this._reader.read();\n    if (done) {\n      return { value, done };\n    }\n    this._loaded += value.byteLength;\n    if (this.onProgress) {\n      this.onProgress({\n        loaded: this._loaded,\n        total: this._contentLength,\n      });\n    }\n    const buffer = new Uint8Array(value).buffer;\n    return { value: buffer, done: false };\n  }\n\n  cancel(reason) {\n    if (this._reader) {\n      this._reader.cancel(reason);\n    }\n    if (this._abortController) {\n      this._abortController.abort();\n    }\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFFetchStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._readCapability = createPromiseCapability();\n    this._isStreamingSupported = !source.disableStream;\n\n    if (typeof AbortController !== \"undefined\") {\n      this._abortController = new AbortController();\n    }\n\n    this._headers = createHeaders(this._stream.httpHeaders);\n    this._headers.append(\"Range\", `bytes=${begin}-${end - 1}`);\n\n    const url = source.url;\n    fetch(\n      url,\n      createFetchOptions(\n        this._headers,\n        this._withCredentials,\n        this._abortController\n      )\n    )\n      .then(response => {\n        if (!validateResponseStatus(response.status)) {\n          throw createResponseStatusError(response.status, url);\n        }\n        this._readCapability.resolve();\n        this._reader = response.body.getReader();\n      })\n      .catch(reason => {\n        if (reason && reason.name === \"AbortError\") {\n          return;\n        }\n        throw reason;\n      });\n\n    this.onProgress = null;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    const { value, done } = await this._reader.read();\n    if (done) {\n      return { value, done };\n    }\n    this._loaded += value.byteLength;\n    if (this.onProgress) {\n      this.onProgress({ loaded: this._loaded });\n    }\n    const buffer = new Uint8Array(value).buffer;\n    return { value: buffer, done: false };\n  }\n\n  cancel(reason) {\n    if (this._reader) {\n      this._reader.cancel(reason);\n    }\n    if (this._abortController) {\n      this._abortController.abort();\n    }\n  }\n}\n\nexport { PDFFetchStream };\n"],"sourceRoot":""}